(()=>{"use strict";var e={d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{BrowserClient:()=>ws,SDK_VERSION:()=>s,SEMANTIC_ATTRIBUTE_SENTRY_OP:()=>dt,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:()=>ht,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:()=>ut,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:()=>lt,Scope:()=>le,WINDOW:()=>ys,addBreadcrumb:()=>Ds,addEventProcessor:()=>pn,addIntegration:()=>Te,addTracingExtensions:()=>gd,breadcrumbsIntegration:()=>Vs,browserApiErrorsIntegration:()=>Xs,browserProfilingIntegration:()=>Ea,browserTracingIntegration:()=>Zo,captureConsoleIntegration:()=>yd,captureEvent:()=>tn,captureException:()=>Zt,captureFeedback:()=>_d,captureMessage:()=>en,captureSession:()=>yn,captureUserFeedback:()=>Yr,chromeStackLineParser:()=>_r,close:()=>dn,contextLinesIntegration:()=>th,continueTrace:()=>ui,createTransport:()=>Ur,createUserFeedbackEnvelope:()=>Ss,debugIntegration:()=>bd,dedupeIntegration:()=>He,defaultRequestInstrumentationOptions:()=>Go,defaultStackLineParsers:()=>Cr,defaultStackParser:()=>Mr,endSession:()=>mn,eventFromException:()=>hs,eventFromMessage:()=>ps,exceptionFromError:()=>is,extraErrorDataIntegration:()=>vd,feedbackAsyncIntegration:()=>xf,feedbackIntegration:()=>Tf,feedbackSyncIntegration:()=>Tf,flush:()=>un,forceLoad:()=>Gr,functionToStringIntegration:()=>Oe,geckoStackLineParser:()=>Sr,getActiveSpan:()=>Ht,getClient:()=>Se,getCurrentHub:()=>Sd,getCurrentScope:()=>ge,getDefaultIntegrations:()=>qr,getFeedback:()=>Wh,getGlobalScope:()=>_e,getIsolationScope:()=>ye,getReplay:()=>md,getRootSpan:()=>Ut,getSpanDescendants:()=>Bt,getSpanStatusFromHttpCode:()=>Tt,globalHandlersIntegration:()=>ir,httpClientIntegration:()=>Gd,httpContextIntegration:()=>cr,inboundFiltersIntegration:()=>Ce,init:()=>Wr,instrumentOutgoingRequests:()=>Xo,isInitialized:()=>hn,lastEventId:()=>ln,lazyLoadIntegration:()=>zd,linkedErrorsIntegration:()=>pr,makeBrowserOfflineTransport:()=>Xf,makeFetchTransport:()=>zr,makeMultiplexedTransport:()=>kd,metrics:()=>Uf,moduleMetadataIntegration:()=>Md,onLoad:()=>Xr,opera10StackLineParser:()=>xr,opera11StackLineParser:()=>Ir,parameterize:()=>Rd,registerSpanErrorInstrumentation:()=>Ho,replayCanvasIntegration:()=>Rh,replayIntegration:()=>hd,reportingObserverIntegration:()=>Vd,rewriteFramesIntegration:()=>Dd,sendFeedback:()=>Ph,sessionTimingIntegration:()=>Ld,setContext:()=>nn,setCurrentClient:()=>Ve,setExtra:()=>rn,setExtras:()=>sn,setHttpStatus:()=>It,setMeasurement:()=>Qr,setTag:()=>an,setTags:()=>on,setUser:()=>cn,showReportDialog:()=>Vr,spanToBaggageHeader:()=>Gt,spanToJSON:()=>Dt,spanToTraceHeader:()=>Nt,startBrowserTracingNavigationSpan:()=>ta,startBrowserTracingPageLoadSpan:()=>ea,startInactiveSpan:()=>li,startNewTrace:()=>pi,startSession:()=>fn,startSpan:()=>ai,startSpanManual:()=>ci,suppressTracing:()=>hi,thirdPartyErrorFilterIntegration:()=>Pd,winjsStackLineParser:()=>kr,withActiveSpan:()=>di,withIsolationScope:()=>ve,withScope:()=>be,zodErrorsIntegration:()=>Bd});const n="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,s="8.36.0",r=globalThis;function i(e,t,n){const i=n||r,o=i.__SENTRY__=i.__SENTRY__||{},a=o[s]=o[s]||{};return a[e]||(a[e]=t())}const o=["debug","info","warn","error","log","assert","trace"],a={};function c(e){if(!("console"in r))return e();const t=r.console,n={},s=Object.keys(a);s.forEach((e=>{const s=a[e];n[e]=t[e],t[e]=s}));try{return e()}finally{s.forEach((e=>{t[e]=n[e]}))}}const l=i("logger",(function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return n?o.forEach((n=>{t[n]=(...t)=>{e&&c((()=>{r.console[n](`Sentry Logger [${n}]:`,...t)}))}})):o.forEach((e=>{t[e]=()=>{}})),t})),u=Object.prototype.toString;function d(e){switch(u.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return S(e,Error)}}function h(e,t){return u.call(e)===`[object ${t}]`}function p(e){return h(e,"ErrorEvent")}function f(e){return h(e,"DOMError")}function m(e){return h(e,"String")}function g(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function y(e){return null===e||g(e)||"object"!=typeof e&&"function"!=typeof e}function _(e){return h(e,"Object")}function b(e){return"undefined"!=typeof Event&&S(e,Event)}function v(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function S(e,t){try{return e instanceof t}catch(e){return!1}}function w(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}const k=r,E=80;function x(e,t={}){if(!e)return"<unknown>";try{let n=e;const s=5,r=[];let i=0,o=0;const a=" > ",c=a.length;let l;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||E;for(;n&&i++<s&&(l=T(n,u),!("html"===l||i>1&&o+r.length*c+l.length>=d));)r.push(l),o+=l.length,n=n.parentNode;return r.reverse().join(a)}catch(e){return"<unknown>"}}function T(e,t){const n=e,s=[];if(!n||!n.tagName)return"";if(k.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}s.push(n.tagName.toLowerCase());const r=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(r&&r.length)r.forEach((e=>{s.push(`[${e[0]}="${e[1]}"]`)}));else{n.id&&s.push(`#${n.id}`);const e=n.className;if(e&&m(e)){const t=e.split(/\s+/);for(const e of t)s.push(`.${e}`)}}const i=["aria-label","type","name","title","alt"];for(const e of i){const t=n.getAttribute(e);t&&s.push(`[${e}="${t}"]`)}return s.join("")}function I(){try{return k.document.location.href}catch(e){return""}}function C(e){if(!k.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function M(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function R(e,t){let n=e;const s=n.length;if(s<=150)return n;t>s&&(t=s);let r=Math.max(t-60,0);r<5&&(r=0);let i=Math.min(r+140,s);return i>s-5&&(i=s),i===s&&(r=Math.max(i-140,0)),n=n.slice(r,i),r>0&&(n=`'{snip} ${n}`),i<s&&(n+=" {snip}"),n}function N(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const s=e[t];try{w(s)?n.push("[VueViewModel]"):n.push(String(s))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function O(e,t=[],n=!1){return t.some((t=>function(e,t,n=!1){return!!m(e)&&(h(t,"RegExp")?t.test(e):!!m(t)&&(n?e===t:e.includes(t)))}(e,t,n)))}function A(e,t,n){if(!(t in e))return;const s=e[t],r=n(s);"function"==typeof r&&L(r,s),e[t]=r}function D(e,t,s){try{Object.defineProperty(e,t,{value:s,writable:!0,configurable:!0})}catch(s){n&&l.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function L(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,D(e,"__sentry_original__",t)}catch(e){}}function P(e){return e.__sentry_original__}function F(e){if(d(e))return{message:e.message,name:e.name,stack:e.stack,...j(e)};if(b(e)){const t={type:e.type,target:$(e.target),currentTarget:$(e.currentTarget),...j(e)};return"undefined"!=typeof CustomEvent&&S(e,CustomEvent)&&(t.detail=e.detail),t}return e}function $(e){try{return"undefined"!=typeof Element&&S(e,Element)?x(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function j(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function B(e){return U(e,new Map)}function U(e,t){if(function(e){if(!_(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const s={};t.set(e,s);for(const n of Object.getOwnPropertyNames(e))void 0!==e[n]&&(s[n]=U(e[n],t));return s}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const s=[];return t.set(e,s),e.forEach((e=>{s.push(U(e,t))})),s}return e}function H(){const e=r,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function z(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function q(e){const{message:t,event_id:n}=e;if(t)return t;const s=z(e);return s?s.type&&s.value?`${s.type}: ${s.value}`:s.type||s.value||n||"<unknown>":n||"<unknown>"}function W(e,t,n){const s=e.exception=e.exception||{},r=s.values=s.values||[],i=r[0]=r[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function V(e,t){const n=z(e);if(!n)return;const s=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...s,...t},t&&"data"in t){const e={...s&&s.data,...t.data};n.mechanism.data=e}}function G(e){if(e&&e.__sentry_captured__)return!0;try{D(e,"__sentry_captured__",!0)}catch(e){}return!1}function X(e){return Array.isArray(e)?e:[e]}const Y="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function J(){return K(r),r}function K(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||s,t[s]=t[s]||{}}function Q(){return{traceId:H(),spanId:H().substring(16)}}const Z=1e3;function ee(){return Date.now()/Z}const te=function(){const{performance:e}=r;if(!e||!e.now)return ee;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/Z}();let ne;const se=(()=>{const{performance:e}=r;if(!e||!e.now)return void(ne="none");const t=36e5,n=e.now(),s=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-s):t,o=i<t,a=e.timing&&e.timing.navigationStart,c="number"==typeof a?Math.abs(a+n-s):t;return o||c<t?i<=c?(ne="timeOrigin",e.timeOrigin):(ne="navigationStart",a):(ne="dateNow",s)})();function re(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||te(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:H()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}const ie="_sentrySpan";function oe(e,t){t?D(e,ie,t):delete e[ie]}function ae(e){return e[ie]}class ce{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Q()}clone(){const e=new ce;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,oe(e,ae(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&re(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,[n,s]=t instanceof le?[t.getScopeData(),t.getRequestSession()]:_(t)?[e,e.requestSession]:[],{tags:r,extra:i,user:o,contexts:a,level:c,fingerprint:l=[],propagationContext:u}=n||{};return this._tags={...this._tags,...r},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),c&&(this._level=c),l.length&&(this._fingerprint=l),u&&(this._propagationContext=u),s&&(this._requestSession=s),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,oe(this,void 0),this._attachments=[],this._propagationContext=Q(),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const s={timestamp:ee(),...e},r=this._breadcrumbs;return r.push(s),this._breadcrumbs=r.length>n?r.slice(-n):r,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:ae(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:H();if(!this._client)return l.warn("No client configured on scope - will not capture exception!"),n;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...t,event_id:n},this),n}captureMessage(e,t,n){const s=n&&n.event_id?n.event_id:H();if(!this._client)return l.warn("No client configured on scope - will not capture message!"),s;const r=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:r,...n,event_id:s},this),s}captureEvent(e,t){const n=t&&t.event_id?t.event_id:H();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(l.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}const le=ce;class ue{constructor(e,t){let n,s;n=e||new le,s=t||new le,this._stack=[{scope:n}],this._isolationScope=s}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(e){throw this._popScope(),e}return v(n)?n.then((e=>(this._popScope(),e)),(e=>{throw this._popScope(),e})):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1||!this._stack.pop())}}function de(){const e=K(J());return e.stack=e.stack||new ue(i("defaultCurrentScope",(()=>new le)),i("defaultIsolationScope",(()=>new le)))}function he(e){return de().withScope(e)}function pe(e,t){const n=de();return n.withScope((()=>(n.getStackTop().scope=e,t(e))))}function fe(e){return de().withScope((()=>e(de().getIsolationScope())))}function me(e){const t=K(e);return t.acs?t.acs:{withIsolationScope:fe,withScope:he,withSetScope:pe,withSetIsolationScope:(e,t)=>fe(t),getCurrentScope:()=>de().getScope(),getIsolationScope:()=>de().getIsolationScope()}}function ge(){return me(J()).getCurrentScope()}function ye(){return me(J()).getIsolationScope()}function _e(){return i("globalScope",(()=>new le))}function be(...e){const t=me(J());if(2===e.length){const[n,s]=e;return n?t.withSetScope(n,s):t.withScope(s)}return t.withScope(e[0])}function ve(...e){const t=me(J());if(2===e.length){const[n,s]=e;return n?t.withSetIsolationScope(n,s):t.withIsolationScope(s)}return t.withIsolationScope(e[0])}function Se(){return ge().getClient()}const we=[];function ke(e){const t=e.defaultIntegrations||[],n=e.integrations;let s;t.forEach((e=>{e.isDefaultInstance=!0})),s=Array.isArray(n)?[...t,...n]:"function"==typeof n?X(n(t)):t;const r=function(e){const t={};return e.forEach((e=>{const{name:n}=e,s=t[n];s&&!s.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.values(t)}(s),i=r.findIndex((e=>"Debug"===e.name));if(i>-1){const[e]=r.splice(i,1);r.push(e)}return r}function Ee(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function xe(e,t,n){if(n[t.name])Y&&l.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===we.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),we.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,s)=>n(t,s,e)))}if("function"==typeof t.processEvent){const n=t.processEvent.bind(t),s=Object.assign(((t,s)=>n(t,s,e)),{id:t.name});e.addEventProcessor(s)}Y&&l.log(`Integration installed: ${t.name}`)}}function Te(e){const t=Se();t?t.addIntegration(e):Y&&l.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)}const Ie=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],Ce=(e={})=>({name:"InboundFilters",processEvent(t,n,s){const r=s.getOptions(),i=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Ie],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,r);return function(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(Y&&l.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${q(e)}`),!0):function(e,t){return!(e.type||!t||!t.length)&&function(e){const t=[];let n;e.message&&t.push(e.message);try{n=e.exception.values[e.exception.values.length-1]}catch(e){}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),t}(e).some((e=>O(e,t)))}(e,t.ignoreErrors)?(Y&&l.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${q(e)}`),!0):function(e){return!e.type&&(!(!e.exception||!e.exception.values||0===e.exception.values.length)&&(!e.message&&!e.exception.values.some((e=>e.stacktrace||e.type&&"Error"!==e.type||e.value))))}(e)?(Y&&l.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${q(e)}`),!0):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&O(n,t)}(e,t.ignoreTransactions)?(Y&&l.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${q(e)}`),!0):function(e,t){if(!t||!t.length)return!1;const n=Me(e);return!!n&&O(n,t)}(e,t.denyUrls)?(Y&&l.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${q(e)}.\nUrl: ${Me(e)}`),!0):!function(e,t){if(!t||!t.length)return!0;const n=Me(e);return!n||O(n,t)}(e,t.allowUrls)&&(Y&&l.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${q(e)}.\nUrl: ${Me(e)}`),!0)}(t,i)?null:t}});function Me(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return Y&&l.error(`Cannot extract url for event ${q(e)}`),null}}let Re;const Ne=new WeakMap,Oe=()=>({name:"FunctionToString",setupOnce(){Re=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=P(this),n=Ne.has(Se())&&void 0!==t?t:this;return Re.apply(n,e)}}catch(e){}},setup(e){Ne.set(e,!0)}}),Ae=50,De="?",Le=/\(error: (.*)\)/,Pe=/captureMessage|captureException/;function Fe(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0,s=0)=>{const r=[],i=e.split("\n");for(let e=n;e<i.length;e++){const n=i[e];if(n.length>1024)continue;const o=Le.test(n)?n.replace(Le,"$1"):n;if(!o.match(/\S*Error: /)){for(const e of t){const t=e(o);if(t){r.push(t);break}}if(r.length>=Ae+s)break}}return function(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test($e(t).function||"")&&t.pop(),t.reverse(),Pe.test($e(t).function||"")&&(t.pop(),Pe.test($e(t).function||"")&&t.pop()),t.slice(0,Ae).map((e=>({...e,filename:e.filename||$e(t).filename,function:e.function||De})))}(r.slice(s))}}function $e(e){return e[e.length-1]||{}}const je="<anonymous>";function Be(e){try{return e&&"function"==typeof e&&e.name||je}catch(e){return je}}function Ue(e){const t=e.exception;if(t){const e=[];try{return t.values.forEach((t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)})),e}catch(e){return}}}const He=()=>{let e;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{if(function(e,t){return!!t&&(!!function(e,t){const n=e.message,s=t.message;return!(!n&&!s)&&(!(n&&!s||!n&&s)&&(n===s&&(!!qe(e,t)&&!!ze(e,t))))}(e,t)||!!function(e,t){const n=We(t),s=We(e);return!(!n||!s)&&(n.type===s.type&&n.value===s.value&&(!!qe(e,t)&&!!ze(e,t)))}(e,t))}(t,e))return Y&&l.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};function ze(e,t){let n=Ue(e),s=Ue(t);if(!n&&!s)return!0;if(n&&!s||!n&&s)return!1;if(s.length!==n.length)return!1;for(let e=0;e<s.length;e++){const t=s[e],r=n[e];if(t.filename!==r.filename||t.lineno!==r.lineno||t.colno!==r.colno||t.function!==r.function)return!1}return!0}function qe(e,t){let n=e.fingerprint,s=t.fingerprint;if(!n&&!s)return!0;if(n&&!s||!n&&s)return!1;try{return!(n.join("")!==s.join(""))}catch(e){return!1}}function We(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Ve(e){ge().setClient(e)}const Ge="production";function Xe(e,t=100,n=1/0){try{return Je("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function Ye(e,t=3,n=102400){const s=Xe(e,t);return r=s,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(r))>n?Ye(e,t-1,n):s;var r}function Je(e,t,n=1/0,s=1/0,r=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[i,o]=r;if(null==t||["boolean","string"].includes(typeof t)||"number"==typeof t&&Number.isFinite(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(w(t))return"[VueViewModel]";if(_(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${Be(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const s=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(s)?`[HTMLElement: ${s}]`:`[object ${s}]`}catch(e){return`**non-serializable** (${e})`}var n}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return a.replace("object ","");if(i(t))return"[Circular ~]";const l=t;if(l&&"function"==typeof l.toJSON)try{return Je("",l.toJSON(),c-1,s,r)}catch(e){}const u=Array.isArray(t)?[]:{};let d=0;const h=F(t);for(const e in h){if(!Object.prototype.hasOwnProperty.call(h,e))continue;if(d>=s){u[e]="[MaxProperties ~]";break}const t=h[e];u[e]=Je(e,t,c-1,s,r),d++}return o(t),u}var Ke;function Qe(e){return new et((t=>{t(e)}))}function Ze(e){return new et(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(Ke||(Ke={}));class et{constructor(e){et.prototype.__init.call(this),et.prototype.__init2.call(this),et.prototype.__init3.call(this),et.prototype.__init4.call(this),this._state=Ke.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new et(((n,s)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){s(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){s(e)}else s(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new et(((t,n)=>{let s,r;return this.then((t=>{r=!1,s=t,e&&e()}),(t=>{r=!0,s=t,e&&e()})).then((()=>{r?n(s):t(s)}))}))}__init(){this._resolve=e=>{this._setResult(Ke.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Ke.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Ke.PENDING&&(v(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Ke.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Ke.RESOLVED&&e[1](this._value),this._state===Ke.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function tt(e,t,n,s=0){return new et(((r,i)=>{const o=e[s];if(null===t||"function"!=typeof o)r(t);else{const a=o({...t},n);Y&&o.id&&null===a&&l.log(`Event processor "${o.id}" dropped event`),v(a)?a.then((t=>tt(e,t,n,s+1).then(r))).then(null,i):tt(e,a,n,s+1).then(r).then(null,i)}}))}const nt="baggage",st="sentry-",rt=/^sentry-/,it=8192;function ot(e){const t=function(e){if(e&&(m(e)||Array.isArray(e)))return Array.isArray(e)?e.reduce(((e,t)=>{const n=ct(t);return Object.entries(n).forEach((([t,n])=>{e[t]=n})),e}),{}):ct(e)}(e);if(!t)return;const n=Object.entries(t).reduce(((e,[t,n])=>(t.match(rt)&&(e[t.slice(st.length)]=n),e)),{});return Object.keys(n).length>0?n:void 0}function at(e){if(e)return function(e){if(0!==Object.keys(e).length)return Object.entries(e).reduce(((e,[t,s],r)=>{const i=`${encodeURIComponent(t)}=${encodeURIComponent(s)}`,o=0===r?i:`${e},${i}`;return o.length>it?(n&&l.warn(`Not adding key: ${t} with val: ${s} to baggage header due to exceeding baggage size limits.`),e):o}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${st}${t}`]=n),e)),{}))}function ct(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(t&&n&&(e[t]=n),e)),{})}const lt="sentry.source",ut="sentry.sample_rate",dt="sentry.op",ht="sentry.origin",pt="sentry.idle_span_finish_reason",ft="sentry.measurement_unit",mt="sentry.measurement_value",gt="sentry.exclusive_time";function yt(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=Se(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}const _t=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function bt(e,t){const n=function(e){if(!e)return;const t=e.match(_t);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}(e),s=ot(t),{traceId:r,parentSpanId:i,parentSampled:o}=n||{};return n?{traceId:r||H(),parentSpanId:i||H().substring(16),spanId:H().substring(16),sampled:o,dsc:s||{}}:{traceId:r||H(),spanId:H().substring(16)}}function vt(e=H(),t=H().substring(16),n){let s="";return void 0!==n&&(s=n?"-1":"-0"),`${e}-${t}${s}`}const St="_sentryMetrics";function wt(e){const t=e[St];if(!t)return;const n={};for(const[,[e,s]]of t)(n[e]||(n[e]=[])).push(B(s));return n}const kt=0,Et=1,xt=2;function Tt(e){if(e<400&&e>=100)return{code:Et};if(e>=400&&e<500)switch(e){case 401:return{code:xt,message:"unauthenticated"};case 403:return{code:xt,message:"permission_denied"};case 404:return{code:xt,message:"not_found"};case 409:return{code:xt,message:"already_exists"};case 413:return{code:xt,message:"failed_precondition"};case 429:return{code:xt,message:"resource_exhausted"};case 499:return{code:xt,message:"cancelled"};default:return{code:xt,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:xt,message:"unimplemented"};case 503:return{code:xt,message:"unavailable"};case 504:return{code:xt,message:"deadline_exceeded"};default:return{code:xt,message:"internal_error"}}return{code:xt,message:"unknown_error"}}function It(e,t){e.setAttribute("http.response.status_code",t);const n=Tt(t);"unknown_error"!==n.message&&e.setStatus(n)}const Ct=1;function Mt(e){const{spanId:t,traceId:n}=e.spanContext(),{data:s,op:r,parent_span_id:i,status:o,origin:a}=Dt(e);return B({parent_span_id:i,span_id:t,trace_id:n,data:s,op:r,status:o,origin:a})}function Rt(e){const{spanId:t,traceId:n}=e.spanContext(),{parent_span_id:s}=Dt(e);return B({parent_span_id:s,span_id:t,trace_id:n})}function Nt(e){const{traceId:t,spanId:n}=e.spanContext();return vt(t,n,Lt(e))}function Ot(e){return"number"==typeof e?At(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?At(e.getTime()):te()}function At(e){return e>9999999999?e/1e3:e}function Dt(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();try{const{spanId:t,traceId:n}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:s,startTime:r,name:i,endTime:o,parentSpanId:a,status:c}=e;return B({span_id:t,trace_id:n,data:s,description:i,parent_span_id:a,start_timestamp:Ot(r),timestamp:Ot(o)||void 0,status:Pt(c),op:s[dt],origin:s[ht],_metrics_summary:wt(e)})}return{span_id:t,trace_id:n}}catch(e){return{}}}function Lt(e){const{traceFlags:t}=e.spanContext();return t===Ct}function Pt(e){if(e&&e.code!==kt)return e.code===Et?"ok":e.message||"unknown_error"}const Ft="_sentryChildSpans",$t="_sentryRootSpan";function jt(e,t){const n=e[$t]||e;D(t,$t,n),e[Ft]?e[Ft].add(t):D(e,Ft,new Set([t]))}function Bt(e){const t=new Set;return function e(n){if(!t.has(n)&&Lt(n)){t.add(n);const s=n[Ft]?Array.from(n[Ft]):[];for(const t of s)e(t)}}(e),Array.from(t)}function Ut(e){return e[$t]||e}function Ht(){const e=me(J());return e.getActiveSpan?e.getActiveSpan():ae(ge())}const zt="_frozenDsc";function qt(e,t){D(e,zt,t)}function Wt(e,t){const n=t.getOptions(),{publicKey:s}=t.getDsn()||{},r=B({environment:n.environment||Ge,release:n.release,public_key:s,trace_id:e});return t.emit("createDsc",r),r}function Vt(e){const t=Se();if(!t)return{};const n=Wt(Dt(e).trace_id||"",t),s=Ut(e),r=s[zt];if(r)return r;const i=s.spanContext().traceState,o=i&&i.get("sentry.dsc"),a=o&&ot(o);if(a)return a;const c=Dt(s),l=c.data||{},u=l[ut];null!=u&&(n.sample_rate=`${u}`);const d=l[lt],h=c.description;return"url"!==d&&h&&(n.transaction=h),yt()&&(n.sampled=String(Lt(s))),t.emit("createDsc",n,s),n}function Gt(e){return at(Vt(e))}function Xt(e,t){const{extra:n,tags:s,user:r,contexts:i,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:l,eventProcessors:u,attachments:d,propagationContext:h,transactionName:p,span:f}=t;Yt(e,"extra",n),Yt(e,"tags",s),Yt(e,"user",r),Yt(e,"contexts",i),Yt(e,"sdkProcessingMetadata",a),o&&(e.level=o),p&&(e.transactionName=p),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...h}}function Yt(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[t][s]=n[s])}}function Jt(e,t,n,s,i,o){const{normalizeDepth:a=3,normalizeMaxBreadth:c=1e3}=e,l={...t,event_id:t.event_id||n.event_id||H(),timestamp:t.timestamp||ee()},u=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:s,dist:r,maxValueLength:i=250}=t;"environment"in e||(e.environment="environment"in t?n:Ge),void 0===e.release&&void 0!==s&&(e.release=s),void 0===e.dist&&void 0!==r&&(e.dist=r),e.message&&(e.message=M(e.message,i));const o=e.exception&&e.exception.values&&e.exception.values[0];o&&o.value&&(o.value=M(o.value,i));const a=e.request;a&&a.url&&(a.url=M(a.url,i))}(l,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(l,u),i&&i.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){const n=r._sentryDebugIds;if(!n)return;let s;const i=Kt.get(t);i?s=i:(s=new Map,Kt.set(t,s));const o=Object.entries(n).reduce(((e,[n,r])=>{let i;const o=s.get(n);o?i=o:(i=t(n),s.set(n,i));for(let t=i.length-1;t>=0;t--){const n=i[t];if(n.filename){e[n.filename]=r;break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=o[e.filename])}))}))}catch(e){}}(l,e.stackParser);const d=function(e,t){if(!t)return e;const n=e?e.clone():new le;return n.update(t),n}(s,n.captureContext);n.mechanism&&V(l,n.mechanism);const h=i?i.getEventProcessors():[],p=_e().getScopeData();o&&Xt(p,o.getScopeData()),d&&Xt(p,d.getScopeData());const f=[...n.attachments||[],...p.attachments];return f.length&&(n.attachments=f),function(e,t){const{fingerprint:n,span:s,breadcrumbs:r,sdkProcessingMetadata:i}=t;!function(e,t){const{extra:n,tags:s,user:r,contexts:i,level:o,transactionName:a}=t,c=B(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const l=B(s);l&&Object.keys(l).length&&(e.tags={...l,...e.tags});const u=B(r);u&&Object.keys(u).length&&(e.user={...u,...e.user});const d=B(i);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts}),o&&(e.level=o),a&&"transaction"!==e.type&&(e.transaction=a)}(e,t),s&&function(e,t){e.contexts={trace:Rt(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Vt(t),...e.sdkProcessingMetadata};const n=Dt(Ut(t)).description;n&&!e.transaction&&"transaction"===e.type&&(e.transaction=n)}(e,s),function(e,t){e.fingerprint=e.fingerprint?X(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,r),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,i)}(l,p),tt([...h,...p.eventProcessors],l,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach((([e,t])=>{n.push({type:"sourcemap",code_file:e,debug_id:t})}))}(e),"number"==typeof a&&a>0?function(e,t,n){if(!e)return null;const s={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:Xe(e.data,t,n)}})))},...e.user&&{user:Xe(e.user,t,n)},...e.contexts&&{contexts:Xe(e.contexts,t,n)},...e.extra&&{extra:Xe(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&s.contexts&&(s.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(s.contexts.trace.data=Xe(e.contexts.trace.data,t,n))),e.spans&&(s.spans=e.spans.map((e=>({...e,...e.data&&{data:Xe(e.data,t,n)}})))),s}(e,a,c):e)))}const Kt=new WeakMap;const Qt=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Zt(e,t){return ge().captureException(e,function(e){if(e)return function(e){return e instanceof le||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>Qt.includes(e)))}(e)?{captureContext:e}:e}(t))}function en(e,t){const n="string"==typeof t?t:void 0,s="string"!=typeof t?{captureContext:t}:void 0;return ge().captureMessage(e,n,s)}function tn(e,t){return ge().captureEvent(e,t)}function nn(e,t){ye().setContext(e,t)}function sn(e){ye().setExtras(e)}function rn(e,t){ye().setExtra(e,t)}function on(e){ye().setTags(e)}function an(e,t){ye().setTag(e,t)}function cn(e){ye().setUser(e)}function ln(){return ye().lastEventId()}async function un(e){const t=Se();return t?t.flush(e):(Y&&l.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function dn(e){const t=Se();return t?t.close(e):(Y&&l.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function hn(){return!!Se()}function pn(e){ye().addEventProcessor(e)}function fn(e){const t=Se(),n=ye(),s=ge(),{release:i,environment:o=Ge}=t&&t.getOptions()||{},{userAgent:a}=r.navigator||{},c=function(e){const t=te(),n={sid:H(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return B({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&re(n,e),n}({release:i,environment:o,user:s.getUser()||n.getUser(),...a&&{userAgent:a},...e}),l=n.getSession();return l&&"ok"===l.status&&re(l,{status:"exited"}),mn(),n.setSession(c),s.setSession(c),c}function mn(){const e=ye(),t=ge(),n=t.getSession()||e.getSession();n&&function(e){let t={};"ok"===e.status&&(t={status:"exited"}),re(e,t)}(n),gn(),e.setSession(),t.setSession()}function gn(){const e=ye(),t=ge(),n=Se(),s=t.getSession()||e.getSession();s&&n&&n.captureSession(s)}function yn(e=!1){e?mn():gn()}const _n=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function bn(e,t=!1){const{host:n,path:s,pass:r,port:i,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&r?`:${r}`:""}@${n}${i?`:${i}`:""}/${s?`${s}/`:s}${o}`}function vn(e){const t=_n.exec(e);if(!t)return void c((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,s,r="",i="",o="",a=""]=t.slice(1);let l="",u=a;const d=u.split("/");if(d.length>1&&(l=d.slice(0,-1).join("/"),u=d.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return Sn({host:i,pass:r,path:l,projectId:u,port:o,protocol:n,publicKey:s})}function Sn(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function wn(e){const t="string"==typeof e?vn(e):Sn(e);if(t&&function(e){if(!n)return!0;const{port:t,projectId:s,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(l.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(s.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(l.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(l.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(l.error(`Invalid Sentry Dsn: Invalid projectId ${s}`),1)))}(t))return t}const kn="7";function En(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function xn(e,t,n){return t||`${function(e){return`${En(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){return n={sentry_key:e.publicKey,sentry_version:kn,...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}(e,n)}`}const Tn=r;function In(){if(!("fetch"in Tn))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function Cn(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Mn(){if("string"==typeof EdgeRuntime)return!0;if(!In())return!1;if(Cn(Tn.fetch))return!0;let e=!1;const t=Tn.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Cn(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){n&&l.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}const Rn={},Nn={};function On(e,t){Rn[e]=Rn[e]||[],Rn[e].push(t)}function An(e,t){Nn[e]||(t(),Nn[e]=!0)}function Dn(e,t){const s=e&&Rn[e];if(s)for(const r of s)try{r(t)}catch(t){n&&l.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Be(r)}\nError:`,t)}}const Ln=r,Pn=r;let Fn;function $n(e){const t="history";On(t,e),An(t,jn)}function jn(){if(!function(){const e=Ln.chrome,t=e&&e.app&&e.app.runtime,n="history"in Ln&&!!Ln.history.pushState&&!!Ln.history.replaceState;return!t&&n}())return;const e=Pn.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=Fn,t=String(n);Fn=t,Dn("history",{from:e,to:t})}return e.apply(this,t)}}Pn.onpopstate=function(...t){const n=Pn.location.href,s=Fn;if(Fn=n,Dn("history",{from:s,to:n}),e)try{return e.apply(this,t)}catch(e){}},A(Pn.history,"pushState",t),A(Pn.history,"replaceState",t)}function Bn(e,t=[]){return[e,t]}function Un(e,t){const[n,s]=e;return[n,[...s,t]]}function Hn(e,t){const n=e[1];for(const e of n)if(t(e,e[0].type))return!0;return!1}function zn(e,t){return Hn(e,((e,n)=>t.includes(n)))}function qn(e){return r.__SENTRY__&&r.__SENTRY__.encodePolyfill?r.__SENTRY__.encodePolyfill(e):(new TextEncoder).encode(e)}function Wn(e){const[t,n]=e;let s=JSON.stringify(t);function r(e){"string"==typeof s?s="string"==typeof e?s+e:[qn(s),e]:s.push("string"==typeof e?qn(e):e)}for(const e of n){const[t,n]=e;if(r(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)r(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(Xe(n))}r(e)}}return"string"==typeof s?s:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let s=0;for(const t of e)n.set(t,s),s+=t.length;return n}(s)}function Vn(e){return[{type:"span"},e]}function Gn(e){const t="string"==typeof e.data?qn(e.data):e.data;return[B({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}const Xn={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function Yn(e){return Xn[e]}function Jn(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Kn(e,t,n,s){const r=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&s&&{dsn:bn(s)},...r&&{trace:B({...r})}}}class Qn extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function Zn(e){if("boolean"==typeof e)return Number(e);const t="string"==typeof e?parseFloat(e):e;if(!("number"!=typeof t||isNaN(t)||t<0||t>1))return t;Y&&l.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`)}const es="Not capturing exception because it's already been captured.";class ts{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=wn(e.dsn):Y&&l.warn("No DSN provided, client will not send events."),this._dsn){const t=xn(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){const s=H();if(G(e))return Y&&l.log(es),s;const r={event_id:s,...t};return this._process(this.eventFromException(e,r).then((e=>this._captureEvent(e,r,n)))),r.event_id}captureMessage(e,t,n,s){const r={event_id:H(),...n},i=g(e)?e:String(e),o=y(e)?this.eventFromMessage(i,t,r):this.eventFromException(e,r);return this._process(o.then((e=>this._captureEvent(e,r,s)))),r.event_id}captureEvent(e,t,n){const s=H();if(t&&t.originalException&&G(t.originalException))return Y&&l.log(es),s;const r={event_id:s,...t},i=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,r,i||n)),r.event_id}captureSession(e){"string"!=typeof e.release?Y&&l.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),re(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):Qe(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.emit("close"),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some((({name:e})=>e.startsWith("Spotlight"))))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];xe(this,e,this._integrations),t||Ee(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=function(e,t,n,s){const r=Jn(n),i=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const o=Kn(e,r,s,t);return delete e.sdkProcessingMetadata,Bn(o,[[{type:i},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=Un(n,Gn(e));const s=this.sendEnvelope(n);s&&s.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,n,s){const r=Jn(n);return Bn({sent_at:(new Date).toISOString(),...r&&{sdk:r},...!!s&&t&&{dsn:bn(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const s="number"==typeof n?n:1,r=`${e}:${t}`;Y&&l.log(`Recording outcome: "${r}"${s>1?` (${s} times)`:""}`),this._outcomes[r]=(this._outcomes[r]||0)+s}}on(e,t){const n=this._hooks[e]=this._hooks[e]||[];return n.push(t),()=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,...t){const n=this._hooks[e];n&&n.forEach((e=>e(...t)))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,(e=>(Y&&l.error("Error while sending envelope:",e),e))):(Y&&l.error("Transport disabled"),Qe({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&xe(e,t,n)})),n}(this,e),Ee(this,e)}_updateSessionFromEvent(e,t){let n=!1,s=!1;const r=t.exception&&t.exception.values;if(r){s=!0;for(const e of r){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const i="ok"===e.status;(i&&0===e.errors||i&&n)&&(re(e,{...n&&{status:"crashed"},errors:e.errors||Number(s||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new et((t=>{let n=0;const s=setInterval((()=>{0==this._numProcessing?(clearInterval(s),t(!0)):(n+=1,e&&n>=e&&(clearInterval(s),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,s=ye()){const r=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i.length>0&&(t.integrations=i),this.emit("preprocessEvent",e,t),e.type||s.setLastEventId(e.event_id||t.event_id),Jt(r,e,t,n,this,s).then((e=>{if(null===e)return e;const t={...s.getPropagationContext(),...n?n.getPropagationContext():void 0};if((!e.contexts||!e.contexts.trace)&&t){const{traceId:n,spanId:s,parentSpanId:r,dsc:i}=t;e.contexts={trace:B({trace_id:n,span_id:s,parent_span_id:r}),...e.contexts};const o=i||Wt(n,this);e.sdkProcessingMetadata={dynamicSamplingContext:o,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(Y){const t=e;"log"===t.logLevel?l.log(t.message):l.warn(t)}}))}_processEvent(e,t,n){const s=this.getOptions(),{sampleRate:r}=s,i=ss(e),o=ns(e),a=e.type||"error",c=`before send for type \`${a}\``,l=void 0===r?void 0:Zn(r);if(o&&"number"==typeof l&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error",e),Ze(new Qn(`Discarding event because it's not included in the random sample (sampling rate = ${r})`,"log"));const u="replay_event"===a?"replay":a,d=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,d).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",u,e),new Qn("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const r=function(e,t,n,s){const{beforeSend:r,beforeSendTransaction:i,beforeSendSpan:o}=t;if(ns(n)&&r)return r(n,s);if(ss(n)){if(n.spans&&o){const t=[];for(const s of n.spans){const n=o(s);n?t.push(n):e.recordDroppedEvent("before_send","span")}n.spans=t}if(i){if(n.spans){const e=n.spans.length;n.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return i(n,s)}}return n}(this,s,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(v(e))return e.then((e=>{if(!_(e)&&null!==e)throw new Qn(n);return e}),(e=>{throw new Qn(`${t} rejected with ${e}`)}));if(!_(e)&&null!==e)throw new Qn(n);return e}(r,c)})).then((s=>{if(null===s){if(this.recordDroppedEvent("before_send",u,e),i){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw new Qn(`${c} returned \`null\`, will not send event.`,"log")}const r=n&&n.getSession();if(!i&&r&&this._updateSessionFromEvent(r,s),i){const e=(s.sdkProcessingMetadata&&s.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(s.spans?s.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const o=s.transaction_info;if(i&&o&&s.transaction!==e.transaction){const e="custom";s.transaction_info={...o,source:e}}return this.sendEvent(s,t),s})).then(null,(e=>{if(e instanceof Qn)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new Qn(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map((([e,t])=>{const[n,s]=e.split(":");return{reason:n,category:s,quantity:t}}))}_flushOutcomes(){Y&&l.log("Flushing outcomes...");const e=this._clearOutcomes();if(0===e.length)return void(Y&&l.log("No outcomes to send"));if(!this._dsn)return void(Y&&l.log("No dsn provided, will not send outcomes"));Y&&l.log("Sending outcomes:",e);const t=(n=e,Bn((s=this._options.tunnel&&bn(this._dsn))?{dsn:s}:{},[[{type:"client_report"},{timestamp:ee(),discarded_events:n}]]));var n,s;this.sendEnvelope(t)}}function ns(e){return void 0===e.type}function ss(e){return"transaction"===e.type}const rs="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function is(e,t){const n=as(e,t),s={type:us(t),value:ds(t)};return n.length&&(s.stacktrace={frames:n}),void 0===s.type&&""===s.value&&(s.value="Unrecoverable error caught"),s}function os(e,t){return{exception:{values:[is(e,t)]}}}function as(e,t){const n=t.stacktrace||t.stack||"",s=function(e){return e&&cs.test(e.message)?1:0}(t),r=function(e){return"number"==typeof e.framesToPop?e.framesToPop:0}(t);try{return e(n,s,r)}catch(e){}return[]}const cs=/Minified React error #\d+;/i;function ls(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function us(e){const t=e&&e.name;return!t&&ls(e)?e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception":t}function ds(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:ls(e)&&Array.isArray(e.message)&&2==e.message.length?e.message[1]:t:"No error message"}function hs(e,t,n,s){const r=fs(e,t,n&&n.syntheticException||void 0,s);return V(r),r.level="error",n&&n.event_id&&(r.event_id=n.event_id),Qe(r)}function ps(e,t,n="info",s,r){const i=ms(e,t,s&&s.syntheticException||void 0,r);return i.level=n,s&&s.event_id&&(i.event_id=s.event_id),Qe(i)}function fs(e,t,n,s,r){let i;if(p(t)&&t.error)return os(e,t.error);if(f(t)||h(t,"DOMException")){const r=t;if("stack"in t)i=os(e,t);else{const t=r.name||(f(r)?"DOMError":"DOMException"),o=r.message?`${t}: ${r.message}`:t;i=ms(e,o,n,s),W(i,o)}return"code"in r&&(i.tags={...i.tags,"DOMException.code":`${r.code}`}),i}return d(t)?os(e,t):_(t)||b(t)?(i=function(e,t,n,s){const r=Se(),i=r&&r.getOptions().normalizeDepth,o=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}(t),a={__serialized__:Ye(t,i)};if(o)return{exception:{values:[is(e,o)]},extra:a};const c={exception:{values:[{type:b(t)?t.constructor.name:s?"UnhandledRejection":"Error",value:gs(t,{isUnhandledRejection:s})}]},extra:a};if(n){const t=as(e,n);t.length&&(c.exception.values[0].stacktrace={frames:t})}return c}(e,t,n,r),V(i,{synthetic:!0}),i):(i=ms(e,t,n,s),W(i,`${t}`,void 0),V(i,{synthetic:!0}),i)}function ms(e,t,n,s){const r={};if(s&&n){const s=as(e,n);s.length&&(r.exception={values:[{value:t,stacktrace:{frames:s}}]})}if(g(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return r.logentry={message:e,params:n},r}return r.message=t,r}function gs(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(F(e));n.sort();const s=n[0];if(!s)return"[object has no keys]";if(s.length>=t)return M(s,t);for(let e=n.length;e>0;e--){const s=n.slice(0,e).join(", ");if(!(s.length>t))return e===n.length?s:M(s,t)}return""}(e),s=t?"promise rejection":"exception";return p(e)?`Event \`ErrorEvent\` captured as ${s} with message \`${e.message}\``:b(e)?`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${s}`:`Object captured as ${s} with keys: ${n}`}const ys=r;let _s=0;function bs(){return _s>0}function vs(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(P(e))return e}catch(t){return e}const s=function(){const n=Array.prototype.slice.call(arguments);try{const s=n.map((e=>vs(e,t)));return e.apply(this,s)}catch(e){throw _s++,setTimeout((()=>{_s--})),be((s=>{s.addEventProcessor((e=>(t.mechanism&&(W(e,void 0,void 0),V(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),Zt(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(s[t]=e[t])}catch(e){}L(s,e),D(e,"__sentry_wrapped__",s);try{Object.getOwnPropertyDescriptor(s,"name").configurable&&Object.defineProperty(s,"name",{get:()=>e.name})}catch(e){}return s}function Ss(e,{metadata:t,tunnel:n,dsn:s}){const r={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!s&&{dsn:bn(s)}},i=function(e){return[{type:"user_report"},e]}(e);return Bn(r,[i])}class ws extends ts{constructor(e){const t={parentSpanIsAlwaysRootSpan:!0,...e};!function(e,t,n=[t],r="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:s}))),version:s}),e._metadata=i}(t,"browser",["browser"],ys.SENTRY_SDK_SOURCE||"npm"),super(t),t.sendClientReports&&ys.document&&ys.document.addEventListener("visibilitychange",(()=>{"hidden"===ys.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return hs(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return ps(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(rs&&l.warn("SDK not enabled, will not capture user feedback."));const t=Ss(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}}const ks=1e3;let Es,xs,Ts;function Is(e){On("dom",e),An("dom",Cs)}function Cs(){if(!Pn.document)return;const e=Dn.bind(null,"dom"),t=Ms(e,!0);Pn.document.addEventListener("click",t,!1),Pn.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=Pn[t]&&Pn[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(A(n,"addEventListener",(function(t){return function(n,s,r){if("click"===n||"keypress"==n)try{const s=this,i=s.__sentry_instrumentation_handlers__=s.__sentry_instrumentation_handlers__||{},o=i[n]=i[n]||{refCount:0};if(!o.handler){const s=Ms(e);o.handler=s,t.call(this,n,s,r)}o.refCount++}catch(e){}return t.call(this,n,s,r)}})),A(n,"removeEventListener",(function(e){return function(t,n,s){if("click"===t||"keypress"==t)try{const n=this,r=n.__sentry_instrumentation_handlers__||{},i=r[t];i&&(i.refCount--,i.refCount<=0&&(e.call(this,t,i.handler,s),i.handler=void 0,delete r[t]),0===Object.keys(r).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,s)}})))}))}function Ms(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const s=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,s))return;D(n,"_sentryCaptured",!0),s&&!s._sentryId&&D(s,"_sentryId",H());const r="keypress"===n.type?"input":n.type;(function(e){if(e.type!==xs)return!1;try{if(!e.target||e.target._sentryId!==Ts)return!1}catch(e){}return!0})(n)||(e({event:n,name:r,global:t}),xs=n.type,Ts=s?s._sentryId:void 0),clearTimeout(Es),Es=Pn.setTimeout((()=>{Ts=void 0,xs=void 0}),ks)}}const Rs="__sentry_xhr_v3__";function Ns(e){On("xhr",e),An("xhr",Os)}function Os(){if(!Pn.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,n){const s=1e3*te(),r=m(n[0])?n[0].toUpperCase():void 0,i=function(e){if(m(e))return e;try{return e.toString()}catch(e){}}(n[1]);if(!r||!i)return e.apply(t,n);t[Rs]={method:r,url:i,request_headers:{}},"POST"===r&&i.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const o=()=>{const e=t[Rs];if(e&&4===t.readyState){try{e.status_code=t.status}catch(e){}Dn("xhr",{endTimestamp:1e3*te(),startTimestamp:s,xhr:t})}};return"onreadystatechange"in t&&"function"==typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply:(e,t,n)=>(o(),e.apply(t,n))}):t.addEventListener("readystatechange",o),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,n){const[s,r]=n,i=t[Rs];return i&&m(s)&&m(r)&&(i.request_headers[s.toLowerCase()]=r),e.apply(t,n)}}),e.apply(t,n)}}),e.send=new Proxy(e.send,{apply(e,t,n){const s=t[Rs];return s?(void 0!==n[0]&&(s.body=n[0]),Dn("xhr",{startTimestamp:1e3*te(),xhr:t}),e.apply(t,n)):e.apply(t,n)}})}const As=100;function Ds(e,t){const n=Se(),s=ye();if(!n)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:i=As}=n.getOptions();if(i<=0)return;const o={timestamp:ee(),...e},a=r?c((()=>r(o,t))):o;null!==a&&(n.emit&&n.emit("beforeAddBreadcrumb",a,t),s.addBreadcrumb(a,i))}function Ls(e){const t="console";On(t,e),An(t,Ps)}function Ps(){"console"in r&&o.forEach((function(e){e in r.console&&A(r.console,e,(function(t){return a[e]=t,function(...t){Dn("console",{args:t,level:e});const n=a[e];n&&n.apply(r.console,t)}}))}))}function Fs(e,t){const n="fetch";On(n,e),An(n,(()=>$s(void 0,t)))}function $s(e,t=!1){t&&!Mn()||A(r,"fetch",(function(t){return function(...n){const{method:s,url:i}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:Us(t),method:Bs(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:Us(t),method:Bs(t,"method")?String(t.method).toUpperCase():"GET"}}(n),o={args:n,fetchData:{method:s,url:i},startTimestamp:1e3*te()};e||Dn("fetch",{...o});const a=(new Error).stack;return t.apply(r,n).then((async t=>(e?e(t):Dn("fetch",{...o,endTimestamp:1e3*te(),response:t}),t)),(e=>{throw Dn("fetch",{...o,endTimestamp:1e3*te(),error:e}),d(e)&&void 0===e.stack&&(e.stack=a,D(e,"framesToPop",1)),e}))}}))}function js(e){let t;try{t=e.clone()}catch(e){return}!async function(t){if(t&&t.body){const n=t.body,s=n.getReader(),r=setTimeout((()=>{n.cancel().then(null,(()=>{}))}),9e4);let i=!0;for(;i;){let t;try{t=setTimeout((()=>{n.cancel().then(null,(()=>{}))}),5e3);const{done:r}=await s.read();clearTimeout(t),r&&(Dn("fetch-body-resolved",{endTimestamp:1e3*te(),response:e}),i=!1)}catch(e){i=!1}finally{clearTimeout(t)}}clearTimeout(r),s.releaseLock(),n.cancel().then(null,(()=>{}))}}(t)}function Bs(e,t){return!!e&&"object"==typeof e&&!!e[t]}function Us(e){return"string"==typeof e?e:e?Bs(e,"url")?e.url:e.toString?e.toString():"":""}const Hs=["fatal","error","warning","log","info","debug"];function zs(e){return"warn"===e?"warning":Hs.includes(e)?e:"log"}function qs(e){return void 0===e?void 0:e>=400&&e<500?"warning":e>=500?"error":void 0}function Ws(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",s=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:s,relative:t[5]+n+s}}const Vs=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:"Breadcrumbs",setup(e){t.console&&Ls(function(e){return function(t){if(Se()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:zs(t.level),message:N(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${N(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}Ds(n,{input:t.args,level:t.level})}}(e)),t.dom&&Is(function(e,t){return function(n){if(Se()!==e)return;let s,r,i="object"==typeof t?t.serializeAttribute:void 0,o="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;o&&o>1024&&(rs&&l.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${o} was configured. Sentry will use 1024 instead.`),o=1024),"string"==typeof i&&(i=[i]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;s=x(t,{keyAttrs:i,maxStringLength:o}),r=C(t)}catch(e){s="<unknown>"}if(0===s.length)return;const a={category:`ui.${n.name}`,message:s};r&&(a.data={"ui.component_name":r}),Ds(a,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&Ns(function(e){return function(t){if(Se()!==e)return;const{startTimestamp:n,endTimestamp:s}=t,r=t.xhr[Rs];if(!n||!s||!r)return;const{method:i,url:o,status_code:a,body:c}=r,l={method:i,url:o,status_code:a},u={xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:s};Ds({category:"xhr",data:l,type:"http",level:qs(a)},u)}}(e)),t.fetch&&Fs(function(e){return function(t){if(Se()!==e)return;const{startTimestamp:n,endTimestamp:s}=t;if(s&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error)Ds({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:s});else{const e=t.response,r={...t.fetchData,status_code:e&&e.status},i={input:t.args,response:e,startTimestamp:n,endTimestamp:s};Ds({category:"fetch",data:r,type:"http",level:qs(r.status_code)},i)}}}(e)),t.history&&$n(function(e){return function(t){if(Se()!==e)return;let n=t.from,s=t.to;const r=Ws(ys.location.href);let i=n?Ws(n):void 0;const o=Ws(s);i&&i.path||(i=r),r.protocol===o.protocol&&r.host===o.host&&(s=o.relative),r.protocol===i.protocol&&r.host===i.host&&(n=i.relative),Ds({category:"navigation",data:{from:n,to:s}})}}(e)),t.sentry&&e.on("beforeSendEvent",function(e){return function(t){Se()===e&&Ds({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:q(t)},{event:t})}}(e))}}},Gs=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Xs=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:"BrowserApiErrors",setupOnce(){t.setTimeout&&A(ys,"setTimeout",Ys),t.setInterval&&A(ys,"setInterval",Ys),t.requestAnimationFrame&&A(ys,"requestAnimationFrame",Js),t.XMLHttpRequest&&"XMLHttpRequest"in ys&&A(XMLHttpRequest.prototype,"send",Ks);const e=t.eventTarget;e&&(Array.isArray(e)?e:Gs).forEach(Qs)}}};function Ys(e){return function(...t){const n=t[0];return t[0]=vs(n,{mechanism:{data:{function:Be(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Js(e){return function(t){return e.apply(this,[vs(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Be(e)},handled:!1,type:"instrument"}})])}}function Ks(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&A(n,e,(function(t){const n={mechanism:{data:{function:e,handler:Be(t)},handled:!1,type:"instrument"}},s=P(t);return s&&(n.mechanism.data.handler=Be(s)),vs(t,n)}))})),e.apply(this,t)}}function Qs(e){const t=ys,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(A(n,"addEventListener",(function(t){return function(n,s,r){try{"function"==typeof s.handleEvent&&(s.handleEvent=vs(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Be(s),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,vs(s,{mechanism:{data:{function:"addEventListener",handler:Be(s),target:e},handled:!1,type:"instrument"}}),r])}})),A(n,"removeEventListener",(function(e){return function(t,n,s){const r=n;try{const n=r&&r.__sentry_wrapped__;n&&e.call(this,t,n,s)}catch(e){}return e.call(this,t,r,s)}})))}let Zs=null;function er(e){const t="error";On(t,e),An(t,tr)}function tr(){Zs=r.onerror,r.onerror=function(e,t,n,s,r){return Dn("error",{column:s,error:r,line:n,msg:e,url:t}),!(!Zs||Zs.__SENTRY_LOADER__)&&Zs.apply(this,arguments)},r.onerror.__SENTRY_INSTRUMENTED__=!0}let nr=null;function sr(e){const t="unhandledrejection";On(t,e),An(t,rr)}function rr(){nr=r.onunhandledrejection,r.onunhandledrejection=function(e){return Dn("unhandledrejection",e),!(nr&&!nr.__SENTRY_LOADER__)||nr.apply(this,arguments)},r.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const ir=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(function(e){er((t=>{const{stackParser:n,attachStacktrace:s}=ar();if(Se()!==e||bs())return;const{msg:r,url:i,line:o,column:a,error:c}=t,l=function(e,t,n,s){const r=e.exception=e.exception||{},i=r.values=r.values||[],o=i[0]=i[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],l=isNaN(parseInt(s,10))?void 0:s,u=isNaN(parseInt(n,10))?void 0:n,d=m(t)&&t.length>0?t:I();return 0===c.length&&c.push({colno:l,filename:d,function:De,in_app:!0,lineno:u}),e}(fs(n,c||r,void 0,s,!1),i,o,a);l.level="error",tn(l,{originalException:c,mechanism:{handled:!1,type:"onerror"}})}))}(e),or("onerror")),t.onunhandledrejection&&(function(e){sr((t=>{const{stackParser:n,attachStacktrace:s}=ar();if(Se()!==e||bs())return;const r=function(e){if(y(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(e){}return e}(t),i=y(r)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(r)}`}]}}:fs(n,r,void 0,s,!0);i.level="error",tn(i,{originalException:r,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),or("onunhandledrejection"))}}};function or(e){rs&&l.log(`Global Handler attached: ${e}`)}function ar(){const e=Se();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const cr=()=>({name:"HttpContext",preprocessEvent(e){if(!ys.navigator&&!ys.location&&!ys.document)return;const t=e.request&&e.request.url||ys.location&&ys.location.href,{referrer:n}=ys.document||{},{userAgent:s}=ys.navigator||{},r={...e.request&&e.request.headers,...n&&{Referer:n},...s&&{"User-Agent":s}},i={...e.request,...t&&{url:t},headers:r};e.request=i}});function lr(e,t,n=250,s,r,i,o){if(!(i.exception&&i.exception.values&&o&&S(o.originalException,Error)))return;const a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;var c,l;a&&(i.exception.values=(c=ur(e,t,r,o.originalException,s,i.exception.values,a,0),l=n,c.map((e=>(e.value&&(e.value=M(e.value,l)),e)))))}function ur(e,t,n,s,r,i,o,a){if(i.length>=n+1)return i;let c=[...i];if(S(s[r],Error)){dr(o,a);const i=e(t,s[r]),l=c.length;hr(i,r,l,a),c=ur(e,t,n,s[r],r,[i,...c],i,l)}return Array.isArray(s.errors)&&s.errors.forEach(((s,i)=>{if(S(s,Error)){dr(o,a);const l=e(t,s),u=c.length;hr(l,`errors[${i}]`,u,a),c=ur(e,t,n,s,r,[l,...c],l,u)}})),c}function dr(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function hr(e,t,n,s){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:s}}const pr=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,s,r){const i=r.getOptions();lr(is,i.stackParser,i.maxValueLength,n,t,e,s)}}};function fr(e,t,n,s){const r={filename:e,function:"<anonymous>"===t?De:t,in_app:!0};return void 0!==n&&(r.lineno=n),void 0!==s&&(r.colno=s),r}const mr=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,gr=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,yr=/\((\S*)(?::(\d+))(?::(\d+))\)/,_r=[30,e=>{const t=mr.exec(e);if(t){const[,e,n,s]=t;return fr(e,De,+n,+s)}const n=gr.exec(e);if(n){if(n[2]&&0===n[2].indexOf("eval")){const e=yr.exec(n[2]);e&&(n[2]=e[1],n[3]=e[2],n[4]=e[3])}const[e,t]=Rr(n[1]||De,n[2]);return fr(t,e,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],br=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,vr=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Sr=[50,e=>{const t=br.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=vr.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||De;return[n,e]=Rr(n,e),fr(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],wr=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,kr=[40,e=>{const t=wr.exec(e);return t?fr(t[2],t[1]||De,+t[3],t[4]?+t[4]:void 0):void 0}],Er=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,xr=[10,e=>{const t=Er.exec(e);return t?fr(t[2],t[3]||De,+t[1]):void 0}],Tr=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,Ir=[20,e=>{const t=Tr.exec(e);return t?fr(t[5],t[3]||t[4]||De,+t[1],+t[2]):void 0}],Cr=[_r,Sr],Mr=Fe(...Cr),Rr=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),s=-1!==e.indexOf("safari-web-extension");return n||s?[-1!==e.indexOf("@")?e.split("@")[0]:De,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Nr="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Or={};function Ar(e){const t=Or[e];if(t)return t;let n=Pn[e];if(Cn(n))return Or[e]=n.bind(Pn);const s=Pn.document;if(s&&"function"==typeof s.createElement)try{const t=s.createElement("iframe");t.hidden=!0,s.head.appendChild(t);const r=t.contentWindow;r&&r[e]&&(n=r[e]),s.head.removeChild(t)}catch(t){Nr&&l.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,t)}return n?Or[e]=n.bind(Pn):n}function Dr(e){Or[e]=void 0}function Lr(...e){return Ar("setTimeout")(...e)}const Pr=6e4;function Fr(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const s=Date.parse(`${e}`);return isNaN(s)?Pr:s-t}function $r(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function jr(e,{statusCode:t,headers:n},s=Date.now()){const r={...e},i=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(i)for(const e of i.trim().split(",")){const[t,n,,,i]=e.split(":",5),o=parseInt(t,10),a=1e3*(isNaN(o)?60:o);if(n)for(const e of n.split(";"))"metric_bucket"===e&&i&&!i.split(";").includes("custom")||(r[e]=s+a);else r.all=s+a}else o?r.all=s+Fr(o,s):429===t&&(r.all=s+6e4);return r}const Br=64;function Ur(e,t,n=function(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(s){if(!(void 0===e||t.length<e))return Ze(new Qn("Not adding Promise because buffer limit was reached."));const r=s();return-1===t.indexOf(r)&&t.push(r),r.then((()=>n(r))).then(null,(()=>n(r).then(null,(()=>{})))),r},drain:function(e){return new et(((n,s)=>{let r=t.length;if(!r)return n(!0);const i=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{Qe(e).then((()=>{--r||(clearTimeout(i),n(!0))}),s)}))}))}}}(e.bufferSize||Br)){let s={};return{send:function(r){const i=[];if(Hn(r,((t,n)=>{const r=Yn(n);if($r(s,r)){const s=Hr(t,n);e.recordDroppedEvent("ratelimit_backoff",r,s)}else i.push(t)})),0===i.length)return Qe({});const o=Bn(r[0],i),a=t=>{Hn(o,((n,s)=>{const r=Hr(n,s);e.recordDroppedEvent(t,Yn(s),r)}))};return n.add((()=>t({body:Wn(o)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&Y&&l.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),s=jr(s,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof Qn)return Y&&l.error("Skipped sending event because buffer is full."),a("queue_overflow"),Qe({});throw e}))},flush:e=>n.drain(e)}}function Hr(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}function zr(e,t=Ar("fetch")){let n=0,s=0;return Ur(e,(function(r){const i=r.body.length;n+=i,s++;const o={body:r.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&s<15,...e.fetchOptions};if(!t)return Dr("fetch"),Ze("No fetch implementation available");try{return t(e.url,o).then((e=>(n-=i,s--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return Dr("fetch"),n-=i,s--,Ze(e)}}))}function qr(e){return[Ce(),Oe(),Xs(),Vs(),ir(),pr(),He(),cr()]}function Wr(e={}){const t=function(e={}){const t={defaultIntegrations:qr(),release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:ys.SENTRY_RELEASE&&ys.SENTRY_RELEASE.id?ys.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0};return null==e.defaultIntegrations&&delete e.defaultIntegrations,{...t,...e}}(e);if(function(){const e=void 0!==ys.window&&ys;if(!e)return!1;const t=e[e.chrome?"chrome":"browser"],n=t&&t.runtime&&t.runtime.id,s=ys.location&&ys.location.href||"",r=!!n&&ys===ys.top&&["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"].some((e=>s.startsWith(`${e}//`))),i=void 0!==e.nw;return!!n&&!r&&!i}())return void c((()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}));rs&&(In()||l.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const n={...t,stackParser:(s=t.stackParser||Mr,Array.isArray(s)?Fe(...s):s),integrations:ke(t),transport:t.transport||zr};var s;const r=function(e,t){!0===t.debug&&(Y?l.enable():c((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),ge().update(t.initialScope);const n=new e(t);return Ve(n),n.init(),n}(ws,n);return t.autoSessionTracking&&(void 0!==ys.document?(fn({ignoreDuration:!0}),yn(),$n((({from:e,to:t})=>{void 0!==e&&e!==t&&(fn({ignoreDuration:!0}),yn())}))):rs&&l.warn("Session tracking in non-browser environment with @sentry/browser is not supported.")),r}function Vr(e={}){if(!ys.document)return void(rs&&l.error("Global document not defined in showReportDialog call"));const t=ge(),n=t.getClient(),s=n&&n.getDsn();if(!s)return void(rs&&l.error("DSN not configured for showReportDialog call"));if(t&&(e.user={...t.getUser(),...e.user}),!e.eventId){const t=ln();t&&(e.eventId=t)}const r=ys.document.createElement("script");r.async=!0,r.crossOrigin="anonymous",r.src=function(e,t){const n=wn(e);if(!n)return"";const s=`${En(n)}embed/error-page/`;let r=`dsn=${bn(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(r+=`&name=${encodeURIComponent(e.name)}`),e.email&&(r+=`&email=${encodeURIComponent(e.email)}`)}else r+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${s}?${r}`}(s,e),e.onLoad&&(r.onload=e.onLoad);const{onClose:i}=e;if(i){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{i()}finally{ys.removeEventListener("message",e)}};ys.addEventListener("message",e)}const o=ys.document.head||ys.document.body;o?o.appendChild(r):rs&&l.error("Not injecting report dialog. No injection point found in HTML")}function Gr(){}function Xr(e){e()}function Yr(e){const t=Se();t&&t.captureUserFeedback(e)}function Jr(e,t,n=()=>{}){let s;try{s=e()}catch(e){throw t(e),n(),e}return function(e,t,n){return v(e)?e.then((e=>(n(),e)),(e=>{throw t(e),n(),e})):(n(),e)}(s,t,n)}class Kr{constructor(e={}){this._traceId=e.traceId||H(),this._spanId=e.spanId||H().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:0}}end(e){}setAttribute(e,t){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,t,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,t){}}function Qr(e,t,n,s=Ht()){const r=s&&Ut(s);r&&r.addEvent(e,{[mt]:t,[ft]:n})}function Zr(e){if(!e||0===e.length)return;const t={};return e.forEach((e=>{const n=e.attributes||{},s=n[ft],r=n[mt];"string"==typeof s&&"number"==typeof r&&(t[e.name]={value:r,unit:s})})),t}const ei="_sentryScope",ti="_sentryIsolationScope";function ni(e){return{scope:e[ei],isolationScope:e[ti]}}class si{constructor(e={}){this._traceId=e.traceId||H(),this._spanId=e.spanId||H().substring(16),this._startTime=e.startTimestamp||te(),this._attributes={},this.setAttributes({[ht]:"manual",[dt]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this}addLinks(e){return this}recordException(e,t){}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?Ct:0}}setAttribute(e,t){return void 0===t?delete this._attributes[e]:this._attributes[e]=t,this}setAttributes(e){return Object.keys(e).forEach((t=>this.setAttribute(t,e[t]))),this}updateStartTime(e){this._startTime=Ot(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this}end(e){this._endTime||(this._endTime=Ot(e),function(e){if(!Y)return;const{description:t="< unknown name >",op:n="< unknown op >"}=Dt(e),{spanId:s}=e.spanContext(),r=`[Tracing] Finishing "${n}" ${Ut(e)===e?"root ":""}span "${t}" with ID ${s}`;l.log(r)}(this),this._onSpanEnded())}getSpanJSON(){return B({data:this._attributes,description:this._name,op:this._attributes[dt],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Pt(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[ht],_metrics_summary:wt(this),profile_id:this._attributes["sentry.profile_id"],exclusive_time:this._attributes[gt],measurements:Zr(this._events),is_segment:this._isStandaloneSpan&&Ut(this)===this||void 0,segment_id:this._isStandaloneSpan?Ut(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,t,n){Y&&l.log("[Tracing] Adding an event to span:",e);const s=ri(t)?t:n||te(),r=ri(t)?{}:t||{},i={name:e,time:Ot(s),attributes:r};return this._events.push(i),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=Se();if(e&&e.emit("spanEnd",this),!this._isStandaloneSpan&&this!==Ut(this))return;if(this._isStandaloneSpan)return void(this._sampled?function(e){const t=Se();if(!t)return;const n=e[1];n&&0!==n.length?t.sendEnvelope(e):t.recordDroppedEvent("before_send","span")}(function(e,t){const n=Vt(e[0]),s=t&&t.getDsn(),r=t&&t.getOptions().tunnel,i={sent_at:(new Date).toISOString(),...function(e){return!!e.trace_id&&!!e.public_key}(n)&&{trace:n},...!!r&&s&&{dsn:bn(s)}},o=t&&t.getOptions().beforeSendSpan,a=o?e=>o(Dt(e)):e=>Dt(e),c=[];for(const t of e){const e=a(t);e&&c.push(Vn(e))}return Bn(i,c)}([this],e)):(Y&&l.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span")));const t=this._convertSpanToTransaction();t&&(ni(this).scope||ge()).captureEvent(t)}_convertSpanToTransaction(){if(!ii(Dt(this)))return;this._name||(Y&&l.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:t}=ni(this),n=(e||ge()).getClient()||Se();if(!0!==this._sampled)return Y&&l.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(n&&n.recordDroppedEvent("sample_rate","transaction"));const s=Bt(this).filter((e=>e!==this&&!function(e){return e instanceof si&&e.isStandaloneSpan()}(e))).map((e=>Dt(e))).filter(ii),r=this._attributes[lt],i={contexts:{trace:Mt(this)},spans:s.length>1e3?s.sort(((e,t)=>e.start_timestamp-t.start_timestamp)).slice(0,1e3):s,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:t,...B({dynamicSamplingContext:Vt(this)})},_metrics_summary:wt(this),...r&&{transaction_info:{source:r}}},o=Zr(this._events);return o&&Object.keys(o).length&&(Y&&l.log("[Measurements] Adding measurements to transaction event",JSON.stringify(o,void 0,2)),i.measurements=o),i}}function ri(e){return e&&"number"==typeof e||e instanceof Date||Array.isArray(e)}function ii(e){return!!(e.start_timestamp&&e.timestamp&&e.span_id&&e.trace_id)}const oi="__SENTRY_SUPPRESS_TRACING__";function ai(e,t){const n=gi();if(n.startSpan)return n.startSpan(e,t);const s=mi(e),{forceTransaction:r,parentSpan:i}=e;return be(e.scope,(()=>bi(i)((()=>{const n=ge(),i=_i(n),o=e.onlyIfParent&&!i?new Kr:fi({parentSpan:i,spanArguments:s,forceTransaction:r,scope:n});return oe(n,o),Jr((()=>t(o)),(()=>{const{status:e}=Dt(o);!o.isRecording()||e&&"ok"!==e||o.setStatus({code:xt,message:"internal_error"})}),(()=>o.end()))}))))}function ci(e,t){const n=gi();if(n.startSpanManual)return n.startSpanManual(e,t);const s=mi(e),{forceTransaction:r,parentSpan:i}=e;return be(e.scope,(()=>bi(i)((()=>{const n=ge(),i=_i(n),o=e.onlyIfParent&&!i?new Kr:fi({parentSpan:i,spanArguments:s,forceTransaction:r,scope:n});function a(){o.end()}return oe(n,o),Jr((()=>t(o,a)),(()=>{const{status:e}=Dt(o);!o.isRecording()||e&&"ok"!==e||o.setStatus({code:xt,message:"internal_error"})}))}))))}function li(e){const t=gi();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=mi(e),{forceTransaction:s,parentSpan:r}=e;return(e.scope?t=>be(e.scope,t):void 0!==r?e=>di(r,e):e=>e())((()=>{const t=ge(),r=_i(t);return e.onlyIfParent&&!r?new Kr:fi({parentSpan:r,spanArguments:n,forceTransaction:s,scope:t})}))}const ui=({sentryTrace:e,baggage:t},n)=>be((s=>{const r=bt(e,t);return s.setPropagationContext(r),n()}));function di(e,t){const n=gi();return n.withActiveSpan?n.withActiveSpan(e,t):be((n=>(oe(n,e||void 0),t(n))))}function hi(e){const t=gi();return t.suppressTracing?t.suppressTracing(e):be((t=>(t.setSDKProcessingMetadata({[oi]:!0}),e())))}function pi(e){return be((t=>(t.setPropagationContext(Q()),Y&&l.info(`Starting a new trace with id ${t.getPropagationContext().traceId}`),di(null,e))))}function fi({parentSpan:e,spanArguments:t,forceTransaction:n,scope:s}){if(!yt())return new Kr;const r=ye();let i;if(e&&!n)i=function(e,t,n){const{spanId:s,traceId:r}=e.spanContext(),i=!t.getScopeData().sdkProcessingMetadata[oi]&&Lt(e),o=i?new si({...n,parentSpanId:s,traceId:r,sampled:i}):new Kr({traceId:r});jt(e,o);const a=Se();return a&&(a.emit("spanStart",o),n.endTimestamp&&a.emit("spanEnd",o)),o}(e,s,t),jt(e,i);else if(e){const n=Vt(e),{traceId:r,spanId:o}=e.spanContext(),a=Lt(e);i=yi({traceId:r,parentSpanId:o,...t},s,a),qt(i,n)}else{const{traceId:e,dsc:n,parentSpanId:o,sampled:a}={...r.getPropagationContext(),...s.getPropagationContext()};i=yi({traceId:e,parentSpanId:o,...t},s,a),n&&qt(i,n)}return function(e){if(!Y)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:s}=Dt(e),{spanId:r}=e.spanContext(),i=Lt(e),o=Ut(e),a=o===e,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${r}`];if(s&&u.push(`parent ID: ${s}`),!a){const{op:e,description:t}=Dt(o);u.push(`root ID: ${o.spanContext().spanId}`),e&&u.push(`root op: ${e}`),t&&u.push(`root description: ${t}`)}l.log(`${c}\n  ${u.join("\n  ")}`)}(i),function(e,t,n){e&&(D(e,ti,n),D(e,ei,t))}(i,s,r),i}function mi(e){const t={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const n={...t};return n.startTimestamp=Ot(e.startTime),delete n.startTime,n}return t}function gi(){return me(J())}function yi(e,t,n){const s=Se(),r=s&&s.getOptions()||{},{name:i="",attributes:o}=e,[a,c]=t.getScopeData().sdkProcessingMetadata[oi]?[!1]:function(e,t){if(!yt(e))return[!1];let n;n="function"==typeof e.tracesSampler?e.tracesSampler(t):void 0!==t.parentSampled?t.parentSampled:void 0!==e.tracesSampleRate?e.tracesSampleRate:1;const s=Zn(n);return void 0===s?(Y&&l.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):s?Math.random()<s?[!0,s]:(Y&&l.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(n)})`),[!1,s]):(Y&&l.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,s])}(r,{name:i,parentSampled:n,attributes:o,transactionContext:{name:i,parentSampled:n}}),u=new si({...e,attributes:{[lt]:"custom",...e.attributes},sampled:a});return void 0!==c&&u.setAttribute(ut,c),s&&s.emit("spanStart",u),u}function _i(e){const t=ae(e);if(!t)return;const n=Se();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?Ut(t):t}function bi(e){return void 0!==e?t=>di(e,t):e=>e()}function vi(e){let t,n=e[0],s=1;for(;s<e.length;){const r=e[s],i=e[s+1];if(s+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(t=n,n=i(n)):"call"!==r&&"optionalCall"!==r||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}const Si=(e,t,n,s)=>{let r,i;return o=>{t.value>=0&&(o||s)&&(i=t.value-(r||0),(i||void 0===r)&&(r=t.value,t.delta=i,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,n),e(t)))}},wi=()=>Pn.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],ki=()=>{const e=wi();return e&&e.activationStart||0},Ei=(e,t)=>{const n=wi();let s="navigate";return n&&(Pn.document&&Pn.document.prerendering||ki()>0?s="prerender":Pn.document&&Pn.document.wasDiscarded?s="restore":n.type&&(s=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:s}},xi=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const s=new PerformanceObserver((e=>{Promise.resolve().then((()=>{t(e.getEntries())}))}));return s.observe(Object.assign({type:e,buffered:!0},n||{})),s}}catch(e){}},Ti=e=>{const t=t=>{("pagehide"===t.type||Pn.document&&"hidden"===Pn.document.visibilityState)&&e(t)};Pn.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))},Ii=e=>{let t=!1;return n=>{t||(e(n),t=!0)}};let Ci=-1;const Mi=e=>{"hidden"===Pn.document.visibilityState&&Ci>-1&&(Ci="visibilitychange"===e.type?e.timeStamp:0,removeEventListener("visibilitychange",Mi,!0),removeEventListener("prerenderingchange",Mi,!0))},Ri=()=>(Pn.document&&Ci<0&&(Ci="hidden"!==Pn.document.visibilityState||Pn.document.prerendering?1/0:0,addEventListener("visibilitychange",Mi,!0),addEventListener("prerenderingchange",Mi,!0)),{get firstHiddenTime(){return Ci}}),Ni=e=>{Pn.document&&Pn.document.prerendering?addEventListener("prerenderingchange",(()=>e()),!0):e()},Oi=[1800,3e3],Ai=[.1,.25],Di=(e,t={})=>{((e,t={})=>{Ni((()=>{const n=Ri(),s=Ei("FCP");let r;const i=xi("paint",(e=>{e.forEach((e=>{"first-contentful-paint"===e.name&&(i.disconnect(),e.startTime<n.firstHiddenTime&&(s.value=Math.max(e.startTime-ki(),0),s.entries.push(e),r(!0)))}))}));i&&(r=Si(e,s,Oi,t.reportAllChanges))}))})(Ii((()=>{const n=Ei("CLS",0);let s,r=0,i=[];const o=e=>{e.forEach((e=>{if(!e.hadRecentInput){const t=i[0],n=i[i.length-1];r&&t&&n&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(r+=e.value,i.push(e)):(r=e.value,i=[e])}})),r>n.value&&(n.value=r,n.entries=i,s())},a=xi("layout-shift",o);a&&(s=Si(e,n,Ai,t.reportAllChanges),Ti((()=>{o(a.takeRecords()),s(!0)})),setTimeout(s,0))})))},Li=[100,300],Pi=(e,t={})=>{Ni((()=>{const n=Ri(),s=Ei("FID");let r;const i=e=>{e.startTime<n.firstHiddenTime&&(s.value=e.processingStart-e.startTime,s.entries.push(e),r(!0))},o=e=>{e.forEach(i)},a=xi("first-input",o);r=Si(e,s,Li,t.reportAllChanges),a&&Ti(Ii((()=>{o(a.takeRecords()),a.disconnect()})))}))};let Fi=0,$i=1/0,ji=0;const Bi=e=>{e.forEach((e=>{e.interactionId&&($i=Math.min($i,e.interactionId),ji=Math.max(ji,e.interactionId),Fi=ji?(ji-$i)/7+1:0)}))};let Ui;const Hi=()=>{"interactionCount"in performance||Ui||(Ui=xi("event",Bi,{type:"event",buffered:!0,durationThreshold:0}))},zi=[200,500],qi=()=>(Ui?Fi:performance.interactionCount||0)-0,Wi=[],Vi={},Gi=e=>{const t=Wi[Wi.length-1],n=Vi[e.interactionId];if(n||Wi.length<10||t&&e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};Vi[t.id]=t,Wi.push(t)}Wi.sort(((e,t)=>t.latency-e.latency)),Wi.splice(10).forEach((e=>{delete Vi[e.id]}))}},Xi=(e,t={})=>{Ni((()=>{Hi();const n=Ei("INP");let s;const r=e=>{e.forEach((e=>{e.interactionId&&Gi(e),"first-input"===e.entryType&&!Wi.some((t=>t.entries.some((t=>e.duration===t.duration&&e.startTime===t.startTime))))&&Gi(e)}));const t=(()=>{const e=Math.min(Wi.length-1,Math.floor(qi()/50));return Wi[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,s())},i=xi("event",r,{durationThreshold:null!=t.durationThreshold?t.durationThreshold:40});s=Si(e,n,zi,t.reportAllChanges),i&&("PerformanceEventTiming"in Pn&&"interactionId"in PerformanceEventTiming.prototype&&i.observe({type:"first-input",buffered:!0}),Ti((()=>{r(i.takeRecords()),n.value<0&&qi()>0&&(n.value=0,n.entries=[]),s(!0)})))}))},Yi=[2500,4e3],Ji={},Ki=(e,t={})=>{Ni((()=>{const n=Ri(),s=Ei("LCP");let r;const i=e=>{const t=e[e.length-1];t&&t.startTime<n.firstHiddenTime&&(s.value=Math.max(t.startTime-ki(),0),s.entries=[t],r())},o=xi("largest-contentful-paint",i);if(o){r=Si(e,s,Yi,t.reportAllChanges);const n=Ii((()=>{Ji[s.id]||(i(o.takeRecords()),o.disconnect(),Ji[s.id]=!0,r(!0))}));["keydown","click"].forEach((e=>{Pn.document&&addEventListener(e,(()=>setTimeout(n,0)),!0)})),Ti(n)}}))},Qi=[800,1800],Zi=e=>{Pn.document&&Pn.document.prerendering?Ni((()=>Zi(e))):Pn.document&&"complete"!==Pn.document.readyState?addEventListener("load",(()=>Zi(e)),!0):setTimeout(e,0)},eo=(e,t={})=>{const n=Ei("TTFB"),s=Si(e,n,Qi,t.reportAllChanges);Zi((()=>{const e=wi();if(e){const t=e.responseStart;if(t<=0||t>performance.now())return;n.value=Math.max(t-ki(),0),n.entries=[e],s(!0)}}))},to={},no={};let so,ro,io,oo,ao;function co(e,t=!1){return vo("cls",e,mo,so,t)}function lo(e,t=!1){return vo("lcp",e,yo,io,t)}function uo(e){return vo("fid",e,go,ro)}function ho(e){return vo("inp",e,bo,ao)}function po(e,t){return So(e,t),no[e]||(function(e){const t={};"event"===e&&(t.durationThreshold=0),xi(e,(t=>{fo(e,{entries:t})}),t)}(e),no[e]=!0),wo(e,t)}function fo(e,t){const n=to[e];if(n&&n.length)for(const s of n)try{s(t)}catch(t){Nr&&l.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Be(s)}\nError:`,t)}}function mo(){return Di((e=>{fo("cls",{metric:e}),so=e}),{reportAllChanges:!0})}function go(){return Pi((e=>{fo("fid",{metric:e}),ro=e}))}function yo(){return Ki((e=>{fo("lcp",{metric:e}),io=e}),{reportAllChanges:!0})}function _o(){return eo((e=>{fo("ttfb",{metric:e}),oo=e}))}function bo(){return Xi((e=>{fo("inp",{metric:e}),ao=e}))}function vo(e,t,n,s,r=!1){let i;return So(e,t),no[e]||(i=n(),no[e]=!0),s&&t({metric:s}),wo(e,t,r?i:void 0)}function So(e,t){to[e]=to[e]||[],to[e].push(t)}function wo(e,t,n){return()=>{n&&n();const s=to[e];if(!s)return;const r=s.indexOf(t);-1!==r&&s.splice(r,1)}}function ko(e){return"number"==typeof e&&isFinite(e)}function Eo(e,t,n,{...s}){const r=Dt(e).start_timestamp;return r&&r>t&&"function"==typeof e.updateStartTime&&e.updateStartTime(t),di(e,(()=>{const e=li({startTime:t,...s});return e&&e.end(n),e}))}function xo(e){const t=Se();if(!t)return;const{name:n,transaction:s,attributes:r,startTime:i}=e,{release:o,environment:a}=t.getOptions(),c=t.getIntegrationByName("Replay"),l=c&&c.getReplayId(),u=ge(),d=u.getUser(),h=void 0!==d?d.email||d.id||d.ip_address:void 0;let p;try{p=u.getScopeData().contexts.profile.profile_id}catch(e){}return li({name:n,attributes:{release:o,environment:a,user:h||void 0,profile_id:p||void 0,replay_id:l||void 0,transaction:s,"user_agent.original":Pn.navigator&&Pn.navigator.userAgent,...r},startTime:i,experimental:{standalone:!0}})}function To(){return Pn&&Pn.addEventListener&&Pn.performance}function Io(e){return e/1e3}const Co=2147483647;let Mo,Ro,No=0,Oo={};function Ao({recordClsStandaloneSpans:e}){const t=To();if(t&&se){t.mark&&Pn.performance.mark("sentry-tracing-init");const n=uo((({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=Io(se),s=Io(t.startTime);Nr&&l.log("[Measurements] Adding FID"),Oo.fid={value:e.value,unit:"millisecond"},Oo["mark.fid"]={value:n+s,unit:"second"}})),s=lo((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Nr&&l.log("[Measurements] Adding LCP"),Oo.lcp={value:e.value,unit:"millisecond"},Mo=t)}),!0),r=vo("ttfb",(({metric:e})=>{e.entries[e.entries.length-1]&&(Nr&&l.log("[Measurements] Adding TTFB"),Oo.ttfb={value:e.value,unit:"millisecond"})}),_o,oo),i=e?function(){let e,t,n=0;if(!function(){try{return vi([PerformanceObserver,"access",e=>e.supportedEntryTypes,"optionalAccess",e=>e.includes,"call",e=>e("layout-shift")])}catch(e){return!1}}())return;let s=!1;function r(){s||(s=!0,t&&function(e,t,n){Nr&&l.log(`Sending CLS span (${e})`);const s=Io((se||0)+(vi([t,"optionalAccess",e=>e.startTime])||0)),r=ge().getScopeData().transactionName,i=xo({name:t?x(vi([t,"access",e=>e.sources,"access",e=>e[0],"optionalAccess",e=>e.node])):"Layout shift",transaction:r,attributes:B({[ht]:"auto.http.browser.cls",[dt]:"ui.webvital.cls",[gt]:vi([t,"optionalAccess",e=>e.duration])||0,"sentry.pageload.span_id":n}),startTime:s});vi([i,"optionalAccess",e=>e.addEvent,"call",t=>t("cls",{[ft]:"",[mt]:e})]),vi([i,"optionalAccess",e=>e.end,"call",e=>e(s)])}(n,e,t),i())}const i=co((({metric:t})=>{const s=t.entries[t.entries.length-1];s&&(n=t.value,e=s)}),!0);Ti((()=>{r()})),setTimeout((()=>{const e=vi([Se(),"optionalAccess",e=>e.on,"call",t=>t("startNavigationSpan",(()=>{r(),e&&e()}))]),n=Ht(),s=n&&Ut(n),i=s&&Dt(s);i&&"pageload"===i.op&&(t=s.spanContext().spanId)}),0)}():co((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Nr&&l.log(`[Measurements] Adding CLS ${e.value}`),Oo.cls={value:e.value,unit:""},Ro=t)}),!0);return()=>{n(),s(),r(),i&&i()}}return()=>{}}function Do(e,t,n,s,r,i){const o=i?t[i]:t[`${n}End`],a=t[`${n}Start`];a&&o&&Eo(e,s+Io(a),s+Io(o),{op:`browser.${r||n}`,name:t.name,attributes:{[ht]:"auto.ui.browser.metrics"}})}function Lo(e,t,n,s){const r=t[n];null!=r&&r<Co&&(e[s]=r)}const Po=[],Fo=new Map;const $o={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"},jo={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3};function Bo(e,t={}){const n=new Map;let s,r=!1,i="externalFinish",o=!t.disableAutoFinish;const a=[],{idleTimeout:c=jo.idleTimeout,finalTimeout:u=jo.finalTimeout,childSpanTimeout:d=jo.childSpanTimeout,beforeSpanEnd:h}=t,p=Se();if(!p||!yt())return new Kr;const f=ge(),m=Ht(),g=function(e){const t=li(e);return oe(ge(),t),Y&&l.log("[Tracing] Started span is an idle span"),t}(e);function y(){s&&(clearTimeout(s),s=void 0)}function _(e){y(),s=setTimeout((()=>{!r&&0===n.size&&o&&(i="idleTimeout",g.end(e))}),c)}function b(e){s=setTimeout((()=>{!r&&o&&(i="heartbeatFailed",g.end(e))}),d)}function v(e){r=!0,n.clear(),a.forEach((e=>e())),oe(f,m);const t=Dt(g),{start_timestamp:s}=t;if(!s)return;(t.data||{})[pt]||g.setAttribute(pt,i),l.log(`[Tracing] Idle span "${t.op}" finished`);const o=Bt(g).filter((e=>e!==g));let d=0;o.forEach((t=>{t.isRecording()&&(t.setStatus({code:xt,message:"cancelled"}),t.end(e),Y&&l.log("[Tracing] Cancelling span since span ended early",JSON.stringify(t,void 0,2)));const n=Dt(t),{timestamp:s=0,start_timestamp:r=0}=n,i=r<=e,o=s-r<=(u+c)/1e3;if(Y){const e=JSON.stringify(t,void 0,2);i?o||l.log("[Tracing] Discarding span since it finished after idle span final timeout",e):l.log("[Tracing] Discarding span since it happened after idle span was finished",e)}o&&i||(function(e,t){e[Ft]&&e[Ft].delete(t)}(g,t),d++)})),d>0&&g.setAttribute("sentry.idle_span_discarded_spans",d)}return g.end=new Proxy(g.end,{apply(e,t,n){h&&h(g);const[s,...r]=n,i=Ot(s||te()),o=Bt(g).filter((e=>e!==g));if(!o.length)return v(i),Reflect.apply(e,t,[i,...r]);const a=o.map((e=>Dt(e).timestamp)).filter((e=>!!e)),c=a.length?Math.max(...a):void 0,l=Dt(g).start_timestamp,d=Math.min(l?l+u/1e3:1/0,Math.max(l||-1/0,Math.min(i,c||1/0)));return v(d),Reflect.apply(e,t,[d,...r])}}),a.push(p.on("spanStart",(e=>{var t;r||e===g||Dt(e).timestamp||Bt(g).includes(e)&&(t=e.spanContext().spanId,y(),n.set(t,!0),b(te()+d/1e3))}))),a.push(p.on("spanEnd",(e=>{var t;r||(t=e.spanContext().spanId,n.has(t)&&n.delete(t),0===n.size&&_(te()+c/1e3))}))),a.push(p.on("idleSpanEnableAutoFinish",(e=>{e===g&&(o=!0,_(),n.size&&b())}))),t.disableAutoFinish||_(),setTimeout((()=>{r||(g.setStatus({code:xt,message:"deadline_exceeded"}),i="finalTimeout",g.end())}),u),g}let Uo=!1;function Ho(){Uo||(Uo=!0,er(zo),sr(zo))}function zo(){const e=Ht(),t=e&&Ut(e);if(t){const e="internal_error";Y&&l.log(`[Tracing] Root span: ${e} -> Global error occured`),t.setStatus({code:xt,message:e})}}function qo(e){return e.split(",").filter((e=>!e.split("=")[0].startsWith(st))).join(",")}zo.tag="sentry_tracingErrorCallback";const Wo=new WeakMap,Vo=new Map,Go={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Xo(e,t){const{traceFetch:n,traceXHR:s,trackFetchStreamPerformance:r,shouldCreateSpanForRequest:i,enableHTTPTimings:o,tracePropagationTargets:a}={traceFetch:Go.traceFetch,traceXHR:Go.traceXHR,trackFetchStreamPerformance:Go.trackFetchStreamPerformance,...t},c="function"==typeof i?i:e=>!0,l=e=>function(e,t){const n=ys.location&&ys.location.href;if(n){let s,r;try{s=new URL(e,n),r=new URL(n).origin}catch(e){return!1}const i=s.origin===r;return t?O(s.toString(),t)||i&&O(s.pathname,t):i}{const n=!!e.match(/^\/(?!\/)/);return t?O(e,t):n}}(e,a),u={};n&&(e.addEventProcessor((e=>("transaction"===e.type&&e.spans&&e.spans.forEach((e=>{if("http.client"===e.op){const t=Vo.get(e.span_id);t&&(e.timestamp=t/1e3,Vo.delete(e.span_id))}})),e))),r&&function(){const e="fetch-body-resolved";On(e,(e=>{if(e.response){const t=Wo.get(e.response);t&&e.endTimestamp&&Vo.set(t,e.endTimestamp)}})),An(e,(()=>$s(js)))}(),Fs((e=>{const t=function(e,t,n,s,r="auto.http.browser"){if(!e.fetchData)return;const i=yt()&&t(e.fetchData.url);if(e.endTimestamp&&i){const t=e.fetchData.__span;if(!t)return;const n=s[t];return void(n&&(function(e,t){if(t.response){It(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus({code:xt,message:"internal_error"});e.end()}(n,e),delete s[t]))}const o=ge(),a=Se(),{method:c,url:l}=e.fetchData,u=function(e){try{return new URL(e).href}catch(e){return}}(l),d=u?Ws(u).host:void 0,h=!!Ht(),p=i&&h?li({name:`${c} ${l}`,attributes:{url:l,type:"fetch","http.method":c,"http.url":u,"server.address":d,[ht]:r,[dt]:"http.client"}}):new Kr;if(e.fetchData.__span=p.spanContext().spanId,s[p.spanContext().spanId]=p,n(e.fetchData.url)&&a){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=function(e,t,n,s,r){const i=ye(),{traceId:o,spanId:a,sampled:c,dsc:l}={...i.getPropagationContext(),...n.getPropagationContext()},u=r?Nt(r):vt(o,a,c),d=at(l||(r?Vt(r):Wt(o,t))),h=s.headers||("undefined"!=typeof Request&&S(e,Request)?e.headers:void 0);if(h){if("undefined"!=typeof Headers&&S(h,Headers)){const e=new Headers(h);if(e.set("sentry-trace",u),d){const t=e.get(nt);if(t){const n=qo(t);e.set(nt,n?`${n},${d}`:d)}else e.set(nt,d)}return e}if(Array.isArray(h)){const e=[...h.filter((e=>!(Array.isArray(e)&&"sentry-trace"===e[0]))).map((e=>{if(Array.isArray(e)&&e[0]===nt&&"string"==typeof e[1]){const[t,n,...s]=e;return[t,qo(n),...s]}return e})),["sentry-trace",u]];return d&&e.push([nt,d]),e}{const e="baggage"in h?h.baggage:void 0;let t=[];return Array.isArray(e)?t=e.map((e=>"string"==typeof e?qo(e):e)).filter((e=>""===e)):e&&t.push(qo(e)),d&&t.push(d),{...h,"sentry-trace":u,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":u,baggage:d}}(t,a,o,n,yt()&&h?p:void 0)}return p}(e,c,l,u);if(e.response&&e.fetchData.__span&&Wo.set(e.response,e.fetchData.__span),t){const n=Ko(e.fetchData.url),s=n?Ws(n).host:void 0;t.setAttributes({"http.url":n,"server.address":s})}o&&t&&Yo(t)}))),s&&Ns((e=>{const t=function(e,t,n,s){const r=e.xhr,i=r&&r[Rs];if(!r||r.__sentry_own_request__||!i)return;const o=yt()&&t(i.url);if(e.endTimestamp&&o){const e=r.__sentry_xhr_span_id__;if(!e)return;const t=s[e];return void(t&&void 0!==i.status_code&&(It(t,i.status_code),t.end(),delete s[e]))}const a=Ko(i.url),c=a?Ws(a).host:void 0,l=!!Ht(),u=o&&l?li({name:`${i.method} ${i.url}`,attributes:{type:"xhr","http.method":i.method,"http.url":a,url:i.url,"server.address":c,[ht]:"auto.http.browser",[dt]:"http.client"}}):new Kr;r.__sentry_xhr_span_id__=u.spanContext().spanId,s[r.__sentry_xhr_span_id__]=u;const d=Se();return r.setRequestHeader&&n(i.url)&&d&&function(e,t,n){const s=ge(),r=ye(),{traceId:i,spanId:o,sampled:a,dsc:c}={...r.getPropagationContext(),...s.getPropagationContext()};!function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(nt,n)}catch(e){}}(e,n&&yt()?Nt(n):vt(i,o,a),at(c||(n?Vt(n):Wt(i,t))))}(r,d,yt()&&l?u:void 0),u}(e,c,l,u);o&&t&&Yo(t)}))}function Yo(e){const{url:t}=Dt(e).data||{};if(!t||"string"!=typeof t)return;const n=po("resource",(({entries:s})=>{s.forEach((s=>{(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)})(s)&&s.name.endsWith(t)&&(function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",s="";for(const r of e){if("/"===r){[t,n]=e.split("/");break}if(!isNaN(Number(r))){t="h"===s?"http":s,n=e.split(s)[1];break}s+=r}return s===e&&(t=s),{name:t,version:n}}(e.nextHopProtocol),s=[];return s.push(["network.protocol.version",n],["network.protocol.name",t]),se?[...s,["http.request.redirect_start",Jo(e.redirectStart)],["http.request.fetch_start",Jo(e.fetchStart)],["http.request.domain_lookup_start",Jo(e.domainLookupStart)],["http.request.domain_lookup_end",Jo(e.domainLookupEnd)],["http.request.connect_start",Jo(e.connectStart)],["http.request.secure_connection_start",Jo(e.secureConnectionStart)],["http.request.connection_end",Jo(e.connectEnd)],["http.request.request_start",Jo(e.requestStart)],["http.request.response_start",Jo(e.responseStart)],["http.request.response_end",Jo(e.responseEnd)]]:s}(s).forEach((t=>e.setAttribute(...t))),setTimeout(n))}))}))}function Jo(e=0){return((se||performance.timeOrigin)+e)/1e3}function Ko(e){try{return new URL(e,ys.location.origin).href}catch(e){return}}const Qo={...jo,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,_experiments:{},...Go},Zo=(e={})=>{Ho();const{enableInp:t,enableLongTask:n,enableLongAnimationFrame:s,_experiments:{enableInteractions:i,enableStandaloneClsSpans:o},beforeStartSpan:a,idleTimeout:c,finalTimeout:u,childSpanTimeout:d,markBackgroundSpan:h,traceFetch:p,traceXHR:f,trackFetchStreamPerformance:m,shouldCreateSpanForRequest:g,enableHTTPTimings:y,instrumentPageLoad:_,instrumentNavigation:b}={...Qo,...e},v=Ao({recordClsStandaloneSpans:o||!1});t&&function(){if(To()&&se){const e=ho((({metric:e})=>{if(null==e.value)return;const t=e.entries.find((t=>t.duration===e.value&&$o[t.name]));if(!t)return;const{interactionId:n}=t,s=$o[t.name],r=Io(se+t.startTime),i=Io(e.value),o=Ht(),a=o?Ut(o):void 0,c=(null!=n?Fo.get(n):void 0)||a,l=c?Dt(c).description:ge().getScopeData().transactionName,u=xo({name:x(t.target),transaction:l,attributes:B({[ht]:"auto.http.browser.inp",[dt]:`ui.interaction.${s}`,[gt]:t.duration}),startTime:r});vi([u,"optionalAccess",e=>e.addEvent,"call",t=>t("inp",{[ft]:"millisecond",[mt]:e.value})]),vi([u,"optionalAccess",e=>e.end,"call",e=>e(r+i)])}));return()=>{e()}}}(),s&&r.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?new PerformanceObserver((e=>{if(Ht())for(const t of e.getEntries()){if(!t.scripts[0])continue;const e=Io(se+t.startTime),n=Io(t.duration),s={[ht]:"auto.ui.browser.metrics"},r=t.scripts[0],{invoker:i,invokerType:o,sourceURL:a,sourceFunctionName:c,sourceCharPosition:l}=r;s["browser.script.invoker"]=i,s["browser.script.invoker_type"]=o,a&&(s["code.filepath"]=a),c&&(s["code.function"]=c),-1!==l&&(s["browser.script.source_char_position"]=l);const u=li({name:"Main UI thread blocked",op:"ui.long-animation-frame",startTime:e,attributes:s});u&&u.end(e+n)}})).observe({type:"long-animation-frame",buffered:!0}):n&&po("longtask",(({entries:e})=>{if(Ht())for(const t of e){const e=Io(se+t.startTime),n=Io(t.duration),s=li({name:"Main UI thread blocked",op:"ui.long-task",startTime:e,attributes:{[ht]:"auto.ui.browser.metrics"}});s&&s.end(e+n)}})),i&&po("event",(({entries:e})=>{if(Ht())for(const t of e)if("click"===t.name){const e=Io(se+t.startTime),n=Io(t.duration),s={name:x(t.target),op:`ui.interaction.${t.name}`,startTime:e,attributes:{[ht]:"auto.ui.browser.metrics"}},r=C(t.target);r&&(s.attributes["ui.component_name"]=r);const i=li(s);i&&i.end(e+n)}}));const S={name:void 0,source:void 0};function w(e,t){const n="pageload"===t.op,s=a?a(t):t,r=s.attributes||{};t.name!==s.name&&(r[lt]="custom",s.attributes=r),S.name=s.name,S.source=r[lt];const i=Bo(s,{idleTimeout:c,finalTimeout:u,childSpanTimeout:d,disableAutoFinish:n,beforeSpanEnd:e=>{v(),function(e,t){const n=To();if(!n||!Pn.performance.getEntries||!se)return;Nr&&l.log("[Tracing] Adding & adjusting spans using Performance API");const s=Io(se),r=n.getEntries(),{op:i,start_timestamp:o}=Dt(e);if(r.slice(No).forEach((t=>{const n=Io(t.startTime),r=Io(Math.max(0,t.duration));if(!("navigation"===i&&o&&s+n<o))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((s=>{Do(e,t,s,n)})),Do(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),Do(e,t,"fetch",n,"cache","domainLookupStart"),Do(e,t,"domainLookup",n,"DNS"),function(e,t,n){const s=n+Io(t.requestStart),r=n+Io(t.responseEnd),i=n+Io(t.responseStart);t.responseEnd&&(Eo(e,s,r,{op:"browser.request",name:t.name,attributes:{[ht]:"auto.ui.browser.metrics"}}),Eo(e,i,r,{op:"browser.response",name:t.name,attributes:{[ht]:"auto.ui.browser.metrics"}}))}(e,t,n)}(e,t,s);break;case"mark":case"paint":case"measure":{!function(e,t,n,s,r){const i=wi(),o=Io(i?i.requestStart:0),a=r+Math.max(n,o),c=r+n,l=c+s,u={[ht]:"auto.resource.browser.metrics"};a!==c&&(u["sentry.browser.measure_happened_before_request"]=!0,u["sentry.browser.measure_start_time"]=a),Eo(e,a,l,{name:t.name,op:t.entryType,attributes:u})}(e,t,n,r,s);const i=Ri(),o=t.startTime<i.firstHiddenTime;"first-paint"===t.name&&o&&(Nr&&l.log("[Measurements] Adding FP"),Oo.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&o&&(Nr&&l.log("[Measurements] Adding FCP"),Oo.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,s,r,i){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const o=Ws(n),a={[ht]:"auto.resource.browser.metrics"};Lo(a,t,"transferSize","http.response_transfer_size"),Lo(a,t,"encodedBodySize","http.response_content_length"),Lo(a,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(a["resource.render_blocking_status"]=t.renderBlockingStatus),o.protocol&&(a["url.scheme"]=o.protocol.split(":").pop()),o.host&&(a["server.address"]=o.host),a["url.same_origin"]=n.includes(Pn.location.origin);const c=i+s;Eo(e,c,c+r,{name:n.replace(Pn.location.origin,""),op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",attributes:a})}(e,t,t.name,n,r,s)}})),No=Math.max(r.length-1,0),function(e){const t=Pn.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),ko(n.rtt)&&(Oo["connection.rtt"]={value:n.rtt,unit:"millisecond"})),ko(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),ko(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===i){!function(e){const t=wi();if(!t)return;const{responseStart:n,requestStart:s}=t;s<=n&&(Nr&&l.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-s,unit:"millisecond"})}(Oo);const n=Oo["mark.fid"];n&&Oo.fid&&(Eo(e,n.value,n.value+Io(Oo.fid.value),{name:"first input delay",op:"ui.action",attributes:{[ht]:"auto.ui.browser.metrics"}}),delete Oo["mark.fid"]),"fcp"in Oo&&t.recordClsOnPageloadSpan||delete Oo.cls,Object.entries(Oo).forEach((([e,t])=>{Qr(e,t.value,t.unit)})),e.setAttribute("performance.timeOrigin",s),e.setAttribute("performance.activationStart",ki()),function(e){Mo&&(Nr&&l.log("[Measurements] Adding LCP Data"),Mo.element&&e.setAttribute("lcp.element",x(Mo.element)),Mo.id&&e.setAttribute("lcp.id",Mo.id),Mo.url&&e.setAttribute("lcp.url",Mo.url.trim().slice(0,200)),e.setAttribute("lcp.size",Mo.size)),Ro&&Ro.sources&&(Nr&&l.log("[Measurements] Adding CLS Data"),Ro.sources.forEach(((t,n)=>e.setAttribute(`cls.source.${n+1}`,x(t.node)))))}(e)}Mo=void 0,Ro=void 0,Oo={}}(e,{recordClsOnPageloadSpan:!o})}});function h(){["interactive","complete"].includes(ys.document.readyState)&&e.emit("idleSpanEnableAutoFinish",i)}return n&&ys.document&&(ys.document.addEventListener("readystatechange",(()=>{h()})),h()),i}return{name:"BrowserTracing",afterAllSetup(e){let n,s=ys.location&&ys.location.href;e.on("startNavigationSpan",(t=>{Se()===e&&(n&&!Dt(n).timestamp&&(rs&&l.log(`[Tracing] Finishing current root span with op: ${Dt(n).op}`),n.end()),n=w(e,{op:"navigation",...t}))})),e.on("startPageLoadSpan",((t,s={})=>{if(Se()!==e)return;n&&!Dt(n).timestamp&&(rs&&l.log(`[Tracing] Finishing current root span with op: ${Dt(n).op}`),n.end());const r=bt(s.sentryTrace||na("sentry-trace"),s.baggage||na("baggage"));ge().setPropagationContext(r),n=w(e,{op:"pageload",...t})})),e.on("spanEnd",(e=>{const t=Dt(e).op;if(e!==Ut(e)||"navigation"!==t&&"pageload"!==t)return;const n=ge(),s=n.getPropagationContext();n.setPropagationContext({...s,sampled:void 0!==s.sampled?s.sampled:Lt(e),dsc:s.dsc||Vt(e)})})),ys.location&&(_&&ea(e,{name:ys.location.pathname,startTime:se?se/1e3:void 0,attributes:{[lt]:"url",[ht]:"auto.pageload.browser"}}),b&&$n((({to:t,from:n})=>{void 0===n&&s&&-1!==s.indexOf(t)?s=void 0:n!==t&&(s=void 0,ta(e,{name:ys.location.pathname,attributes:{[lt]:"url",[ht]:"auto.navigation.browser"}}))}))),h&&(ys&&ys.document?ys.document.addEventListener("visibilitychange",(()=>{const e=Ht();if(!e)return;const t=Ut(e);if(ys.document.hidden&&t){const e="cancelled",{op:n,status:s}=Dt(t);rs&&l.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n}`),s||t.setStatus({code:xt,message:e}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}})):rs&&l.warn("[Tracing] Could not set up background tab detection due to lack of global document")),i&&function(e,t,n,s){let r;ys.document&&addEventListener("click",(()=>{const i="ui.action.click",o=Ht(),a=o&&Ut(o);if(a){const e=Dt(a).op;if(["navigation","pageload"].includes(e))return void(rs&&l.warn(`[Tracing] Did not create ${i} span because a pageload or navigation span is in progress.`))}r&&(r.setAttribute(pt,"interactionInterrupted"),r.end(),r=void 0),s.name?r=Bo({name:s.name,op:i,attributes:{[lt]:s.source||"url"}},{idleTimeout:e,finalTimeout:t,childSpanTimeout:n}):rs&&l.warn(`[Tracing] Did not create ${i} transaction because _latestRouteName is missing.`)}),{once:!1,capture:!0})}(c,u,d,S),t&&function(){const e=({entries:e})=>{const t=Ht(),n=t&&Ut(t);e.forEach((e=>{if(!function(e){return"duration"in e}(e)||!n)return;const t=e.interactionId;if(null!=t&&!Fo.has(t)){if(Po.length>10){const e=Po.shift();Fo.delete(e)}Po.push(t),Fo.set(t,n)}}))};po("event",e),po("first-input",e)}(),Xo(e,{traceFetch:p,traceXHR:f,trackFetchStreamPerformance:m,tracePropagationTargets:e.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:g,enableHTTPTimings:y})}}};function ea(e,t,n){e.emit("startPageLoadSpan",t,n),ge().setTransactionName(t.name);const s=Ht();return"pageload"===(s&&Dt(s).op)?s:void 0}function ta(e,t){ye().setPropagationContext(Q()),ge().setPropagationContext(Q()),e.emit("startNavigationSpan",t),ge().setTransactionName(t.name);const n=Ht();return"navigation"===(n&&Dt(n).op)?n:void 0}function na(e){const t=function(e){return k.document&&k.document.querySelector?k.document.querySelector(e):null}(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}const sa=1e6,ra=String(0),ia="main";let oa="",aa="",ca="",la=ys.navigator&&ys.navigator.userAgent||"",ua="";const da=ys.navigator&&ys.navigator.language||ys.navigator&&ys.navigator.languages&&ys.navigator.languages[0]||"",ha=ys.navigator&&ys.navigator.userAgentData;var pa;function fa(e,t,n,s){if("transaction"!==s.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const r=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&rs&&l.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(s),i=function(e){return!("thread_metadata"in e)}(c=n)?function(e){let t,n=0;const s={samples:[],stacks:[],frames:[],thread_metadata:{[ra]:{name:ia}}},r=e.samples[0];if(!r)return s;const i=r.timestamp,o="number"==typeof performance.timeOrigin?performance.timeOrigin:se||0,a=o-(se||o);return e.samples.forEach(((r,o)=>{if(void 0===r.stackId)return void 0===t&&(t=n,s.stacks[t]=[],n++),void(s.samples[o]={elapsed_since_start_ns:((r.timestamp+a-i)*sa).toFixed(0),stack_id:t,thread_id:ra});let c=e.stacks[r.stackId];const l=[];for(;c;){l.push(c.frameId);const t=e.frames[c.frameId];t&&void 0===s.frames[c.frameId]&&(s.frames[c.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),c=void 0===c.parentId?void 0:e.stacks[c.parentId]}const u={elapsed_since_start_ns:((r.timestamp+a-i)*sa).toFixed(0),stack_id:n,thread_id:ra};s.stacks[n]=l,s.samples[o]=u,n++})),s}(c):c,o=t||("number"==typeof s.start_timestamp?1e3*s.start_timestamp:1e3*te()),a="number"==typeof s.timestamp?1e3*s.timestamp:1e3*te();var c;return{event_id:e,timestamp:new Date(o).toISOString(),platform:"javascript",version:"1",release:s.release||"",environment:s.environment||Ge,runtime:{name:"javascript",version:ys.navigator.userAgent},os:{name:oa,version:aa,build_number:la},device:{locale:da,model:ua,manufacturer:la,architecture:ca,is_emulator:!1},debug_meta:{images:ya(n.resources)},profile:i,transactions:[{name:s.transaction||"",id:s.event_id||H(),trace_id:r,active_thread_id:ra,relative_start_ns:"0",relative_end_ns:(1e6*(a-o)).toFixed(0)}]}}function ma(e){return"pageload"===Dt(e).op}"object"==typeof(pa=ha)&&null!==pa&&"getHighEntropyValues"in pa&&ha.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(oa=e.platform||"",ca=e.architecture||"",ua=e.model||"",aa=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];la=`${t.brand} ${t.version}`}})).catch((e=>{}));const ga=new WeakMap;function ya(e){const t=r._sentryDebugIds;if(!t)return[];const n=Se(),s=n&&n.getOptions(),i=s&&s.stackParser;if(!i)return[];let o;const a=ga.get(i);a?o=a:(o=new Map,ga.set(i,o));const c=Object.keys(t).reduce(((e,n)=>{let s;const r=o.get(n);r?s=r:(s=i(n),o.set(n,s));for(let r=s.length-1;r>=0;r--){const i=s[r],o=i&&i.filename;if(i&&o){e[o]=t[n];break}}return e}),{}),l=[];for(const t of e)t&&c[t]&&l.push({type:"sourcemap",code_file:t,debug_id:c[t]});return l}let _a=!1;function ba(e){if(_a)return rs&&l.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return rs&&l.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=Se(),n=t&&t.getOptions();if(!n)return rs&&l.log("[Profiling] Profiling disabled, no options found."),!1;const s=n.profilesSampleRate;return("number"!=typeof(r=s)&&"boolean"!=typeof r||"number"==typeof r&&isNaN(r)?(rs&&l.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(r)} of type ${JSON.stringify(typeof r)}.`),0):!0===r||!1===r||!(r<0||r>1)||(rs&&l.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${r}.`),0))?s?!!(!0===s||Math.random()<s)||(rs&&l.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(s)})`),!1):(rs&&l.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(rs&&l.warn("[Profiling] Discarding profile because of invalid sample rate."),!1);var r}function va(e,t,n,s){return function(e){return e.samples.length<2?(rs&&l.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(rs&&l.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?fa(e,t,n,s):null}const Sa=new Map;function wa(e){const t=Sa.get(e);return t&&Sa.delete(e),t}function ka(e){let t;ma(e)&&(t=1e3*te());const n=function(){const e=ys.Profiler;if("function"!=typeof e)return void(rs&&l.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(3e3);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){rs&&(l.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),l.log("[Profiling] Disabling profiling for current user session.")),_a=!0}}();if(!n)return;rs&&l.log(`[Profiling] started profiling span: ${Dt(e).description}`);const s=H();async function r(){if(e&&n)return n.stop().then((t=>{i&&(ys.clearTimeout(i),i=void 0),rs&&l.log(`[Profiling] stopped profiling of span: ${Dt(e).description}`),t?function(e,t){if(Sa.set(e,t),Sa.size>30){const e=Sa.keys().next().value;Sa.delete(e)}}(s,t):rs&&l.log(`[Profiling] profiler returned null profile for: ${Dt(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started")})).catch((e=>{rs&&l.log("[Profiling] error while stopping profiler:",e)}))}ge().setContext("profile",{profile_id:s,start_timestamp:t});let i=ys.setTimeout((()=>{rs&&l.log("[Profiling] max profile duration elapsed, stopping profiling for:",Dt(e).description),r()}),3e4);const o=e.end.bind(e);e.end=function(){return e?(r().then((()=>{o()}),(()=>{o()})),e):o()}}const Ea=()=>({name:"BrowserProfiling",setup(e){const t=Ht(),n=t&&Ut(t);n&&ma(n)&&ba(n)&&ka(n),e.on("spanStart",(e=>{e===Ut(e)&&ba(e)&&ka(e)})),e.on("beforeEnvelope",(e=>{if(!Sa.size)return;const t=function(e){const t=[];return Hn(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const s=e[n];s&&s.contexts&&s.contexts.profile&&s.contexts.profile.profile_id&&t.push(e[n])}})),t}(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,s=t&&t.profile&&t.profile.profile_id,r=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof s){rs&&l.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!s){rs&&l.log("[Profiling] cannot find profile for a span without a profile context");continue}t&&t.profile&&delete t.profile;const i=wa(s);if(!i){rs&&l.log(`[Profiling] Could not retrieve profile for span: ${s}`);continue}const o=va(s,r,i,e);o&&n.push(o)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)}))}});function xa(e,t){const n=t&&t.getDsn(),s=t&&t.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,n)||function(e,t){return!!t&&Ta(e)===Ta(t)}(e,s)}function Ta(e){return"/"===e[e.length-1]?e.slice(0,-1):e}function Ia(){return"undefined"!=typeof window&&(!(("undefined"==typeof __SENTRY_BROWSER_BUNDLE__||!__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0))||void 0!==r.process&&"renderer"===r.process.type)}const Ca=r,Ma="sentryReplaySession",Ra="replay_event",Na="Unable to send Replay",Oa=15e4,Aa=5e3,Da=2e7;function La(e,t){return null!=e?e:t()}function Pa(e){let t,n=e[0],s=1;for(;s<e.length;){const r=e[s],i=e[s+1];if(s+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(t=n,n=i(n)):"call"!==r&&"optionalCall"!==r||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}var Fa;function $a(e){const t=Pa([e,"optionalAccess",e=>e.host]);return Boolean(Pa([t,"optionalAccess",e=>e.shadowRoot])===e)}function ja(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function Ba(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,Ua).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function Ua(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=Ba(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return e.cssText.replace(/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,"$1\\$2");return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Fa||(Fa={}));class Ha{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){return e?La(Pa([this,"access",e=>e.getMeta,"call",t=>t(e),"optionalAccess",e=>e.id]),(()=>-1)):-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function za({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function qa({isMasked:e,element:t,value:n,maskInputFn:s}){let r=n||"";return e?(s&&(r=s(r,t)),"*".repeat(r.length)):r}function Wa(e){return e.toLowerCase()}function Va(e){return e.toUpperCase()}const Ga="__rrweb_original__";function Xa(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Wa(t):null}function Ya(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}function Ja(e,t){let n;try{n=new URL(e,La(t,(()=>window.location.href)))}catch(e){return null}return La(Pa([n.pathname.match(/\.([0-9a-z]+)(?:$)/i),"optionalAccess",e=>e[1]]),(()=>null))}const Ka={};function Qa(e){const t=Ka[e];if(t)return t;const n=window.document;let s=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const r=t.contentWindow;r&&r[e]&&(s=r[e]),n.head.removeChild(t)}catch(e){}return Ka[e]=s.bind(window)}function Za(...e){return Qa("setTimeout")(...e)}function ec(...e){return Qa("clearTimeout")(...e)}let tc=1;const nc=new RegExp("[^a-z0-9-_:]"),sc=-2;function rc(){return tc++}let ic,oc;const ac=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,cc=/^(?:[a-z+]+:)?\/\//i,lc=/^www\..*/i,uc=/^(data:)([^,]*),(.*)/i;function dc(e,t){return(e||"").replace(ac,((e,n,s,r,i,o)=>{const a=s||i||o,c=n||r||"";if(!a)return e;if(cc.test(a)||lc.test(a))return`url(${c}${a}${c})`;if(uc.test(a))return`url(${c}${a}${c})`;if("/"===a[0])return`url(${c}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+a}${c})`;const l=t.split("/"),u=a.split("/");l.pop();for(const e of u)"."!==e&&(".."===e?l.pop():l.push(e));return`url(${c}${l.join("/")}${c})`}))}const hc=/^[^ \t\n\r\u000c]+/,pc=/^[, \t\n\r\u000c]+/,fc=new WeakMap;function mc(e,t){return t&&""!==t.trim()?gc(e,t):t}function gc(e,t){let n=fc.get(e);if(n||(n=e.createElement("a"),fc.set(e,n)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return n.setAttribute("href",t),n.href}function yc(e,t,n,s,r,i){return s?"src"===n||"href"===n&&("use"!==t||"#"!==s[0])||"xlink:href"===n&&"#"!==s[0]?mc(e,s):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function s(e){let s;const r=e.exec(t.substring(n));return r?(s=r[0],n+=s.length,s):""}const r=[];for(;s(pc),!(n>=t.length);){let i=s(hc);if(","===i.slice(-1))i=mc(e,i.substring(0,i.length-1)),r.push(i);else{let s="";i=mc(e,i);let o=!1;for(;;){const e=t.charAt(n);if(""===e){r.push((i+s).trim());break}if(o)")"===e&&(o=!1);else{if(","===e){n+=1,r.push((i+s).trim());break}"("===e&&(o=!0)}s+=e,n+=1}}}return r.join(", ")}(e,s):"style"===n?dc(s,gc(e)):"object"===t&&"data"===n?mc(e,s):"function"==typeof i?i(n,s,r):s:mc(e,s):s}function _c(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function bc(e,t,n=1/0,s=0){return e?e.nodeType!==e.ELEMENT_NODE||s>n?-1:t(e)?s:bc(e.parentNode,t,n,s+1):-1}function vc(e,t){return n=>{const s=n;if(null===s)return!1;try{if(e)if("string"==typeof e){if(s.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const s=e.classList[n];if(t.test(s))return!0}return!1}(s,e))return!0;return!(!t||!s.matches(t))}catch(e){return!1}}}function Sc(e,t,n,s,r,i){try{const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===o)return!1;if("INPUT"===o.tagName){const e=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let a=-1,c=-1;if(i){if(c=bc(o,vc(s,r)),c<0)return!0;a=bc(o,vc(t,n),c>=0?c:1/0)}else{if(a=bc(o,vc(t,n)),a<0)return!1;c=bc(o,vc(s,r),a>=0?a:1/0)}return a>=0?!(c>=0)||a<=c:!(c>=0||!i)}catch(e){}return!!i}function wc(e){return null==e?"":e.toLowerCase()}function kc(e,t){const{doc:n,mirror:s,blockClass:r,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:h=!1,inlineStylesheet:p=!0,maskInputOptions:f={},maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:b={},inlineImages:v=!1,recordCanvas:S=!1,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E=5e3,onStylesheetLoad:x,stylesheetLoadTimeout:T=5e3,keepIframeSrcFn:I=()=>!1,newlyAddedElement:C=!1}=t;let{preserveWhiteSpace:M=!0}=t;const R=function(e,t){const{doc:n,mirror:s,blockClass:r,blockSelector:i,unblockSelector:o,maskAllText:a,maskAttributeFn:c,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:h,inlineStylesheet:p,maskInputOptions:f={},maskTextFn:m,maskInputFn:g,dataURLOptions:y={},inlineImages:_,recordCanvas:b,keepIframeSrcFn:v,newlyAddedElement:S=!1}=t,w=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,s);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:Fa.Document,childNodes:[],compatMode:e.compatMode}:{type:Fa.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Fa.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:w};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:s,blockSelector:r,unblockSelector:i,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:l,dataURLOptions:u={},inlineImages:d,recordCanvas:h,keepIframeSrcFn:p,newlyAddedElement:f=!1,rootId:m,maskAllText:g,maskTextClass:y,unmaskTextClass:_,maskTextSelector:b,unmaskTextSelector:v}=t,S=function(e,t,n,s){try{if(s&&e.matches(s))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const s=e.classList[n];if(t.test(s))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,s,r,i),w=function(e){if(e instanceof HTMLFormElement)return"form";const t=Wa(e.tagName);return nc.test(t)?"div":t}(e);let k={};const E=e.attributes.length;for(let t=0;t<E;t++){const s=e.attributes[t];s.name&&!_c(w,s.name,s.value)&&(k[s.name]=yc(n,w,Wa(s.name),s.value,e,c))}if("link"===w&&o){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let s=null;t&&(s=Ba(t)),s&&(delete k.rel,delete k.href,k._cssText=dc(s,t.href))}if("style"===w&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=Ba(e.sheet);t&&(k._cssText=dc(t,gc(n)))}if("input"===w||"textarea"===w||"select"===w||"option"===w){const t=e,n=Xa(t),s=Ya(t,Va(w),n),r=t.checked;if("submit"!==n&&"button"!==n&&s){const e=Sc(t,y,b,_,v,za({type:n,tagName:Va(w),maskInputOptions:a}));k.value=qa({isMasked:e,element:t,value:s,maskInputFn:l})}r&&(k.checked=r)}if("option"===w&&(e.selected&&!a.select?k.selected=!0:delete k.selected),"canvas"===w&&h)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let s=0;s<e.height;s+=50){const r=t.getImageData,i=Ga in r?r[Ga]:r;if(new Uint32Array(i.call(t,n,s,Math.min(50,e.width-n),Math.min(50,e.height-s)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(k.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){const t=e.toDataURL(u.type,u.quality),s=n.createElement("canvas");s.width=e.width,s.height=e.height,t!==s.toDataURL(u.type,u.quality)&&(k.rr_dataURL=t)}if("img"===w&&d){ic||(ic=n.createElement("canvas"),oc=ic.getContext("2d"));const t=e,s=t.currentSrc||t.getAttribute("src")||"<unknown-src>",r=t.crossOrigin,i=()=>{t.removeEventListener("load",i);try{ic.width=t.naturalWidth,ic.height=t.naturalHeight,oc.drawImage(t,0,0),k.rr_dataURL=ic.toDataURL(u.type,u.quality)}catch(e){if("anonymous"!==t.crossOrigin)return t.crossOrigin="anonymous",void(t.complete&&0!==t.naturalWidth?i():t.addEventListener("load",i));console.warn(`Cannot inline img src=${s}! Error: ${e}`)}"anonymous"===t.crossOrigin&&(r?k.crossOrigin=r:t.removeAttribute("crossorigin"))};t.complete&&0!==t.naturalWidth?i():t.addEventListener("load",i)}if("audio"!==w&&"video"!==w||(k.rr_mediaState=e.paused?"paused":"played",k.rr_mediaCurrentTime=e.currentTime),f||(e.scrollLeft&&(k.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(k.rr_scrollTop=e.scrollTop)),S){const{width:t,height:n}=e.getBoundingClientRect();k={class:k.class,rr_width:`${t}px`,rr_height:`${n}px`}}let x;"iframe"!==w||p(k.src)||(S||e.contentDocument||(k.rr_src=k.src),delete k.src);try{customElements.get(w)&&(x=!0)}catch(e){}return{type:Fa.Element,tagName:w,attributes:k,childNodes:[],isSVG:(T=e,Boolean("svg"===T.tagName||T.ownerSVGElement)||void 0),needBlock:S,rootId:m,isCustom:x};var T}(e,{doc:n,blockClass:r,blockSelector:i,unblockSelector:o,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:f,maskInputFn:g,dataURLOptions:y,inlineImages:_,recordCanvas:b,keepIframeSrcFn:v,newlyAddedElement:S,rootId:w,maskAllText:a,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:h});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:s,unmaskTextClass:r,maskTextSelector:i,unmaskTextSelector:o,maskTextFn:a,maskInputOptions:c,maskInputFn:l,rootId:u}=t,d=e.parentNode&&e.parentNode.tagName;let h=e.textContent;const p="STYLE"===d||void 0,f="SCRIPT"===d||void 0,m="TEXTAREA"===d||void 0;if(p&&h){try{e.nextSibling||e.previousSibling||Pa([e,"access",e=>e.parentNode,"access",e=>e.sheet,"optionalAccess",e=>e.cssRules])&&(h=Ba(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}h=dc(h,gc(t.doc))}f&&(h="SCRIPT_PLACEHOLDER");const g=Sc(e,s,i,r,o,n);return p||f||m||!h||!g||(h=a?a(h,e.parentElement):h.replace(/[\S]/g,"*")),m&&h&&(c.textarea||g)&&(h=l?l(h,e.parentNode):h.replace(/[\S]/g,"*")),"OPTION"===d&&h&&(h=qa({isMasked:Sc(e,s,i,r,o,za({type:null,tagName:d,maskInputOptions:c})),element:e,value:h,maskInputFn:l})),{type:Fa.Text,textContent:h||"",isStyle:p,rootId:u}}(e,{doc:n,maskAllText:a,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:h,maskTextFn:m,maskInputOptions:f,maskInputFn:g,rootId:w});case e.CDATA_SECTION_NODE:return{type:Fa.CDATA,textContent:"",rootId:w};case e.COMMENT_NODE:return{type:Fa.Comment,textContent:e.textContent||"",rootId:w};default:return!1}}(e,{doc:n,mirror:s,blockClass:r,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,dataURLOptions:b,inlineImages:v,recordCanvas:S,keepIframeSrcFn:I,newlyAddedElement:C});if(!R)return console.warn(e,"not serialized"),null;let N;N=s.hasNode(e)?s.getId(e):!function(e,t){if(t.comment&&e.type===Fa.Comment)return!0;if(e.type===Fa.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===Ja(e.attributes.href)))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(wc(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===wc(e.attributes.name)||"icon"===wc(e.attributes.rel)||"apple-touch-icon"===wc(e.attributes.rel)||"shortcut icon"===wc(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&wc(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(wc(e.attributes.property).match(/^(og|twitter|fb):/)||wc(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===wc(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===wc(e.attributes.name)||"googlebot"===wc(e.attributes.name)||"bingbot"===wc(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===wc(e.attributes.name)||"generator"===wc(e.attributes.name)||"framework"===wc(e.attributes.name)||"publisher"===wc(e.attributes.name)||"progid"===wc(e.attributes.name)||wc(e.attributes.property).match(/^article:/)||wc(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===wc(e.attributes.name)||"yandex-verification"===wc(e.attributes.name)||"csrf-token"===wc(e.attributes.name)||"p:domain_verify"===wc(e.attributes.name)||"verify-v1"===wc(e.attributes.name)||"verification"===wc(e.attributes.name)||"shopify-checkout-api-token"===wc(e.attributes.name)))return!0}}return!1}(R,_)&&(M||R.type!==Fa.Text||R.isStyle||R.textContent.replace(/^\s+|\s+$/gm,"").length)?rc():sc;const O=Object.assign(R,{id:N});if(s.add(e,O),N===sc)return null;w&&w(e);let A=!h;if(O.type===Fa.Element){A=A&&!O.needBlock,delete O.needBlock;const t=e.shadowRoot;t&&ja(t)&&(O.isShadowHost=!0)}if((O.type===Fa.Document||O.type===Fa.Element)&&A){_.headWhitespace&&O.type===Fa.Element&&"head"===O.tagName&&(M=!1);const t={doc:n,mirror:s,blockClass:r,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:h,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:b,inlineImages:v,recordCanvas:S,preserveWhiteSpace:M,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:x,stylesheetLoadTimeout:T,keepIframeSrcFn:I};for(const n of Array.from(e.childNodes)){const e=kc(n,t);e&&O.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const s=kc(n,t);s&&(ja(e.shadowRoot)&&(s.isShadow=!0),O.childNodes.push(s))}}return e.parentNode&&$a(e.parentNode)&&ja(e.parentNode)&&(O.isShadow=!0),O.type===Fa.Element&&"iframe"===O.tagName&&function(e,t,n){const s=e.contentWindow;if(!s)return;let r,i=!1;try{r=s.document.readyState}catch(e){return}if("complete"!==r){const s=Za((()=>{i||(t(),i=!0)}),n);return void e.addEventListener("load",(()=>{ec(s),i=!0,t()}))}const o="about:blank";if(s.location.href!==o||e.src===o||""===e.src)return Za(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&k){const n=kc(t,{doc:t,mirror:s,blockClass:r,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:b,inlineImages:v,recordCanvas:S,preserveWhiteSpace:M,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:x,stylesheetLoadTimeout:T,keepIframeSrcFn:I});n&&k(e,n)}}),E),O.type===Fa.Element&&"link"===O.tagName&&"string"==typeof O.attributes.rel&&("stylesheet"===O.attributes.rel||"preload"===O.attributes.rel&&"string"==typeof O.attributes.href&&"css"===Ja(O.attributes.href))&&function(e,t,n){let s,r=!1;try{s=e.sheet}catch(e){return}if(s)return;const i=Za((()=>{r||(t(),r=!0)}),n);e.addEventListener("load",(()=>{ec(i),r=!0,t()}))}(e,(()=>{if(x){const t=kc(e,{doc:n,mirror:s,blockClass:r,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:b,inlineImages:v,recordCanvas:S,preserveWhiteSpace:M,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:x,stylesheetLoadTimeout:T,keepIframeSrcFn:I});t&&x(e,t)}}),T),O}function Ec(e){let t,n=e[0],s=1;for(;s<e.length;){const r=e[s],i=e[s+1];if(s+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(t=n,n=i(n)):"call"!==r&&"optionalCall"!==r||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}function xc(e,t,n=document){const s={capture:!0,passive:!0};return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t,s)}const Tc="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Ic={map:{},getId:()=>(console.error(Tc),-1),getNode:()=>(console.error(Tc),null),removeNodeFromMap(){console.error(Tc)},has:()=>(console.error(Tc),!1),reset(){console.error(Tc)}};function Cc(e,t,n={}){let s=null,r=0;return function(...i){const o=Date.now();r||!1!==n.leading||(r=o);const a=t-(o-r),c=this;a<=0||a>t?(s&&(function(...e){Gc("clearTimeout")(...e)}(s),s=null),r=o,e.apply(c,i)):s||!1===n.trailing||(s=Xc((()=>{r=!1===n.leading?0:Date.now(),s=null,e.apply(c,i)}),a))}}function Mc(e,t,n,s,r=window){const i=r.Object.getOwnPropertyDescriptor(e,t);return r.Object.defineProperty(e,t,s?n:{set(e){Xc((()=>{n.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>Mc(e,t,i||{},!0)}function Rc(e,t,n){try{if(!(t in e))return()=>{};const s=e[t],r=n(s);return"function"==typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__rrweb_original__:{enumerable:!1,value:s}})),e[t]=r,()=>{e[t]=s}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Ic=new Proxy(Ic,{get:(e,t,n)=>("map"===t&&console.error(Tc),Reflect.get(e,t,n))}));let Nc=Date.now;function Oc(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:Ec([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||Ec([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||Ec([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:Ec([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||Ec([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||Ec([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function Ac(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Dc(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Lc(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}function Pc(e,t,n,s,r){if(!e)return!1;const i=Lc(e);if(!i)return!1;const o=vc(t,n);if(!r){const e=s&&i.matches(s);return o(i)&&!e}const a=bc(i,o);let c=-1;return!(a<0)&&(s&&(c=bc(i,vc(null,s))),a>-1&&c<0||a<c)}function Fc(e,t){return t.getId(e)===sc}function $c(e,t){if($a(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||$c(e.parentNode,t))}function jc(e){return Boolean(e.changedTouches)}function Bc(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function Uc(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function Hc(e){return Boolean(Ec([e,"optionalAccess",e=>e.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(Nc=()=>(new Date).getTime());class zc{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return null!=(t=this.styleIDMap.get(e))?t:-1;var t}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function qc(e){let t=null;return Ec([e,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function Wc(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||function(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=qc(n);)n=t;return n}(e);return t.contains(n)}(e))}const Vc={};function Gc(e){const t=Vc[e];if(t)return t;const n=window.document;let s=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const r=t.contentWindow;r&&r[e]&&(s=r[e]),n.head.removeChild(t)}catch(e){}return Vc[e]=s.bind(window)}function Xc(...e){return Gc("setTimeout")(...e)}var Yc=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Yc||{}),Jc=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(Jc||{}),Kc=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Kc||{}),Qc=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Qc||{});function Zc(e){let t,n=e[0],s=1;for(;s<e.length;){const r=e[s],i=e[s+1];if(s+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(t=n,n=i(n)):"call"!==r&&"optionalCall"!==r||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}function el(e){return"__ln"in e}class tl{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=Zc([t,"optionalAccess",e=>e.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&el(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&el(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const nl=(e,t)=>`${e}@${t}`;class sl{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new tl,s=e=>{let t=e,n=sc;for(;n===sc;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},r=r=>{if(!r.parentNode||!Wc(r))return;const i=$a(r.parentNode)?this.mirror.getId(qc(r)):this.mirror.getId(r.parentNode),o=s(r);if(-1===i||-1===o)return n.addNode(r);const a=kc(r,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{Bc(e,this.mirror)&&!Pc(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(e),Uc(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),Hc(r)&&this.shadowDomManager.addShadowRoot(r.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{Pc(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(e,t),e.contentWindow&&this.canvasManager.addWindow(e.contentWindow),this.shadowDomManager.observeAttachShadow(e))},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});a&&(e.push({parentId:i,nextId:o,node:a}),t.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)il(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||r(e);for(const e of this.addedSet)ol(this.droppedSet,e)||il(this.removes,e,this.mirror)?ol(this.movedSet,e)?r(e):this.droppedSet.add(e):r(e);let i=null;for(;n.length;){let e=null;if(i){const t=this.mirror.getId(i.value.parentNode),n=s(i.value);-1!==t&&-1!==n&&(e=i)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===s(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const s=t.parentNode.host;if(-1!==this.mirror.getId(s)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}i=e.previous,n.removeNode(e.value),r(e.value)}const o={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),s=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+s).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(o.texts.length||o.attributes.length||o.removes.length||o.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(o))},this.processMutation=e=>{if(!Fc(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;Pc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:Sc(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,Lc(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,s=e.target.getAttribute(n);if("value"===n){const n=Xa(t),r=t.tagName;s=Ya(t,r,n);const i=za({maskInputOptions:this.maskInputOptions,tagName:r,type:n});s=qa({isMasked:Sc(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,i),element:t,value:s,maskInputFn:this.maskInputFn})}if(Pc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===e.oldValue)return;let r=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(s)){if(t.contentDocument)return;n="rr_src"}if(r||(r={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(r),this.attributeMap.set(e.target,r)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!_c(t.tagName,n)&&(r.attributes[n]=yc(this.doc,Wa(t.tagName),Wa(n),s,t,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const s=t.style.getPropertyValue(e),i=t.style.getPropertyPriority(e);s!==n.style.getPropertyValue(e)||i!==n.style.getPropertyPriority(e)?r.styleDiff[e]=""===i?s:[s,i]:r._unchangedStyles[e]=[s,i]}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(r.styleDiff[e]=!1)}break}case"childList":if(Pc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),s=$a(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Pc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Fc(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(rl(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||$c(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[nl(n,s)]?rl(this.movedSet,t):this.removes.push({parentId:s,id:n,isShadow:!(!$a(e.target)||!ja(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(Fc(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[nl(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Pc(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),Hc(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function rl(e,t){e.delete(t),t.childNodes.forEach((t=>rl(e,t)))}function il(e,t,n){return 0!==e.length&&function(e,t,n){let s=t.parentNode;for(;s;){const t=n.getId(s);if(e.some((e=>e.id===t)))return!0;s=s.parentNode}return!1}(e,t,n)}function ol(e,t){return 0!==e.size&&al(e,t)}function al(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||al(e,n))}let cl;function ll(e){cl=e}function ul(){cl=void 0}const dl=e=>cl?(...t)=>{try{return e(...t)}catch(e){if(cl&&!0===cl(e))return()=>{};throw e}}:e;function hl(e){let t,n=e[0],s=1;for(;s<e.length;){const r=e[s],i=e[s+1];if(s+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(t=n,n=i(n)):"call"!==r&&"optionalCall"!==r||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}const pl=[];function fl(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function ml(e,t){const n=new sl;pl.push(n),n.init(e);let s=window.MutationObserver||window.__rrMutationObserver;const r=hl([window,"optionalAccess",e=>e.Zone,"optionalAccess",e=>e.__symbol__,"optionalCall",e=>e("MutationObserver")]);r&&window[r]&&(s=window[r]);const i=new s(dl((t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)})));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function gl({scrollCb:e,doc:t,mirror:n,blockClass:s,blockSelector:r,unblockSelector:i,sampling:o}){const a=dl(Cc(dl((o=>{const a=fl(o);if(!a||Pc(a,s,r,i,!0))return;const c=n.getId(a);if(a===t&&t.defaultView){const n=Oc(t.defaultView);e({id:c,x:n.left,y:n.top})}else e({id:c,x:a.scrollLeft,y:a.scrollTop})})),o.scroll||100));return xc("scroll",a,t)}const yl=["INPUT","TEXTAREA","SELECT"],_l=new WeakMap;function bl({inputCb:e,doc:t,mirror:n,blockClass:s,blockSelector:r,unblockSelector:i,ignoreClass:o,ignoreSelector:a,maskInputOptions:c,maskInputFn:l,sampling:u,userTriggeredOnInput:d,maskTextClass:h,unmaskTextClass:p,maskTextSelector:f,unmaskTextSelector:m}){function g(e){let n=fl(e);const u=e.isTrusted,g=n&&Va(n.tagName);if("OPTION"===g&&(n=n.parentElement),!n||!g||yl.indexOf(g)<0||Pc(n,s,r,i,!0))return;const _=n;if(_.classList.contains(o)||a&&_.matches(a))return;const b=Xa(n);let v=Ya(_,g,b),S=!1;const w=za({maskInputOptions:c,tagName:g,type:b}),k=Sc(n,h,f,p,m,w);"radio"!==b&&"checkbox"!==b||(S=n.checked),v=qa({isMasked:k,element:n,value:v,maskInputFn:l}),y(n,d?{text:v,isChecked:S,userTriggered:u}:{text:v,isChecked:S});const E=n.name;"radio"===b&&E&&S&&t.querySelectorAll(`input[type="radio"][name="${E}"]`).forEach((e=>{if(e!==n){const t=qa({isMasked:k,element:e,value:Ya(e,g,b),maskInputFn:l});y(e,d?{text:t,isChecked:!S,userTriggered:!1}:{text:t,isChecked:!S})}}))}function y(t,s){const r=_l.get(t);if(!r||r.text!==s.text||r.isChecked!==s.isChecked){_l.set(t,s);const r=n.getId(t);dl(e)({...s,id:r})}}const _=("last"===u.input?["change"]:["input","change"]).map((e=>xc(e,dl(g),t))),b=t.defaultView;if(!b)return()=>{_.forEach((e=>e()))};const v=b.Object.getOwnPropertyDescriptor(b.HTMLInputElement.prototype,"value"),S=[[b.HTMLInputElement.prototype,"value"],[b.HTMLInputElement.prototype,"checked"],[b.HTMLSelectElement.prototype,"value"],[b.HTMLTextAreaElement.prototype,"value"],[b.HTMLSelectElement.prototype,"selectedIndex"],[b.HTMLOptionElement.prototype,"selected"]];return v&&v.set&&_.push(...S.map((e=>Mc(e[0],e[1],{set(){dl(g)({target:this,isTrusted:!1})}},!1,b)))),dl((()=>{_.forEach((e=>e()))}))}function vl(e){return function(e,t){if(El("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||El("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||El("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||El("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Sl(e,t,n){let s,r;return e?(e.ownerNode?s=t.getId(e.ownerNode):r=n.getId(e),{styleId:r,id:s}):{}}function wl({mirror:e,stylesheetManager:t},n){let s=null;s="#document"===n.nodeName?e.getId(n):e.getId(n.host);const r="#document"===n.nodeName?hl([n,"access",e=>e.defaultView,"optionalAccess",e=>e.Document]):hl([n,"access",e=>e.ownerDocument,"optionalAccess",e=>e.defaultView,"optionalAccess",e=>e.ShadowRoot]),i=hl([r,"optionalAccess",e=>e.prototype])?Object.getOwnPropertyDescriptor(hl([r,"optionalAccess",e=>e.prototype]),"adoptedStyleSheets"):void 0;return null!==s&&-1!==s&&r&&i?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return hl([i,"access",e=>e.get,"optionalAccess",e=>e.call,"call",e=>e(this)])},set(e){const n=hl([i,"access",e=>e.set,"optionalAccess",e=>e.call,"call",t=>t(this,e)]);if(null!==s&&-1!==s)try{t.adoptStyleSheets(e,s)}catch(e){}return n}}),dl((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))):()=>{}}function kl(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let s;e.recordDOM&&(s=ml(e,e.doc));const r=function({mousemoveCb:e,sampling:t,doc:n,mirror:s}){if(!1===t.mousemove)return()=>{};const r="number"==typeof t.mousemove?t.mousemove:50,i="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let o,a=[];const c=Cc(dl((t=>{const n=Date.now()-o;e(a.map((e=>(e.timeOffset-=n,e))),t),a=[],o=null})),i),l=dl(Cc(dl((e=>{const t=fl(e),{clientX:n,clientY:r}=jc(e)?e.changedTouches[0]:e;o||(o=Nc()),a.push({x:n,y:r,id:s.getId(t),timeOffset:Nc()-o}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?Jc.Drag:e instanceof MouseEvent?Jc.MouseMove:Jc.TouchMove)})),r,{trailing:!1})),u=[xc("mousemove",l,n),xc("touchmove",l,n),xc("drag",l,n)];return dl((()=>{u.forEach((e=>e()))}))}(e),i=function({mouseInteractionCb:e,doc:t,mirror:n,blockClass:s,blockSelector:r,unblockSelector:i,sampling:o}){if(!1===o.mouseInteraction)return()=>{};const a=!0===o.mouseInteraction||void 0===o.mouseInteraction?{}:o.mouseInteraction,c=[];let l=null;return Object.keys(Kc).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((o=>{let a=Wa(o);const u=(t=>o=>{const a=fl(o);if(Pc(a,s,r,i,!0))return;let c=null,u=t;if("pointerType"in o){switch(o.pointerType){case"mouse":c=Qc.Mouse;break;case"touch":c=Qc.Touch;break;case"pen":c=Qc.Pen}c===Qc.Touch?Kc[t]===Kc.MouseDown?u="TouchStart":Kc[t]===Kc.MouseUp&&(u="TouchEnd"):Qc.Pen}else jc(o)&&(c=Qc.Touch);null!==c?(l=c,(u.startsWith("Touch")&&c===Qc.Touch||u.startsWith("Mouse")&&c===Qc.Mouse)&&(c=null)):Kc[t]===Kc.Click&&(c=l,l=null);const d=jc(o)?o.changedTouches[0]:o;if(!d)return;const h=n.getId(a),{clientX:p,clientY:f}=d;dl(e)({type:Kc[u],id:h,x:p,y:f,...null!==c&&{pointerType:c}})})(o);if(window.PointerEvent)switch(Kc[o]){case Kc.MouseDown:case Kc.MouseUp:a=a.replace("mouse","pointer");break;case Kc.TouchStart:case Kc.TouchEnd:return}c.push(xc(a,u,t))})),dl((()=>{c.forEach((e=>e()))}))}(e),o=gl(e),a=function({viewportResizeCb:e},{win:t}){let n=-1,s=-1;return xc("resize",dl(Cc(dl((()=>{const t=Ac(),r=Dc();n===t&&s===r||(e({width:Number(r),height:Number(t)}),n=t,s=r)})),200)),t)}(e,{win:n}),c=bl(e),l=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:s,mirror:r,sampling:i,doc:o}){const a=dl((o=>Cc(dl((i=>{const a=fl(i);if(!a||Pc(a,t,n,s,!0))return;const{currentTime:c,volume:l,muted:u,playbackRate:d}=a;e({type:o,id:r.getId(a),currentTime:c,volume:l,muted:u,playbackRate:d})})),i.media||500))),c=[xc("play",a(0),o),xc("pause",a(1),o),xc("seeked",a(2),o),xc("volumechange",a(3),o),xc("ratechange",a(4),o)];return dl((()=>{c.forEach((e=>e()))}))}(e);let u=()=>{},d=()=>{},h=()=>{},p=()=>{};e.recordDOM&&(u=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:s}){if(!s.CSSStyleSheet||!s.CSSStyleSheet.prototype)return()=>{};const r=s.CSSStyleSheet.prototype.insertRule;s.CSSStyleSheet.prototype.insertRule=new Proxy(r,{apply:dl(((s,r,i)=>{const[o,a]=i,{id:c,styleId:l}=Sl(r,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:o,index:a}]}),s.apply(r,i)}))});const i=s.CSSStyleSheet.prototype.deleteRule;let o,a;s.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:dl(((s,r,i)=>{const[o]=i,{id:a,styleId:c}=Sl(r,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:o}]}),s.apply(r,i)}))}),s.CSSStyleSheet.prototype.replace&&(o=s.CSSStyleSheet.prototype.replace,s.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:dl(((s,r,i)=>{const[o]=i,{id:a,styleId:c}=Sl(r,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replace:o}),s.apply(r,i)}))})),s.CSSStyleSheet.prototype.replaceSync&&(a=s.CSSStyleSheet.prototype.replaceSync,s.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:dl(((s,r,i)=>{const[o]=i,{id:a,styleId:c}=Sl(r,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replaceSync:o}),s.apply(r,i)}))}));const c={};xl("CSSGroupingRule")?c.CSSGroupingRule=s.CSSGroupingRule:(xl("CSSMediaRule")&&(c.CSSMediaRule=s.CSSMediaRule),xl("CSSConditionRule")&&(c.CSSConditionRule=s.CSSConditionRule),xl("CSSSupportsRule")&&(c.CSSSupportsRule=s.CSSSupportsRule));const l={};return Object.entries(c).forEach((([s,r])=>{l[s]={insertRule:r.prototype.insertRule,deleteRule:r.prototype.deleteRule},r.prototype.insertRule=new Proxy(l[s].insertRule,{apply:dl(((s,r,i)=>{const[o,a]=i,{id:c,styleId:l}=Sl(r.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:o,index:[...vl(r),a||0]}]}),s.apply(r,i)}))}),r.prototype.deleteRule=new Proxy(l[s].deleteRule,{apply:dl(((s,r,i)=>{const[o]=i,{id:a,styleId:c}=Sl(r.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:[...vl(r),o]}]}),s.apply(r,i)}))})})),dl((()=>{s.CSSStyleSheet.prototype.insertRule=r,s.CSSStyleSheet.prototype.deleteRule=i,o&&(s.CSSStyleSheet.prototype.replace=o),a&&(s.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=l[e].insertRule,t.prototype.deleteRule=l[e].deleteRule}))}))}(e,{win:n}),d=wl(e,e.doc),h=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:s},{win:r}){const i=r.CSSStyleDeclaration.prototype.setProperty;r.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:dl(((r,o,a)=>{const[c,l,u]=a;if(n.has(c))return i.apply(o,[c,l,u]);const{id:d,styleId:h}=Sl(hl([o,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,s.styleMirror);return(d&&-1!==d||h&&-1!==h)&&e({id:d,styleId:h,set:{property:c,value:l,priority:u},index:vl(o.parentRule)}),r.apply(o,a)}))});const o=r.CSSStyleDeclaration.prototype.removeProperty;return r.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:dl(((r,i,a)=>{const[c]=a;if(n.has(c))return o.apply(i,[c]);const{id:l,styleId:u}=Sl(hl([i,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,s.styleMirror);return(l&&-1!==l||u&&-1!==u)&&e({id:l,styleId:u,remove:{property:c},index:vl(i.parentRule)}),r.apply(i,a)}))}),dl((()=>{r.CSSStyleDeclaration.prototype.setProperty=i,r.CSSStyleDeclaration.prototype.removeProperty=o}))}(e,{win:n}),e.collectFonts&&(p=function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const s=[],r=new WeakMap,i=n.FontFace;n.FontFace=function(e,t,n){const s=new i(e,t,n);return r.set(s,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),s};const o=Rc(t.fonts,"add",(function(t){return function(n){return Xc(dl((()=>{const t=r.get(n);t&&(e(t),r.delete(n))})),0),t.apply(this,[n])}}));return s.push((()=>{n.FontFace=i})),s.push(o),dl((()=>{s.forEach((e=>e()))}))}(e)));const f=function(e){const{doc:t,mirror:n,blockClass:s,blockSelector:r,unblockSelector:i,selectionCb:o}=e;let a=!0;const c=dl((()=>{const e=t.getSelection();if(!e||a&&hl([e,"optionalAccess",e=>e.isCollapsed]))return;a=e.isCollapsed||!1;const c=[],l=e.rangeCount||0;for(let t=0;t<l;t++){const o=e.getRangeAt(t),{startContainer:a,startOffset:l,endContainer:u,endOffset:d}=o;Pc(a,s,r,i,!0)||Pc(u,s,r,i,!0)||c.push({start:n.getId(a),startOffset:l,end:n.getId(u),endOffset:d})}o({ranges:c})}));return c(),xc("selectionchange",c)}(e),m=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?Rc(n.customElements,"define",(function(e){return function(n,s,r){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,s,r])}})):()=>{}}(e),g=[];for(const t of e.plugins)g.push(t.observer(t.callback,n,t.options));return dl((()=>{pl.forEach((e=>e.reset())),hl([s,"optionalAccess",e=>e.disconnect,"call",e=>e()]),r(),i(),o(),a(),c(),l(),u(),d(),h(),p(),f(),m(),g.forEach((e=>e()))}))}function El(e){return void 0!==window[e]}function xl(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Tl{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,s){const r=n||this.getIdToRemoteIdMap(e),i=s||this.getRemoteIdToIdMap(e);let o=r.get(t);return o||(o=this.generateIdFn(),r.set(t,o),i.set(o,t)),o}getIds(e,t){const n=this.getIdToRemoteIdMap(e),s=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,s)))}getRemoteId(e,t,n){const s=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;return s.get(t)||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function Il(e){let t,n=e[0],s=1;for(;s<e.length;){const r=e[s],i=e[s+1];if(s+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(t=n,n=i(n)):"call"!==r&&"optionalCall"!==r||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}class Cl{constructor(){this.crossOriginIframeMirror=new Tl(rc),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Ml{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Tl(rc),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Tl(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),Il([this,"access",e=>e.loadListener,"optionalCall",t=>t(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const s=this.transformCrossOriginEvent(n,t.data.event);s&&this.wrappedEmit(s,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case Yc.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:Yc.IncrementalSnapshot,data:{source:Jc.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Yc.Meta:case Yc.Load:case Yc.DomContentLoaded:return!1;case Yc.Plugin:return t;case Yc.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case Yc.IncrementalSnapshot:switch(t.data.source){case Jc.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Jc.Drag:case Jc.TouchMove:case Jc.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Jc.ViewportResize:return!1;case Jc.MediaInteraction:case Jc.MouseInteraction:case Jc.Scroll:case Jc.CanvasMutation:case Jc.Input:return this.replaceIds(t.data,e,["id"]),t;case Jc.StyleSheetRule:case Jc.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case Jc.Font:return t;case Jc.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case Jc.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),Il([t,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",t=>t((t=>{this.replaceStyleIds(t,e,["styleId"])}))]),t}}return!1}replace(e,t,n,s){for(const r of s)(Array.isArray(t[r])||"number"==typeof t[r])&&(Array.isArray(t[r])?t[r]=e.getIds(n,t[r]):t[r]=e.getId(n,t[r]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===Fa.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class Rl{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Nl{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!ja(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e),this.bypassOptions.canvasManager.addShadowRoot(e);const n=ml({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(gl({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),Xc((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(wl({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(Rc(e.prototype,"attachShadow",(function(e){return function(s){const r=e.call(this,s);return this.shadowRoot&&Wc(this)&&n.addShadowRoot(this.shadowRoot,t),r}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}class Ol{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class Al{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new zc,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},s=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),s.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:Ua(e),index:t})))})),n.styleIds.push(e)}s.length>0&&(n.styles=s),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Dl{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.active||(this.active=!0,function(...e){Gc("requestAnimationFrame")(...e)}((()=>{this.nodeMap=new WeakMap,this.active=!1}))),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}}let Ll,Pl;try{if(2!==Array.from([1],(e=>2*e))[0]){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=vi([e,"access",e=>e.contentWindow,"optionalAccess",e=>e.Array,"access",e=>e.from])||Array.from,document.body.removeChild(e)}}catch(vm){console.debug("Unable to override Array.from",vm)}const Fl=new Ha;function $l(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:s,blockClass:r="rr-block",blockSelector:i=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:l=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:h=null,unmaskTextSelector:p=null,inlineStylesheet:f=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:y,maskAttributeFn:_,maskInputFn:b,maskTextFn:v,maxCanvasSize:S=null,packFn:w,sampling:k={},dataURLOptions:E={},mousemoveWait:x,recordDOM:T=!0,recordCanvas:I=!1,recordCrossOriginIframes:C=!1,recordAfter:M=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:R=!1,collectFonts:N=!1,inlineImages:O=!1,plugins:A,keepIframeSrcFn:D=()=>!1,ignoreCSSAttributes:L=new Set([]),errorHandler:P,onMutation:F,getCanvasManager:$}=e;ll(P);const j=!C||window.parent===window;let B=!1;if(!j)try{window.parent.document&&(B=!1)}catch(e){B=!0}if(j&&!t)throw new Error("emit function is required");if(!j&&!B)return()=>{};void 0!==x&&void 0===k.mousemove&&(k.mousemove=x),Fl.reset();const U=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==g?g:{},H=!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===y,headMetaDescKeywords:"all"===y}:y||{};let z;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let q=0;const W=e=>{for(const t of A||[])t.eventProcessor&&(e=t.eventProcessor(e));return w&&!B&&(e=w(e)),e};Ll=(e,r)=>{const i=e;if(i.timestamp=Nc(),!vi([pl,"access",e=>e[0],"optionalAccess",e=>e.isFrozen,"call",e=>e()])||i.type===Yc.FullSnapshot||i.type===Yc.IncrementalSnapshot&&i.data.source===Jc.Mutation||pl.forEach((e=>e.unfreeze())),j)vi([t,"optionalCall",e=>e(W(i),r)]);else if(B){const e={type:"rrweb",event:W(i),origin:window.location.origin,isCheckout:r};window.parent.postMessage(e,"*")}if(i.type===Yc.FullSnapshot)z=i,q=0;else if(i.type===Yc.IncrementalSnapshot){if(i.data.source===Jc.Mutation&&i.data.isAttachIframe)return;q++;const e=s&&q>=s,t=n&&z&&i.timestamp-z.timestamp>n;(e||t)&&ee(!0)}};const V=e=>{Ll({type:Yc.IncrementalSnapshot,data:{source:Jc.Mutation,...e}})},G=e=>Ll({type:Yc.IncrementalSnapshot,data:{source:Jc.Scroll,...e}}),X=e=>Ll({type:Yc.IncrementalSnapshot,data:{source:Jc.CanvasMutation,...e}}),Y=new Al({mutationCb:V,adoptedStyleSheetCb:e=>Ll({type:Yc.IncrementalSnapshot,data:{source:Jc.AdoptedStyleSheet,...e}})}),J="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new Cl:new Ml({mirror:Fl,mutationCb:V,stylesheetManager:Y,recordCrossOriginIframes:C,wrappedEmit:Ll});for(const e of A||[])e.getMirror&&e.getMirror({nodeMirror:Fl,crossOriginIframeMirror:J.crossOriginIframeMirror,crossOriginIframeStyleMirror:J.crossOriginIframeStyleMirror});const K=new Dl,Q=function(e,t){try{return e?e(t):new Ol}catch(e){return console.warn("Unable to initialize CanvasManager"),new Ol}}($,{mirror:Fl,win:window,mutationCb:e=>Ll({type:Yc.IncrementalSnapshot,data:{source:Jc.CanvasMutation,...e}}),recordCanvas:I,blockClass:r,blockSelector:i,unblockSelector:o,maxCanvasSize:S,sampling:k.canvas,dataURLOptions:E,errorHandler:P}),Z="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Rl:new Nl({mutationCb:V,scrollCb:G,bypassOptions:{onMutation:F,blockClass:r,blockSelector:i,unblockSelector:o,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:h,unmaskTextSelector:p,inlineStylesheet:f,maskInputOptions:U,dataURLOptions:E,maskAttributeFn:_,maskTextFn:v,maskInputFn:b,recordCanvas:I,inlineImages:O,sampling:k,slimDOMOptions:H,iframeManager:J,stylesheetManager:Y,canvasManager:Q,keepIframeSrcFn:D,processedNodeManager:K},mirror:Fl}),ee=(e=!1)=>{if(!T)return;Ll({type:Yc.Meta,data:{href:window.location.href,width:Dc(),height:Ac()}},e),Y.reset(),Z.init(),pl.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new Ha,blockClass:s="rr-block",blockSelector:r=null,unblockSelector:i=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:l=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:h=!1,recordCanvas:p=!1,maskAllInputs:f=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOM:_=!1,dataURLOptions:b,preserveWhiteSpace:v,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:k,onStylesheetLoad:E,stylesheetLoadTimeout:x,keepIframeSrcFn:T=()=>!1}=t||{};return kc(e,{doc:e,mirror:n,blockClass:s,blockSelector:r,unblockSelector:i,maskAllText:o,maskTextClass:a,unmaskTextClass:c,maskTextSelector:l,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===f?{}:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===_,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===_?{}:_,dataURLOptions:b,inlineImages:h,recordCanvas:p,preserveWhiteSpace:v,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:k,onStylesheetLoad:E,stylesheetLoadTimeout:x,keepIframeSrcFn:T,newlyAddedElement:!1})}(document,{mirror:Fl,blockClass:r,blockSelector:i,unblockSelector:o,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:h,unmaskTextSelector:p,inlineStylesheet:f,maskAllInputs:U,maskAttributeFn:_,maskInputFn:b,maskTextFn:v,slimDOM:H,dataURLOptions:E,recordCanvas:I,inlineImages:O,onSerialize:e=>{Bc(e,Fl)&&J.addIframe(e),Uc(e,Fl)&&Y.trackLinkElement(e),Hc(e)&&Z.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{J.attachIframe(e,t),e.contentWindow&&Q.addWindow(e.contentWindow),Z.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{Y.attachLinkElement(e,t)},keepIframeSrcFn:D});if(!t)return console.warn("Failed to snapshot the document");Ll({type:Yc.FullSnapshot,data:{node:t,initialOffset:Oc(window)}}),pl.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Y.adoptStyleSheets(document.adoptedStyleSheets,Fl.getId(document))};Pl=ee;try{const e=[],t=e=>dl(kl)({onMutation:F,mutationCb:V,mousemoveCb:(e,t)=>Ll({type:Yc.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>Ll({type:Yc.IncrementalSnapshot,data:{source:Jc.MouseInteraction,...e}}),scrollCb:G,viewportResizeCb:e=>Ll({type:Yc.IncrementalSnapshot,data:{source:Jc.ViewportResize,...e}}),inputCb:e=>Ll({type:Yc.IncrementalSnapshot,data:{source:Jc.Input,...e}}),mediaInteractionCb:e=>Ll({type:Yc.IncrementalSnapshot,data:{source:Jc.MediaInteraction,...e}}),styleSheetRuleCb:e=>Ll({type:Yc.IncrementalSnapshot,data:{source:Jc.StyleSheetRule,...e}}),styleDeclarationCb:e=>Ll({type:Yc.IncrementalSnapshot,data:{source:Jc.StyleDeclaration,...e}}),canvasMutationCb:X,fontCb:e=>Ll({type:Yc.IncrementalSnapshot,data:{source:Jc.Font,...e}}),selectionCb:e=>{Ll({type:Yc.IncrementalSnapshot,data:{source:Jc.Selection,...e}})},customElementCb:e=>{Ll({type:Yc.IncrementalSnapshot,data:{source:Jc.CustomElement,...e}})},blockClass:r,ignoreClass:a,ignoreSelector:c,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:h,unmaskTextSelector:p,maskInputOptions:U,inlineStylesheet:f,sampling:k,recordDOM:T,recordCanvas:I,inlineImages:O,userTriggeredOnInput:R,collectFonts:N,doc:e,maskAttributeFn:_,maskInputFn:b,maskTextFn:v,keepIframeSrcFn:D,blockSelector:i,unblockSelector:o,slimDOMOptions:H,dataURLOptions:E,mirror:Fl,iframeManager:J,stylesheetManager:Y,shadowDomManager:Z,processedNodeManager:K,canvasManager:Q,ignoreCSSAttributes:L,plugins:vi([A,"optionalAccess",e=>e.filter,"call",e=>e((e=>e.observer)),"optionalAccess",e=>e.map,"call",e=>e((e=>({observer:e.observer,options:e.options,callback:t=>Ll({type:Yc.Plugin,data:{plugin:e.name,payload:t}})})))])||[]},{});J.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{ee(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(xc("DOMContentLoaded",(()=>{Ll({type:Yc.DomContentLoaded,data:{}}),"DOMContentLoaded"===M&&n()}))),e.push(xc("load",(()=>{Ll({type:Yc.Load,data:{}}),"load"===M&&n()}),window))),()=>{e.forEach((e=>e())),K.destroy(),Pl=void 0,ul()}}catch(e){console.warn(e)}}$l.mirror=Fl,$l.takeFullSnapshot=function(e){if(!Pl)throw new Error("please take full snapshot after start recording");Pl(e)};const jl="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Bl=["info","warn","error","log"],Ul="[Replay] ";function Hl(e,t="info"){Ds({category:"console",data:{logger:"replay"},level:t,message:`${Ul}${e}`},{level:t})}const zl=function(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:n=>{e=n.captureExceptions,t=n.traceInternals}};return jl?(Bl.forEach((e=>{n[e]=(...n)=>{l[e](Ul,...n),t&&Hl(n.join(""),zs(e))}})),n.exception=(s,...r)=>{r.length&&n.error&&n.error(...r),l.error(Ul,s),e?Zt(s):t&&Hl(s,"error")},n.infoTick=(...e)=>{l.info(Ul,...e),t&&setTimeout((()=>Hl(e[0])),0)}):Bl.forEach((e=>{n[e]=()=>{}})),n}(),ql=3;function Wl(e){return e>9999999999?e:1e3*e}function Vl(e){return e>9999999999?e/1e3:e}function Gl(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:Yc.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:Xe(t,10,1e3)}}),"console"===t.category))))}const Xl="button,a";function Yl(e){return e.closest(Xl)||e}function Jl(e){const t=Kl(e);return t&&t instanceof Element?Yl(t):t}function Kl(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let Ql;const Zl=new Set([Jc.Mutation,Jc.StyleSheetRule,Jc.StyleDeclaration,Jc.AdoptedStyleSheet,Jc.CanvasMutation,Jc.Selection,Jc.MediaInteraction]);class eu{constructor(e,t,n=Gl){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=(t=()=>{this._lastMutation=nu()},Ql||(Ql=[],A(Ca,"open",(function(e){return function(...t){if(Ql)try{Ql.forEach((e=>e()))}catch(e){}return e.apply(Ca,t)}}))),Ql.push(t),()=>{const e=Ql?Ql.indexOf(t):-1;e>-1&&Ql.splice(e,1)});var t;this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){return!tu.includes(e.tagName)||("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||"")||(!("A"!==e.tagName||!(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))||!(!t||!e.matches(t))))}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:Vl(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=Vl(e)}registerScroll(e=Date.now()){this._lastScroll=Vl(e)}registerClick(e){const t=Yl(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=nu();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,s=e.mutationAfter&&e.mutationAfter<=this._threshold,r=!n&&!s,{clickCount:i,clickBreadcrumb:o}=e;if(r){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),s=n<1e3*this._timeout?"mutation":"timeout",r={type:"default",message:o.message,timestamp:o.timestamp,category:"ui.slowClickDetected",data:{...o.data,url:Ca.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:s,clickCount:i||1}};this._addBreadcrumbEvent(t,r)}else if(i>1){const e={type:"default",message:o.message,timestamp:o.timestamp,category:"ui.multiClick",data:{...o.data,url:Ca.location.href,route:t.getCurrentRoute(),clickCount:i,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Lr((()=>this._checkClicks()),1e3)}}const tu=["A","BUTTON","INPUT"];function nu(){return Date.now()/1e3}function su(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var ru;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(ru||(ru={}));const iu=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function ou(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(iu.has(n)){let s=n;"data-testid"!==n&&"data-test-id"!==n||(s="testId"),t[s]=e[n]}return t}function au(e,t){const n=$l.mirror.getId(e),s=n&&$l.mirror.getNode(n),r=s&&$l.mirror.getMeta(s),i=r&&function(e){return e.type===ru.Element}(r)?r:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map((e=>e.type===ru.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:ou(i.attributes)}}:{}}}const cu={resource:function(e){const{entryType:t,initiatorType:n,name:s,responseEnd:r,startTime:i,decodedBodySize:o,encodedBodySize:a,responseStatus:c,transferSize:l}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:du(i),end:du(r),name:s,data:{size:l,statusCode:c,decodedBodySize:o,encodedBodySize:a}}},paint:function(e){const{duration:t,entryType:n,name:s,startTime:r}=e,i=du(r);return{type:n,name:s,start:i,end:i+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:s,duration:r,domComplete:i,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:l,loadEventStart:u,loadEventEnd:d,redirectCount:h,startTime:p,transferSize:f,type:m}=e;return 0===r?null:{type:`${t}.${m}`,start:du(p),end:du(i),name:n,data:{size:f,decodedBodySize:s,encodedBodySize:o,duration:r,domInteractive:l,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:u,loadEventEnd:d,domComplete:i,redirectCount:h}}}};function lu(e,t){return({metric:n})=>{t.replayPerformanceEntries.push(e(n))}}function uu(e){const t=cu[e.entryType];return t?t(e):null}function du(e){return((se||Ca.performance.timeOrigin)+e)/1e3}function hu(e){const t=e.entries[e.entries.length-1];return yu(e,"largest-contentful-paint",t&&t.element?[t.element]:void 0)}function pu(e){return void 0!==e.sources}function fu(e){const t=[],n=[];for(const s of e.entries)if(pu(s)){const e=[];for(const t of s.sources)if(t.node){n.push(t.node);const s=$l.mirror.getId(t.node);s&&e.push(s)}t.push({value:s.value,nodeIds:e.length?e:void 0})}return yu(e,"cumulative-layout-shift",n,t)}function mu(e){const t=e.entries[e.entries.length-1];return yu(e,"first-input-delay",t&&t.target?[t.target]:void 0)}function gu(e){const t=e.entries[e.entries.length-1];return yu(e,"interaction-to-next-paint",t&&t.target?[t.target]:void 0)}function yu(e,t,n,s){const r=e.value,i=e.rating,o=du(r);return{type:"web-vital",name:t,start:o,end:o,data:{value:r,size:r,rating:i,nodeIds:n?n.map((e=>$l.mirror.getId(e))):void 0,attributions:s}}}class _u extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class bu{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>Da)throw new _u;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?Wl(e):null}}class vu{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){jl&&zl.info("Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((s,r)=>{const i=({data:t})=>{const o=t;if(o.method===e&&o.id===n){if(this._worker.removeEventListener("message",i),!o.success)return jl&&zl.error("Error in compression worker: ",o.response),void r(new Error("Error in compression worker"));s(o.response)}};this._worker.addEventListener("message",i),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class Su{constructor(e){this._worker=new vu(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=Wl(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>Da?Promise.reject(new _u):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{jl&&zl.exception(e,'Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class wu{constructor(e){this._fallback=new bu,this._compression=new Su(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void(jl&&zl.exception(e,"Failed to load the compression worker, falling back to simple buffer"))}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,n=[];for(const t of e)n.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(n),this._fallback.clear()}catch(e){jl&&zl.exception(e,"Failed to add events when switching buffers.")}}}function ku(){try{return"sessionStorage"in Ca&&!!Ca.sessionStorage}catch(e){return!1}}function Eu(e){return void 0!==e&&Math.random()<e}function xu(e){const t=Date.now();return{id:e.id||H(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function Tu(e){if(ku())try{Ca.sessionStorage.setItem(Ma,JSON.stringify(e))}catch(e){}}function Iu({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:s}={}){const r=function(e,t){return Eu(e)?"session":!!t&&"buffer"}(e,t),i=xu({sampled:r,previousSessionId:s});return n&&Tu(i),i}function Cu(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function Mu(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:s=Date.now()}){return Cu(e.started,t,s)||Cu(e.lastActivity,n,s)}function Ru(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!Mu(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function Nu({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},s){const r=s.stickySession&&function(){if(!ku())return null;try{const e=Ca.sessionStorage.getItem(Ma);if(!e)return null;const t=JSON.parse(e);return jl&&zl.infoTick("Loading existing session"),xu(t)}catch(e){return null}}();return r?Ru(r,{sessionIdleExpire:e,maxReplayDuration:t})?(jl&&zl.infoTick("Session in sessionStorage is expired, creating new one..."),Iu(s,{previousSessionId:r.id})):r:(jl&&zl.infoTick("Creating new session"),Iu(s,{previousSessionId:n}))}function Ou(e,t,n){return!!Du(e,t)&&(Au(e,t,n),!0)}async function Au(e,t,n){if(!e.eventBuffer)return null;try{n&&"buffer"===e.recordingMode&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const s=function(e,t){try{if("function"==typeof t&&function(e){return e.type===Yc.Custom}(e))return t(e)}catch(e){return jl&&zl.exception(e,"An error occured in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!s)return;return await e.eventBuffer.addEvent(s)}catch(t){const n=t&&t instanceof _u?"addEventSizeExceeded":"addEvent";e.handleException(t),await e.stop({reason:n});const s=Se();s&&s.recordDroppedEvent("internal_sdk_error","replay")}}function Du(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Wl(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now()||n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration&&(jl&&zl.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),1))}function Lu(e){return!e.type}function Pu(e){return"transaction"===e.type}function Fu(e){return"feedback"===e.type}function $u(e){return!!e.category}function ju(e,t){return t.map((({type:t,start:n,end:s,name:r,data:i})=>{const o=e.throttledAddEvent({type:Yc.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:r,startTimestamp:n,endTimestamp:s,data:i}}});return"string"==typeof o?Promise.resolve(null):o}))}function Bu(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!jl||!e.getOptions()._experiments.traceInternals)&&xa(t,Se())}(e,t.name)||e.addUpdate((()=>(ju(e,[t]),!0))))}function Uu(e){if(!e)return;const t=new TextEncoder;try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Yu(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function Hu(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function zu(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Yu(e)];if(!e)return[void 0]}catch(t){return jl&&zl.exception(t,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return jl&&zl.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function qu(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},s=n.warnings||[];return n.warnings=[...s,t],e._meta=n,e}function Wu(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:s,url:r,method:i,statusCode:o,request:a,response:c}=t;return{type:e,start:n/1e3,end:s/1e3,name:r,data:B({method:i,statusCode:o,request:a,response:c})}}function Vu(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Gu(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const s={headers:e,size:t},{body:r,warnings:i}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>Oa,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,Oa);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}…`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return s.body=r,i&&i.length>0&&(s._meta={warnings:i}),s}function Xu(e,t){return Object.entries(e).reduce(((n,[s,r])=>{const i=s.toLowerCase();return t.includes(i)&&e[s]&&(n[i]=r),n}),{})}function Yu(e){return new URLSearchParams(e).toString()}function Ju(e,t){const n=function(e,t=Ca.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Ca.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const s=n.href;return!e.endsWith("/")&&s.endsWith("/")?s.slice(0,-1):s}(e);return O(n,t)}function Ku(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function Qu(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function Zu(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Qu(n,t):Array.isArray(n)?{}:Xu(n,t):{}}function ed(e){const t=Se();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:s,networkCaptureBodies:r,networkRequestHeaders:i,networkResponseHeaders:o}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:s,networkCaptureBodies:r,networkRequestHeaders:i,networkResponseHeaders:o};t&&t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(t.data)try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(function(e,t){const{xhr:n,input:s}=t;if(!n)return;const r=Uu(s),i=n.getResponseHeader("content-length")?Hu(n.getResponseHeader("content-length")):function(e,t){try{return Uu("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e)}catch(e){return}}(n.response,n.responseType);void 0!==r&&(e.data.request_body_size=r),void 0!==i&&(e.data.response_body_size=i)}(t,n),async function(e,t,n){try{const s=function(e,t,n){const s=Date.now(),{startTimestamp:r=s,endTimestamp:i=s,input:o,xhr:a}=t,{url:c,method:l,status_code:u=0,request_body_size:d,response_body_size:h}=e.data;if(!c)return null;if(!a||!Ju(c,n.networkDetailAllowUrls)||Ju(c,n.networkDetailDenyUrls))return{startTimestamp:r,endTimestamp:i,url:c,method:l,statusCode:u,request:Vu(d),response:Vu(h)};const p=a[Rs],f=p?Xu(p.request_headers,n.networkRequestHeaders):{},m=Xu(function(e){const t=e.getAllResponseHeaders();return t?t.split("\r\n").reduce(((e,t)=>{const[n,s]=t.split(": ");return s&&(e[n.toLowerCase()]=s),e}),{}):{}}(a),n.networkResponseHeaders),[g,y]=n.networkCaptureBodies?zu(o):[void 0],[_,b]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return jl&&zl.exception(t,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return jl&&zl.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return jl&&zl.warn("Failed to get xhr response body",...t),[void 0]}(a):[void 0],v=Gu(f,d,g),S=Gu(m,h,_);return{startTimestamp:r,endTimestamp:i,url:c,method:l,statusCode:u,request:y?qu(v,y):v,response:b?qu(S,b):S}}(e,t,n),r=Wu("resource.xhr",s);Bu(n.replay,r)}catch(e){jl&&zl.exception(e,"Failed to capture xhr breadcrumb")}}(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(function(e,t){const{input:n,response:s}=t,r=Uu(n?Ku(n):void 0),i=s?Hu(s.headers.get("content-length")):void 0;void 0!==r&&(e.data.request_body_size=r),void 0!==i&&(e.data.response_body_size=i)}(t,n),async function(e,t,n){try{const s=await async function(e,t,n){const s=Date.now(),{startTimestamp:r=s,endTimestamp:i=s}=t,{url:o,method:a,status_code:c=0,request_body_size:l,response_body_size:u}=e.data,d=Ju(o,n.networkDetailAllowUrls)&&!Ju(o,n.networkDetailDenyUrls),h=d?function({networkCaptureBodies:e,networkRequestHeaders:t},n,s){const r=n?(o=t,1===(i=n).length&&"string"!=typeof i[0]?Zu(i[0],o):2===i.length?Zu(i[1],o):{}):{};var i,o;if(!e)return Gu(r,s,void 0);const a=Ku(n),[c,l]=zu(a),u=Gu(r,s,c);return l?qu(u,l):u}(n,t.input,l):Vu(l),p=await async function(e,{networkCaptureBodies:t,networkResponseHeaders:n},s,r){if(!e&&void 0!==r)return Vu(r);const i=s?Qu(s.headers,n):{};if(!s||!t&&void 0!==r)return Gu(i,r,void 0);const[o,a]=await async function(e){const t=function(e){try{return e.clone()}catch(e){jl&&zl.exception(e,"Failed to clone response body")}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const s=Lr((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(s)))}))}(t);return[e]}catch(e){return e instanceof Error&&e.message.indexOf("Timeout")>-1?(jl&&zl.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(jl&&zl.exception(e,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}(s),c=function(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:s,headers:r}){try{const i=e&&e.length&&void 0===n?Uu(e):n;return s?Gu(r,i,t?e:void 0):Vu(i)}catch(e){return jl&&zl.exception(e,"Failed to serialize response body"),Gu(r,n,void 0)}}(o,{networkCaptureBodies:t,responseBodySize:r,captureDetails:e,headers:i});return a?qu(c,a):c}(d,n,t.response,u);return{startTimestamp:r,endTimestamp:i,url:o,method:a,statusCode:c,request:h,response:p}}(e,t,n),r=Wu("resource.fetch",s);Bu(n.replay,r)}catch(e){jl&&zl.exception(e,"Failed to capture fetch breadcrumb")}}(t,n,e))}catch(e){jl&&zl.exception(e,"Error when enriching network breadcrumb")}}(a,e,t)))}catch(e){}}function td(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:s}=e,r=Date.now()/1e3;return{type:"memory",name:"memory",start:r,end:r,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:s}}}}function nd(e){let t=!1;return(n,s)=>{if(!e.checkAndHandleExpiredSession())return void(jl&&zl.warn("Received replay event after session expired."));const r=s||!t;t=!0,e.clickDetector&&function(e,t){try{if(!function(e){return e.type===ql}(t))return;const{source:n}=t.data;if(Zl.has(n)&&e.registerMutation(t.timestamp),n===Jc.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===Jc.MouseInteraction}(t)){const{type:n,id:s}=t.data,r=$l.mirror.getNode(s);r instanceof HTMLElement&&n===Kc.Click&&e.registerClick(r)}}catch(e){}}(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&r&&e.setInitialState(),!Ou(e,n,r))return!0;if(!r)return!1;const t=e.session;if(function(e,t){t&&e.session&&0===e.session.segmentId&&Ou(e,function(e){const t=e.getOptions();return{type:Yc.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,r),"buffer"===e.recordingMode&&t&&e.eventBuffer){const n=e.eventBuffer.getEarliestTimestamp();n&&(jl&&zl.info(`Updating session start time to earliest event in buffer to ${new Date(n)}`),t.started=n,e.getOptions().stickySession&&Tu(t))}return t&&t.previousSessionId||"session"===e.recordingMode&&e.flush(),!0}))}}class sd extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class rd extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function id(e,t={count:0,interval:5e3}){const{recordingData:n,onError:s}=e;if(n.length)try{return await async function({recordingData:e,replayId:t,segmentId:n,eventContext:s,timestamp:r,session:i}){const o=function({recordingData:e,headers:t}){let n;const s=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${s}${e}`;else{const t=(new TextEncoder).encode(s);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:l,initialTimestamp:u}=s,d=Se(),h=ge(),p=d&&d.getTransport(),f=d&&d.getDsn();if(!(d&&p&&f&&i.sampled))return Qe({});const m={type:Ra,replay_start_timestamp:u/1e3,timestamp:r/1e3,error_ids:c,trace_ids:l,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},g=await async function({client:e,scope:t,replayId:n,event:s}){const r={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit("preprocessEvent",s,r);const i=await Jt(e.getOptions(),s,r,t,e,ye());if(!i)return null;i.platform=i.platform||"javascript";const o=e.getSdkMetadata(),{name:a,version:c}=o&&o.sdk||{};return i.sdk={...i.sdk,name:a||"sentry.javascript.unknown",version:c||"0.0.0"},i}({scope:h,client:d,replayId:t,event:m});if(!g)return d.recordDroppedEvent("event_processor","replay",m),jl&&zl.info("An event processor returned `null`, will not send event."),Qe({});delete g.sdkProcessingMetadata;const y=function(e,t,n,s){return Bn(Kn(e,Jn(e),s,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(g,o,f,d.getOptions().tunnel);let _;try{_=await p.send(y)}catch(e){const t=new Error(Na);try{t.cause=e}catch(e){}throw t}if("number"==typeof _.statusCode&&(_.statusCode<200||_.statusCode>=300))throw new sd(_.statusCode);const b=jr({},_);if($r(b,"replay"))throw new rd(b);return _}(e),!0}catch(n){if(n instanceof sd||n instanceof rd)throw n;if(nn("Replays",{_retryCount:t.count}),s&&s(n),t.count>=3){const e=new Error(`${Na} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise(((n,s)=>{Lr((async()=>{try{await id(e,t),n(!0)}catch(e){s(e)}}),t.interval)}))}}const od="__THROTTLED";class ad{constructor({options:e,recordingOptions:t}){ad.prototype.__init.call(this),ad.prototype.__init2.call(this),ad.prototype.__init3.call(this),ad.prototype.__init4.call(this),ad.prototype.__init5.call(this),ad.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let s,r,i;const o=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),s=e(),s}function c(){void 0!==r&&clearTimeout(r),void 0!==i&&clearTimeout(i),r=i=void 0}function l(){return r&&clearTimeout(r),r=Lr(a,t),o&&void 0===i&&(i=Lr(a,o)),s}return l.cancel=c,l.flush=function(){return void 0!==r||void 0!==i?a():s},l}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=function(e,t,n){const s=new Map;let r=!1;return(...i)=>{const o=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;s.forEach(((e,n)=>{n<t&&s.delete(n)}))})(o),[...s.values()].reduce(((e,t)=>e+t),0)>=t){const e=r;return r=!0,e?"__SKIPPED":od}r=!1;const a=s.get(o)||0;return s.set(o,a+1),e(...i)}}(((e,t)=>function(e,t,n){return Du(e,t)?Au(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:s}=this.getOptions(),r=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:s?s.join(","):""}:void 0;if(r&&(this.clickDetector=new eu(this,r)),jl){const t=e._experiments;zl.setConfig({captureExceptions:!!t.captureExceptions,traceInternals:!!t.traceInternals})}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}handleException(e){jl&&zl.exception(e),this._options.onError&&this._options.onError(e)}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options,s=t<=0&&n<=0;this._requiresManualStart=s,s||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",jl&&zl.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording()):jl&&zl.exception(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)return void(jl&&zl.info("Recording is already in progress"));if(this._isEnabled&&"buffer"===this.recordingMode)return void(jl&&zl.info("Buffering is in progress, call `flush()` to save the replay"));jl&&zl.infoTick("Starting replay in session mode"),this._updateUserActivity();const e=Nu({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)return void(jl&&zl.info("Buffering is in progress, call `flush()` to save the replay"));jl&&zl.infoTick("Starting replay in buffer mode");const e=Nu({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=$l({...this._recordingOptions,..."buffer"===this.recordingMode?{checkoutEveryNms:6e4}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:nd(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this.handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this.handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{jl&&zl.info("Stopping Replay"+(t?` triggered by ${t}`:"")),function(){const e=ge().getPropagationContext().dsc;e&&delete e.replay_id;const t=Ht();t&&delete Vt(t).replay_id}(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,n=this,function(){if(ku())try{Ca.sessionStorage.removeItem(Ma)}catch(e){}}(),n.session=void 0}catch(e){this.handleException(e)}}var n}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),jl&&zl.info("Pausing replay"))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),jl&&zl.info("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();jl&&zl.info("Converting buffer to session"),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&Cu(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${Ca.location.pathname}${Ca.location.hash}${Ca.location.search}`,t=`${Ca.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===od){const e=su({category:"replay.throttled"});this.addUpdate((()=>!Ou(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastActiveSpan||Ht(),t=e&&Ut(e),n=(t&&Dt(t).data||{})[lt];if(t&&n&&["route","custom"].includes(n))return Dt(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=function({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||("undefined"!=typeof __SENTRY_EXCLUDE_REPLAY_WORKER__&&__SENTRY_EXCLUDE_REPLAY_WORKER__?"":function(){const e=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=A(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},U=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=x(f,15),M=b.t,E=b.l,A=x(h,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=C[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(a[t]^a[t+1]<<A^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=U(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=U(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(J)return J.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),a=0,s=function(t){i[a++]=t},o=0;o<e;++o){if(a+5>i.length){var f=new t(a+8+(e-o<<1));f.set(i),i=f}var h=n.charCodeAt(o);h<128||r?s(h):h<2048?(s(192|h>>6),s(128|63&h)):h>55295&&h<57344?(s(240|(h=65536+(1047552&h)|1023&n.charCodeAt(++o))>>18),s(128|h>>12&63),s(128|h>>6&63),s(128|63&h)):(s(224|h>>12),s(128|h>>6&63),s(128|63&h))}return b(i,0,a)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(e)}());if(!t)return;jl&&zl.info("Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new wu(n)}catch(e){jl&&zl.exception(e,"Failed to create compression worker")}}(t);if(e)return e}return jl&&zl.info("Using simple buffer"),new bu}({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=Nu({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!Ru(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{Ca.document.addEventListener("visibilitychange",this._handleVisibilityChange),Ca.addEventListener("blur",this._handleWindowBlur),Ca.addEventListener("focus",this._handleWindowFocus),Ca.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(function(e){const t=Se();Is((e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,s=null;try{s=t?Jl(e.event):Kl(e.event),n=x(s,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:s,message:n}}(e);return su({category:`ui.${e.name}`,...au(t,n)})}(t);if(!n)return;const s="click"===t.name,r=s?t.event:void 0;var i,o,a;!(s&&e.clickDetector&&r&&r.target)||r.altKey||r.metaKey||r.ctrlKey||r.shiftKey||(i=e.clickDetector,o=n,a=Jl(t.event),i.handleClick(o,a)),Gl(e,n)})(e)),$n(function(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,s=Date.now()/1e3;return{type:"navigation.push",start:s,end:s,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(ju(e,[n]),!1))))}}(e)),function(e){const t=Se();t&&t.on("beforeAddBreadcrumb",(t=>function(e,t){if(!e.isEnabled()||!$u(t))return;const n=function(e){return!$u(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:"console"===e.category?function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return su(e);let n=!1;const s=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>Aa?(n=!0,`${e.slice(0,Aa)}…`):e;if("object"==typeof e)try{const t=Xe(e,7);return JSON.stringify(t).length>Aa?(n=!0,`${JSON.stringify(t,null,2).slice(0,Aa)}…`):t}catch(e){}return e}));return su({...e,data:{...e.data,arguments:s,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(e):su(e)}(t);n&&Gl(e,n)}(e,t)))}(e),ed(e),pn(function(e){return Object.assign(((t,n)=>{if(!e.isEnabled()||e.isPaused())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!Lu(t)&&!Pu(t)&&!Fu(t))return t;if(!e.checkAndHandleExpiredSession())return t;if(Fu(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:Yc.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,n)&&!e.getOptions()._experiments.captureExceptions)return jl&&zl.log("Ignoring error from rrweb internals",t),null;const s=function(e,t){return"buffer"===e.recordingMode&&t.message!==Na&&!(!t.exception||t.type)&&Eu(e.getOptions().errorSampleRate)}(e,t);return(s||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),t}),{id:"Replay"})}(e)),t&&(t.on("beforeSendEvent",function(e){return t=>{e.isEnabled()&&Lu(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0]&&t.exception.values[0].value;"string"==typeof n&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))&&Gl(e,su({category:"replay.hydrate-error",data:{url:I()}}))}(e,t)}}(e)),t.on("afterSendEvent",function(e){return(t,n)=>{if(!e.isEnabled()||!Lu(t)&&!Pu(t))return;const s=n&&n.statusCode;!s||s<200||s>=300||(Pu(t)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,t):function(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),"buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:s}=e.getOptions();("function"!=typeof s||s(t))&&Lr((async()=>{try{await e.sendBufferedReplayOrFlush()}catch(t){e.handleException(t)}}))}(e,t))}}(e)),t.on("createDsc",(t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)})),t.on("spanStart",(t=>{e.lastActiveSpan=t})),t.on("spanEnd",(t=>{e.lastActiveSpan=t})),t.on("beforeSendFeedback",((t,n)=>{const s=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&s&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=s)})))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this.handleException(e)}this._performanceCleanupCallback=function(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const s=[];return["navigation","paint","resource"].forEach((e=>{s.push(po(e,n))})),s.push(lo(lu(hu,e)),co(lu(fu,e)),uo(lu(mu,e)),ho(lu(gu,e))),()=>{s.forEach((e=>e()))}}(this)}_removeListeners(){try{Ca.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Ca.removeEventListener("blur",this._handleWindowBlur),Ca.removeEventListener("focus",this._handleWindowFocus),Ca.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this.handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===Ca.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=su({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=su({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{!function(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:s,altKey:r,key:i,target:o}=e;if(!o||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(o)||!i)return null;const a=t||s||r,c=1===i.length;if(!a&&c)return null;const l=x(o,{maxStringLength:200})||"<unknown>";return su({category:"ui.keyDown",message:l,data:{...au(o,l).data,metaKey:t,shiftKey:n,ctrlKey:s,altKey:r,key:i}})}(t);n&&Gl(e,n)}(this,e)}}_doChangeToBackgroundTasks(e){this.session&&(Mu(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush()))}_doChangeToForegroundTasks(e){this.session&&(this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):jl&&zl.info("Document has become active, but session has expired"))}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:Yc.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){let e=(t=this.performanceEntries,t.map(uu).filter(Boolean)).concat(this.replayPerformanceEntries);var t;if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const t=this._context.initialTimestamp/1e3;e=e.filter((e=>e.start>=t))}return Promise.all(ju(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t||this._requiresManualStart)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(ju(e,[td(Ca.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession();const r=await this.eventBuffer.finish();await id({replayId:e,recordingData:r,segmentId:s,eventContext:n,session:this.session,timestamp:t,onError:e=>this.handleException(e)})}catch(e){this.handleException(e),this.stop({reason:"sendReplay"});const t=Se();if(t){const n=e instanceof rd?"ratelimit_backoff":"send_error";t.recordDroppedEvent(n,"replay")}}}else jl&&zl.error("No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(jl&&zl.error("Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const s=n<this._options.minReplayDuration,r=n>this._options.maxReplayDuration+5e3;if(s||r)return jl&&zl.info(`Session duration (${Math.floor(n/1e3)}s) is too ${s?"short":"long"}, not sending replay.`),void(s&&this._debouncedFlush());const i=this.eventBuffer;i&&0===this.session.segmentId&&!i.hasCheckout&&jl&&zl.info("Flushing initial segment without checkout.");const o=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(e){this.handleException(e)}finally{this._flushLock=void 0,o&&this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Tu(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,s=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||s){const e=su({category:"replay.mutations",data:{count:t,limit:s}});this._createCustomBreadcrumb(e)}return!s||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function cd(e,t){return[...e,...t].join(",")}const ld='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',ud=["content-length","content-type","accept"];let dd=!1;const hd=e=>new pd(e);class pd{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:s=36e5,stickySession:r=!0,useCompression:i=!0,workerUrl:o,_experiments:a={},maskAllText:c=!0,maskAllInputs:l=!0,blockAllMedia:u=!0,mutationBreadcrumbLimit:d=750,mutationLimit:h=1e4,slowClickTimeout:p=7e3,slowClickIgnoreSelectors:f=[],networkDetailAllowUrls:m=[],networkDetailDenyUrls:g=[],networkCaptureBodies:y=!0,networkRequestHeaders:_=[],networkResponseHeaders:b=[],mask:v=[],maskAttributes:S=["title","placeholder"],unmask:w=[],block:k=[],unblock:E=[],ignore:x=[],maskFn:T,beforeAddRecordingEvent:I,beforeErrorSampling:C,onError:M}={}){this.name=pd.id;const R=function({mask:e,unmask:t,block:n,unblock:s,ignore:r}){return{maskTextSelector:cd(e,[".sentry-mask","[data-sentry-mask]"]),unmaskTextSelector:cd(t,[]),blockSelector:cd(n,[".sentry-block","[data-sentry-block]",'base[href="/"]']),unblockSelector:cd(s,[]),ignoreSelector:cd(r,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}({mask:v,unmask:w,block:k,unblock:E,ignore:x});if(this._recordingOptions={maskAllInputs:l,maskAllText:c,maskInputOptions:{password:!0},maskTextFn:T,maskInputFn:T,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:s,privacyOptions:r,value:i}){return s?r.unmaskTextSelector&&e.matches(r.unmaskTextSelector)?i:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i:i}({maskAttributes:S,maskAllText:c,privacyOptions:R,key:e,value:t,el:n}),...R,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(s,36e5),stickySession:r,useCompression:i,workerUrl:o,blockAllMedia:u,maskAllInputs:l,maskAllText:c,mutationBreadcrumbLimit:d,mutationLimit:h,slowClickTimeout:p,slowClickIgnoreSelectors:f,networkDetailAllowUrls:m,networkDetailDenyUrls:g,networkCaptureBodies:y,networkRequestHeaders:fd(_),networkResponseHeaders:fd(b),beforeAddRecordingEvent:I,beforeErrorSampling:C,onError:M,_experiments:a},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${ld}`:ld),this._isInitialized&&Ia())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return dd}set _isInitialized(e){dd=e}afterAllSetup(e){Ia()&&!this._replay&&(this._setup(e),this._initialize(e))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}getRecordingMode(){if(this._replay&&this._replay.isEnabled())return this._replay.recordingMode}_initialize(e){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(e),this._replay.initializeSampling())}_setup(e){const t=function(e,t){const n=t.getOptions(),s={sessionSampleRate:0,errorSampleRate:0,...B(e)},r=Zn(n.replaysSessionSampleRate),i=Zn(n.replaysOnErrorSampleRate);return null==r&&null==i&&c((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")})),null!=r&&(s.sessionSampleRate=r),null!=i&&(s.errorSampleRate=i),s}(this._initialOptions,e);this._replay=new ad({options:t,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(e){try{const t=e.getIntegrationByName("ReplayCanvas");if(!t)return;this._replay._canvas=t.getOptions()}catch(e){}}}function fd(e){return[...ud,...e.map((e=>e.toLowerCase()))]}function md(){const e=Se();return e&&e.getIntegrationByName("Replay")}function gd(){Ho()}pd.__initStatic();const yd=(e={})=>{const t=e.levels||o;return{name:"CaptureConsole",setup(e){"console"in r&&Ls((({args:n,level:s})=>{Se()===e&&t.includes(s)&&function(e,t){const n={level:zs(t),extra:{arguments:e}};be((s=>{if(s.addEventProcessor((e=>(e.logger="console",V(e,{handled:!1,type:"console"}),e))),"assert"===t){if(!e[0]){const t=`Assertion failed: ${N(e.slice(1)," ")||"console.assert"}`;s.setExtra("arguments",e.slice(1)),en(t,n)}return}const r=e.find((e=>e instanceof Error));r?Zt(r,n):en(N(e," "),n)}))}(n,s)}))}}};function _d(e,t={},n=ge()){const{message:s,name:r,email:i,url:o,source:a,associatedEventId:c,tags:l}=e,u={contexts:{feedback:B({contact_email:i,name:r,message:s,url:o,source:a,associated_event_id:c})},type:"feedback",level:"info",tags:l},d=n&&n.getClient()||Se();return d&&d.emit("beforeSendFeedback",u,t),n.captureEvent(u,t)}const bd=(e={})=>{const t={debugger:!1,stringify:!1,...e};return{name:"Debug",setup(e){e.on("beforeSendEvent",((e,n)=>{t.debugger,c((()=>{t.stringify?(console.log(JSON.stringify(e,null,2)),n&&Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(e),n&&Object.keys(n).length&&console.log(n))}))}))}}},vd=(e={})=>{const{depth:t=3,captureErrorCause:n=!0}=e;return{name:"ExtraErrorData",processEvent(e,s,r){const{maxValueLength:i=250}=r.getOptions();return function(e,t={},n,s,r){if(!t.originalException||!d(t.originalException))return e;const i=t.originalException.name||t.originalException.constructor.name,o=function(e,t,n){try{const s=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],r={};for(const t of Object.keys(e)){if(-1!==s.indexOf(t))continue;const i=e[t];r[t]=d(i)||"string"==typeof i?M(`${i}`,n):i}if(t&&void 0!==e.cause&&(r.cause=d(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];r[e]=d(n)?n.toString():n}}return r}catch(e){Y&&l.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,s,r);if(o){const t={...e.contexts},s=Xe(o,n);return _(s)&&(D(s,"__sentry_skip_normalization__",!0),t[i]=s),{...e,contexts:t}}return e}(e,s,t,n,i)}}},Sd=function(){return{bindClient(e){ge().setClient(e)},withScope:be,getClient:()=>Se(),getScope:ge,getIsolationScope:ye,captureException:(e,t)=>ge().captureException(e,t),captureMessage:(e,t,n)=>ge().captureMessage(e,t,n),captureEvent:tn,addBreadcrumb:Ds,setUser:cn,setTags:on,setTag:an,setExtra:rn,setExtras:sn,setContext:nn,getIntegration(e){const t=Se();return t&&t.getIntegrationByName(e.id)||null},startSession:fn,endSession:mn,captureSession(e){if(e)return mn();!function(){const e=ge(),t=Se(),n=e.getSession();t&&n&&t.captureSession(n)}()}}};function wd(e,t){let n;return Hn(e,((e,s)=>(t.includes(s)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}function kd(e,t){return n=>{const s=e(n),r=new Map;function i(t,s){const i=s?`${t}:${s}`:t;let o=r.get(i);if(!o){const a=vn(t);if(!a)return;const c=xn(a,n.tunnel);o=s?function(e,t){return n=>{const s=e(n);return{...s,send:async e=>{const n=wd(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),s.send(e)}}}}(e,s)({...n,url:c}):e({...n,url:c}),r.set(i,o)}return[t,o]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){const n=t&&t.length?t:["event"];return wd(e,n)}}).map((e=>"string"==typeof e?i(e,void 0):i(e.dsn,e.release))).filter((e=>!!e)),r=n.length?n:[["",s]];return(await Promise.all(r.map((([t,n])=>n.send(function(e,t){return Bn(t?{...e[0],dsn:t}:e[0],e[1])}(e,t))))))[0]},flush:async function(e){const t=[...r.values(),s];return(await Promise.all(t.map((t=>t.flush(e))))).every((e=>e))}}}}const Ed=new Map,xd=new Set;function Td(e,t){return function(e){if(r._sentryModuleMetadata)for(const t of Object.keys(r._sentryModuleMetadata)){const n=r._sentryModuleMetadata[t];if(xd.has(t))continue;xd.add(t);const s=e(t);for(const e of s.reverse())if(e.filename){Ed.set(e.filename,n);break}}}(e),Ed.get(t)}function Id(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename||n.module_metadata)continue;const t=Td(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}}function Cd(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}const Md=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",(e=>{Hn(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(Cd(t),e[1]=t)}}))})),e.on("applyFrameMetadata",(t=>{t.type||Id(e.getOptions().stackParser,t)}))}});function Rd(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}const Nd=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Od(...e){let t="",n=!1;for(let s=e.length-1;s>=-1&&!n;s--){const r=s>=0?e[s]:"/";r&&(t=`${r}/${t}`,n="/"===r.charAt(0))}return t=function(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const s=e[t];"."===s?e.splice(t,1):".."===s?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}(t.split("/").filter((e=>!!e)),!n).join("/"),(n?"/":"")+t||"."}function Ad(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}const Dd=(e={})=>{const t=e.root,n=e.prefix||"app:///",s="window"in r&&void 0!==r.window,i=e.iteratee||function({isBrowser:e,root:t,prefix:n}){return s=>{if(!s.filename)return s;const r=/^[a-zA-Z]:\\/.test(s.filename)||s.filename.includes("\\")&&!s.filename.includes("/"),i=/^\//.test(s.filename);if(e){if(t){const e=s.filename;0===e.indexOf(t)&&(s.filename=e.replace(t,n))}}else if(r||i){const e=r?s.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):s.filename,i=t?function(e,t){e=Od(e).slice(1),t=Od(t).slice(1);const n=Ad(e.split("/")),s=Ad(t.split("/")),r=Math.min(n.length,s.length);let i=r;for(let e=0;e<r;e++)if(n[e]!==s[e]){i=e;break}let o=[];for(let e=i;e<n.length;e++)o.push("..");return o=o.concat(s.slice(i)),o.join("/")}(t,e):function(e){let t=function(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=Nd.exec(t);return n?n.slice(1):[]}(e)[2]||"";return t}(e);s.filename=`${n}${i}`}return s}}({isBrowser:s,root:t,prefix:n});return{name:"RewriteFrames",processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t&&t.frames&&t.frames.map((e=>i(e)))})}};var t}))}}}catch(t){return e}}(t)),t}}},Ld=()=>{const e=1e3*te();return{name:"SessionTiming",processEvent(t){const n=1e3*te();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}},Pd=e=>({name:"ThirdPartyErrorsFilter",setup(e){e.on("beforeEnvelope",(e=>{Hn(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(Cd(t),e[1]=t)}}))})),e.on("applyFrameMetadata",(t=>{t.type||Id(e.getOptions().stackParser,t)}))},processEvent(t){const n=function(e){const t=Ue(e);if(t)return t.filter((e=>!!e.filename)).map((e=>e.module_metadata?Object.keys(e.module_metadata).filter((e=>e.startsWith(Fd))).map((e=>e.slice(Fd.length))):[]))}(t);if(n){const s=n["drop-error-if-contains-third-party-frames"===e.behaviour||"apply-tag-if-contains-third-party-frames"===e.behaviour?"some":"every"]((t=>!t.some((t=>e.filterKeys.includes(t)))));if(s){if("drop-error-if-contains-third-party-frames"===e.behaviour||"drop-error-if-exclusively-contains-third-party-frames"===e.behaviour)return null;t.tags={...t.tags,third_party_code:!0}}}return t}}),Fd="_sentryBundlerPluginAppKey:";function $d(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function jd(e){const t=new Set;for(const n of e.issues)n.path&&n.path[0]&&t.add(n.path[0]);return`Failed to validate keys: ${M(Array.from(t).join(", "),100)}`}const Bd=(e={})=>{const t=e.limit||10;return{name:"ZodErrors",processEvent:(e,n)=>function(e,t,n){return t.exception&&t.exception.values&&n&&n.originalException&&d(s=n.originalException)&&"ZodError"===s.name&&Array.isArray(s.errors)&&0!==n.originalException.issues.length?{...t,exception:{...t.exception,values:[{...t.exception.values[0],value:jd(n.originalException)},...t.exception.values.slice(1)]},extra:{...t.extra,"zoderror.issues":n.originalException.errors.slice(0,e).map($d)}}:t;var s}(t,e,n)}},Ud={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",debugIntegration:"debug",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",sessionTimingIntegration:"sessiontiming",browserProfilingIntegration:"browserprofiling"},Hd=ys;async function zd(e,t){const n=Ud[e],r=Hd.Sentry=Hd.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);const i=r[e];if("function"==typeof i&&!("_isShim"in i))return i;const o=function(e){const t=Se(),n=t&&t.getOptions(),r=n&&n.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${s}/${e}.min.js`,r).toString()}(n),a=ys.document.createElement("script");a.src=o,a.crossOrigin="anonymous",a.referrerPolicy="origin",t&&a.setAttribute("nonce",t);const c=new Promise(((e,t)=>{a.addEventListener("load",(()=>e())),a.addEventListener("error",t)})),l=ys.document.currentScript,u=ys.document.body||ys.document.head||l&&l.parentElement;if(!u)throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);u.appendChild(a);try{await c}catch(t){throw new Error(`Error when loading integration: ${e}`)}const d=r[e];if("function"!=typeof d)throw new Error(`Could not load integration: ${e}`);return d}const qd=r,Wd=new WeakMap,Vd=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(e){if(Wd.has(Se()))for(const t of e)be((e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let s="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;s=[e.crashId||"",e.reason||""].join(" ").trim()||s}else s=t.body.message||s}en(`${n}: ${s}`)}))}return{name:"ReportingObserver",setupOnce(){"ReportingObserver"in Tn&&new qd.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(e){Wd.set(e,!0)}}},Gd=(e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:"HttpClient",setup(e){!function(e,t){Mn()&&Fs((n=>{if(Se()!==e)return;const{response:s,args:r}=n,[i,o]=r;s&&function(e,t,n,s){if(Kd(e,n.status,n.url)){const e=function(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}(t,s);let r,i,o,a;Zd()&&([r,o]=Xd("Cookie",e),[i,a]=Xd("Set-Cookie",n)),tn(Qd({url:e.url,method:e.method,status:n.status,requestHeaders:r,responseHeaders:i,requestCookies:o,responseCookies:a}))}}(t,i,s,o)}))}(e,t),function(e,t){"XMLHttpRequest"in r&&Ns((n=>{if(Se()!==e)return;const s=n.xhr,r=s[Rs];if(!r)return;const{method:i,request_headers:o}=r;try{!function(e,t,n,s){if(Kd(e,t.status,t.responseURL)){let e,r,i;if(Zd()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(r=Jd(e))}catch(e){rs&&l.log("Could not extract cookies from response headers")}try{i=function(e){const t=e.getAllResponseHeaders();return t?t.split("\r\n").reduce(((e,t)=>{const[n,s]=t.split(": ");return n&&s&&(e[n]=s),e}),{}):{}}(t)}catch(e){rs&&l.log("Could not extract headers from response")}e=s}tn(Qd({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:i,responseCookies:r}))}}(t,s,i,o)}catch(e){rs&&l.warn("Error while extracting response event form XHR response",e)}}))}(e,t)}}};function Xd(e,t){const n=function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(t.headers);let s;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(s=Jd(t))}catch(t){rs&&l.log(`Could not extract cookies from header ${e}`)}return[n,s]}function Yd(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function Jd(e){return e.split("; ").reduce(((e,t)=>{const[n,s]=t.split("=");return n&&s&&(e[n]=s),e}),{})}function Kd(e,t,n){return function(e,t){return e.some((e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1]))}(e.failedRequestStatusCodes,t)&&(s=e.failedRequestTargets,r=n,s.some((e=>"string"==typeof e?r.includes(e):e.test(r))))&&!xa(n,Se());var s,r}function Qd(e){const t=`HTTP Client Error with status code: ${e.status}`,n={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:Yd(e.responseHeaders)}}};return V(n,{type:"http.client",handled:!1}),n}function Zd(){const e=Se();return!!e&&Boolean(e.getOptions().sendDefaultPii)}const eh=r,th=(e={})=>{const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:"ContextLines",processEvent:e=>function(e,t){const n=eh.document,s=eh.location&&eh.location.href.split(/[?#]/,1)[0];if(!n||!s)return e;const r=e.exception&&e.exception.values;if(!r||!r.length)return e;const i=n.documentElement.innerHTML;if(!i)return e;const o=["<!DOCTYPE html>","<html>",...i.split("\n"),"</html>"];return r.forEach((e=>{const n=e.stacktrace;n&&n.frames&&(n.frames=n.frames.map((e=>function(e,t,n,s){return e.filename===n&&e.lineno&&t.length?(function(e,t,n=5){if(void 0===t.lineno)return;const s=e.length,r=Math.max(Math.min(s-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,r-n),r).map((e=>R(e,0)));const i=Math.min(s-1,r);t.context_line=R(e[i],t.colno||0),t.post_context=e.slice(Math.min(r+1,s),r+1+n).map((e=>R(e,0)))}(t,e,s),e):e}(e,o,s,t))))})),e}(e,t)}};var nh;function sh(e,t,n=1/0,s=0){return e?e.nodeType!==e.ELEMENT_NODE||s>n?-1:t(e)?s:sh(e.parentNode,t,n,s+1):-1}function rh(e,t){return n=>{const s=n;if(null===s)return!1;try{if(e)if("string"==typeof e){if(s.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const s=e.classList[n];if(t.test(s))return!0}return!1}(s,e))return!0;return!(!t||!s.matches(t))}catch(e){return!1}}}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(nh||(nh={}));const ih="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let oh={map:{},getId:()=>(console.error(ih),-1),getNode:()=>(console.error(ih),null),removeNodeFromMap(){console.error(ih)},has:()=>(console.error(ih),!1),reset(){console.error(ih)}};function ah(e,t,n,s,r=window){const i=r.Object.getOwnPropertyDescriptor(e,t);return r.Object.defineProperty(e,t,s?n:{set(e){ph((()=>{n.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>ah(e,t,i||{},!0)}function ch(e,t,n){try{if(!(t in e))return()=>{};const s=e[t],r=n(s);return"function"==typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__rrweb_original__:{enumerable:!1,value:s}})),e[t]=r,()=>{e[t]=s}}catch(e){return()=>{}}}function lh(e,t,n,s,r){if(!e)return!1;const i=function(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}(e);if(!i)return!1;const o=sh(i,rh(t,n));let a=-1;return!(o<0)&&(s&&(a=sh(i,rh(null,s))),o>-1&&a<0||o<a)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(oh=new Proxy(oh,{get:(e,t,n)=>("map"===t&&console.error(ih),Reflect.get(e,t,n))})),/[1-9][0-9]{12}/.test(Date.now().toString());const uh={};function dh(e){const t=uh[e];if(t)return t;const n=window.document;let s=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const r=t.contentWindow;r&&r[e]&&(s=r[e]),n.head.removeChild(t)}catch(e){}return uh[e]=s.bind(window)}function hh(...e){return dh("requestAnimationFrame")(...e)}function ph(...e){return dh("setTimeout")(...e)}var fh=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(fh||{});let mh;const gh=e=>mh?(...t)=>{try{return e(...t)}catch(e){if(mh&&!0===mh(e))return()=>{};throw e}}:e;for(var yh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_h="undefined"==typeof Uint8Array?[]:new Uint8Array(256),bh=0;bh<64;bh++)_h[yh.charCodeAt(bh)]=bh;const vh=new Map,Sh=(e,t,n)=>{if(!e||!Eh(e,t)&&"object"!=typeof e)return;const s=function(e,t){let n=vh.get(e);return n||(n=new Map,vh.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let r=s.indexOf(e);return-1===r&&(r=s.length,s.push(e)),r};function wh(e,t,n){if(e instanceof Array)return e.map((e=>wh(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),s=n.length,r="";for(t=0;t<s;t+=3)r+=yh[n[t]>>2],r+=yh[(3&n[t])<<4|n[t+1]>>4],r+=yh[(15&n[t+1])<<2|n[t+2]>>6],r+=yh[63&n[t+2]];return s%3==2?r=r.substring(0,r.length-1)+"=":s%3==1&&(r=r.substring(0,r.length-2)+"=="),r}(e);return{rr_type:t,base64:n}}if(e instanceof DataView)return{rr_type:e.constructor.name,args:[wh(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}return e instanceof HTMLCanvasElement?{rr_type:"HTMLImageElement",src:e.toDataURL()}:e instanceof ImageData?{rr_type:e.constructor.name,args:[wh(e.data,t,n),e.width,e.height]}:Eh(e,t)||"object"==typeof e?{rr_type:e.constructor.name,index:Sh(e,t,n)}:e}const kh=(e,t,n)=>e.map((e=>wh(e,t,n))),Eh=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function xh(e,t,n,s,r){const i=[];try{const o=ch(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(i,...o){if(!lh(this,t,n,s)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(i);if("__context"in this||(this.__context=e),r&&["webgl","webgl2"].includes(e))if(o[0]&&"object"==typeof o[0]){const e=o[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else o.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[i,...o])}}));i.push(o)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach((e=>e()))}}function Th(e,t,n,s,r,i,o,a){const c=[],l=Object.getOwnPropertyNames(e);for(const o of l)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(o))try{if("function"!=typeof e[o])continue;const l=ch(e,o,(function(e){return function(...c){const l=e.apply(this,c);if(Sh(l,a,this),"tagName"in this.canvas&&!lh(this.canvas,s,r,i)){const e=kh(c,a,this),s={type:t,property:o,args:e};n(this.canvas,s)}return l}}));c.push(l)}catch(s){const r=ah(e,o,{set(e){n(this.canvas,{type:t,property:o,args:[e],setter:!0})}});c.push(r)}return c}class Ih{reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,vi([this,"access",e=>e.worker,"optionalAccess",e=>e.terminate,"call",e=>e()]),this.worker=null,this.snapshotInProgressMap=new Map,(this.options.recordCanvas&&"number"==typeof this.options.sampling||this.options.enableManualSnapshot)&&(this.worker=this.initFPSWorker())}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:s,blockSelector:r,unblockSelector:i,maxCanvasSize:o,recordCanvas:a,dataURLOptions:c,errorHandler:l}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,l&&(mh=l),(a&&"number"==typeof t||e.enableManualSnapshot)&&(this.worker=this.initFPSWorker()),this.addWindow(n),e.enableManualSnapshot||gh((()=>{a&&"all"===t&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),a&&"number"==typeof t&&this.initCanvasFPSObserver(t,s,r,i,o,{dataURLOptions:c})}))()}addWindow(e){const{sampling:t="all",blockClass:n,blockSelector:s,unblockSelector:r,recordCanvas:i,enableManualSnapshot:o}=this.options;if(!this.windowsSet.has(e)){if(o)return this.windowsSet.add(e),void this.windows.push(new WeakRef(e));gh((()=>{if(i&&"all"===t&&this.initCanvasMutationObserver(e,n,s,r),i&&"number"==typeof t){const t=xh(e,n,s,r,!0);this.restoreHandlers.push((()=>{t()}))}}))(),this.windowsSet.add(e),this.windows.push(new WeakRef(e))}}addShadowRoot(e){this.shadowDoms.add(new WeakRef(e))}resetShadowRoots(){this.shadowDoms=new Set}initFPSWorker(){const e=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());return e.onmessage=e=>{const t=e.data,{id:n}=t;if(this.snapshotInProgressMap.set(n,!1),!("base64"in t))return;const{base64:s,type:r,width:i,height:o}=t;this.mutationCb({id:n,type:fh["2D"],commands:[{property:"clearRect",args:[0,0,i,o]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:s}],type:r}]},0,0,i,o]}]})},e}initCanvasFPSObserver(e,t,n,s,r,i){const o=this.takeSnapshot(!1,e,t,n,s,r,i.dataURLOptions);this.restoreHandlers.push((()=>{cancelAnimationFrame(o)}))}initCanvasMutationObserver(e,t,n,s){const r=xh(e,t,n,s,!1),i=function(e,t,n,s,r){const i=[],o=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of o)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const o=ch(t.CanvasRenderingContext2D.prototype,a,(function(i){return function(...o){return lh(this.canvas,n,s,r)||ph((()=>{const n=kh(o,t,this);e(this.canvas,{type:fh["2D"],property:a,args:n})}),0),i.apply(this,o)}}));i.push(o)}catch(n){const s=ah(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:fh["2D"],property:a,args:[t],setter:!0})}});i.push(s)}return()=>{i.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,s),o=function(e,t,n,s,r){const i=[];return i.push(...Th(t.WebGLRenderingContext.prototype,fh.WebGL,e,n,s,r,0,t)),void 0!==t.WebGL2RenderingContext&&i.push(...Th(t.WebGL2RenderingContext.prototype,fh.WebGL2,e,n,s,r,0,t)),()=>{i.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,s,this.mirror);this.restoreHandlers.push((()=>{r(),i(),o()}))}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.restoreHandlers.push((()=>{cancelAnimationFrame(n)}))}takeSnapshot(e,t,n,s,r,i,o,a){const c=1e3/t;let l,u=0;const d=e=>{if(e)return[e];const t=[],i=e=>{e.querySelectorAll("canvas").forEach((e=>{lh(e,n,s,r)||t.push(e)}))};for(const e of this.windows){const t=e.deref();t&&i(t.document)}for(const e of this.shadowDoms){const t=e.deref();t&&i(t)}return t},h=t=>{this.windows.length&&(u&&t-u<c?l=hh(h):(u=t,d(a).forEach((t=>{if(!this.mirror.hasNode(t))return;const n=this.mirror.getId(t);if(!this.snapshotInProgressMap.get(n)&&t.width&&t.height){if(this.snapshotInProgressMap.set(n,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===vi([e,"optionalAccess",e=>e.getContextAttributes,"call",e=>e(),"optionalAccess",e=>e.preserveDrawingBuffer])&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then((e=>{vi([this,"access",e=>e.worker,"optionalAccess",e=>e.postMessage,"call",s=>s({id:n,bitmap:e,width:t.width,height:t.height,dataURLOptions:o,maxCanvasSize:i},[e])])})).catch((e=>{gh((()=>{throw e}))()}))}})),e||(l=hh(h))))};return l=hh(h),l}startPendingCanvasMutationFlusher(){hh((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,hh(e)};hh(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),hh((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const s=n.map((e=>{const{type:t,...n}=e;return n})),{type:r}=n[0];this.mutationCb({id:t,type:r,commands:s}),this.pendingCanvasMutations.delete(e)}}const Ch={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},Mh=1280,Rh=(e={})=>{const[t,n]=e.maxCanvasSize||[],s={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,Mh):Mh,n?Math.min(n,Mh):Mh]};let r;const i=new Promise((e=>r=e));return{name:"ReplayCanvas",getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=s;return{enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const s=new Ih({...e,enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}});return r(s),s},...Ch[e||"medium"]||Ch.medium}},async snapshot(e){(await i).snapshot(e)}}},Nh=r,Oh=Nh.document,Ah=Nh.navigator,Dh="Report a Bug",Lh="widget",Ph=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=Se();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&ge().setTags(e.tags);const s=_d({source:"api",url:I(),...e},t);return new Promise(((e,t)=>{const r=setTimeout((()=>t("Unable to determine if Feedback was correctly sent.")),5e3),i=n.on("afterSendEvent",((n,o)=>{if(n.event_id===s)return clearTimeout(r),i(),o&&"number"==typeof o.statusCode&&o.statusCode>=200&&o.statusCode<300&&e(s),o&&"number"==typeof o.statusCode&&0===o.statusCode?t("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker."):o&&"number"==typeof o.statusCode&&403===o.statusCode?t("Unable to send Feedback. This could be because this domain is not in your list of allowed domains."):t("Unable to send Feedback. This could be because of network issues, or because you are using an ad-blocker")}))}))},Fh="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function $h(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen&&t.onFormOpen(),e.onFormOpen&&e.onFormOpen()},onFormClose:()=>{t.onFormClose&&t.onFormClose(),e.onFormClose&&e.onFormClose()},onSubmitSuccess:n=>{t.onSubmitSuccess&&t.onSubmitSuccess(n),e.onSubmitSuccess&&e.onSubmitSuccess(n)},onSubmitError:n=>{t.onSubmitError&&t.onSubmitError(n),e.onSubmitError&&e.onSubmitError(n)},onFormSubmitted:()=>{t.onFormSubmitted&&t.onFormSubmitted(),e.onFormSubmitted&&e.onFormSubmitted()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function jh(e,t){return Object.entries(t).forEach((([t,n])=>{e.setAttributeNS(null,t,n)})),e}const Bh="rgba(88, 74, 192, 1)",Uh={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:Bh,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},Hh={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:Bh,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function zh(e){return`\n  --foreground: ${e.foreground};\n  --background: ${e.background};\n  --accent-foreground: ${e.accentForeground};\n  --accent-background: ${e.accentBackground};\n  --success-color: ${e.successColor};\n  --error-color: ${e.errorColor};\n  --border: ${e.border};\n  --box-shadow: ${e.boxShadow};\n  --outline: ${e.outline};\n  --interactive-filter: ${e.interactiveFilter};\n  `}const qh=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>({id:s="sentry-feedback",autoInject:r=!0,showBranding:i=!0,isEmailRequired:o=!1,isNameRequired:a=!1,showEmail:c=!0,showName:u=!0,enableScreenshot:d=!0,useSentryUser:h={email:"email",name:"username"},tags:p,styleNonce:f,scriptNonce:m,colorScheme:g="system",themeLight:y={},themeDark:_={},addScreenshotButtonLabel:b="Add a screenshot",cancelButtonLabel:v="Cancel",confirmButtonLabel:S="Confirm",emailLabel:w="Email",emailPlaceholder:k="your.email@example.org",formTitle:E="Report a Bug",isRequiredLabel:x="(required)",messageLabel:T="Description",messagePlaceholder:I="What's the bug? What did you expect?",nameLabel:C="Name",namePlaceholder:M="Your Name",removeScreenshotButtonLabel:R="Remove screenshot",submitButtonLabel:N="Send Bug Report",successMessageText:O="Thank you for your report!",triggerLabel:A=Dh,triggerAriaLabel:D="",onFormOpen:L,onFormClose:P,onSubmitSuccess:F,onSubmitError:$,onFormSubmitted:j}={})=>{const B={id:s,autoInject:r,showBranding:i,isEmailRequired:o,isNameRequired:a,showEmail:c,showName:u,enableScreenshot:d,useSentryUser:h,tags:p,styleNonce:f,scriptNonce:m,colorScheme:g,themeDark:_,themeLight:y,triggerLabel:A,triggerAriaLabel:D,cancelButtonLabel:v,submitButtonLabel:N,confirmButtonLabel:S,formTitle:E,emailLabel:w,emailPlaceholder:k,messageLabel:T,messagePlaceholder:I,nameLabel:C,namePlaceholder:M,successMessageText:O,isRequiredLabel:x,addScreenshotButtonLabel:b,removeScreenshotButtonLabel:R,onFormClose:P,onFormOpen:L,onSubmitError:$,onSubmitSuccess:F,onFormSubmitted:j};let U=null,H=[];const z=e=>{if(!U){const t=Oh.createElement("div");t.id=String(e.id),Oh.body.appendChild(t),U=t.attachShadow({mode:"open"}),U.appendChild(function({colorScheme:e,themeDark:t,themeLight:n,styleNonce:s}){const r=Oh.createElement("style");return r.textContent=`\n:host {\n  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;\n  --font-size: 14px;\n  --z-index: 100000;\n\n  --page-margin: 16px;\n  --inset: auto 0 0 auto;\n  --actor-inset: var(--inset);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${"system"!==e?"color-scheme: only light;":""}\n\n  ${zh("dark"===e?{...Hh,...t}:{...Uh,...n})}\n}\n\n${"system"===e?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${zh({...Hh,...t})}\n  }\n}`:""}\n}\n`,s&&r.setAttribute("nonce",s),r}(e))}return U},q=async(t,n,s)=>{const r=Se(),i=r&&r.getIntegrationByName(t);if(i)return i;const o=(n&&n()||await e(s,m))();return r&&r.addIntegration(o),o},W=async e=>{const s=e.enableScreenshot&&!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Ah.userAgent)||/Macintosh/i.test(Ah.userAgent)&&Ah.maxTouchPoints&&Ah.maxTouchPoints>1||!isSecureContext),[r,i]=await Promise.all([q("FeedbackModal",t,"feedbackModalIntegration"),s?q("FeedbackScreenshot",n,"feedbackScreenshotIntegration"):void 0]);if(!r)throw Fh&&l.error("[Feedback] Missing feedback modal integration. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!");s&&!i&&Fh&&l.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.");const o=r.createDialog({options:{...e,onFormClose:()=>{o&&o.close(),e.onFormClose&&e.onFormClose()},onFormSubmitted:()=>{o&&o.close(),e.onFormSubmitted&&e.onFormSubmitted()}},screenshotIntegration:s?i:void 0,sendFeedback:Ph,shadow:z(e)});return o},V=(e,t={})=>{const n=$h(B,t),s="string"==typeof e?Oh.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!s)throw Fh&&l.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let r=null;const i=async()=>{r||(r=await W({...n,onFormSubmitted:()=>{r&&r.removeFromDom(),n.onFormSubmitted&&n.onFormSubmitted()}})),r.appendToDom(),r.open()};s.addEventListener("click",i);const o=()=>{H=H.filter((e=>e!==o)),r&&r.removeFromDom(),r=null,s.removeEventListener("click",i)};return H.push(o),o},G=(e={})=>{const t=$h(B,e),n=z(t),s=function({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:s}){const r=Oh.createElement("button");if(r.type="button",r.className="widget__actor",r.ariaHidden="false",r.ariaLabel=t||e||Dh,r.appendChild(function(){const e=e=>Nh.document.createElementNS("http://www.w3.org/2000/svg",e),t=jh(e("svg"),{width:"20",height:"20",viewBox:"0 0 20 20",fill:"var(--actor-color, var(--foreground))"}),n=jh(e("g"),{clipPath:"url(#clip0_57_80)"}),s=jh(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(s);const r=e("defs"),i=jh(e("clipPath"),{id:"clip0_57_80"}),o=jh(e("rect"),{width:"20",height:"20",fill:"white"});return i.appendChild(o),r.appendChild(i),t.appendChild(r).appendChild(i).appendChild(o),t}()),e){const t=Oh.createElement("span");t.appendChild(Oh.createTextNode(e)),r.appendChild(t)}const i=function(e){const t=Oh.createElement("style");return t.textContent='\n.widget__actor {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: var(--page-margin);\n  inset: var(--actor-inset);\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 16px;\n\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  line-height: 1.14em;\n  text-decoration: none;\n\n  background: var(--actor-background, var(--background));\n  border-radius: var(--actor-border-radius, 1.7em/50%);\n  border: var(--actor-border, var(--border));\n  box-shadow: var(--actor-box-shadow, var(--box-shadow));\n  color: var(--actor-color, var(--foreground));\n  fill: var(--actor-color, var(--foreground));\n  cursor: pointer;\n  opacity: 1;\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n.widget__actor[aria-hidden="true"] {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n  transform: translate(0, 16px) scale(0.98);\n}\n\n.widget__actor:hover {\n  background: var(--actor-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n\n.widget__actor svg {\n  width: 1.14em;\n  height: 1.14em;\n}\n\n@media (max-width: 600px) {\n  .widget__actor span {\n    display: none;\n  }\n}\n',e&&t.setAttribute("nonce",e),t}(s);return{el:r,appendToDom(){n.appendChild(i),n.appendChild(r)},removeFromDom(){n.removeChild(r),n.removeChild(i)},show(){r.ariaHidden="false"},hide(){r.ariaHidden="true"}}}({triggerLabel:t.triggerLabel,triggerAriaLabel:t.triggerAriaLabel,shadow:n,styleNonce:f});return V(s.el,{...t,onFormOpen(){s.hide()},onFormClose(){s.show()},onFormSubmitted(){s.show()}}),s};return{name:"Feedback",setupOnce(){Ia()&&B.autoInject&&("loading"===Oh.readyState?Oh.addEventListener("DOMContentLoaded",(()=>G().appendToDom())):G().appendToDom())},attachTo:V,createWidget(e={}){const t=G($h(B,e));return t.appendToDom(),t},createForm:async(e={})=>W($h(B,e)),remove(){U&&(U.parentElement&&U.parentElement.remove(),U=null),H.forEach((e=>e())),H=[]}}};function Wh(){const e=Se();return e&&e.getIntegrationByName("Feedback")}var Vh,Gh,Xh,Yh,Jh,Kh,Qh,Zh={},ep=[],tp=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,np=Array.isArray;function sp(e,t){for(var n in t)e[n]=t[n];return e}function rp(e){var t=e.parentNode;t&&t.removeChild(e)}function ip(e,t,n){var s,r,i,o={};for(i in t)"key"==i?s=t[i]:"ref"==i?r=t[i]:o[i]=t[i];if(arguments.length>2&&(o.children=arguments.length>3?Vh.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===o[i]&&(o[i]=e.defaultProps[i]);return op(e,o,s,r,null)}function op(e,t,n,s,r){var i={type:e,props:t,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==r?++Xh:r,__i:-1,__u:0};return null==r&&null!=Gh.vnode&&Gh.vnode(i),i}function ap(e){return e.children}function cp(e,t){this.props=e,this.context=t}function lp(e,t){if(null==t)return e.__?lp(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?lp(e):null}function up(e,t,n){var s,r=e.__v,i=r.__e,o=e.__P;if(o)return(s=sp({},r)).__v=r.__v+1,Gh.vnode&&Gh.vnode(s),Sp(o,s,r,e.__n,void 0!==o.ownerSVGElement,32&r.__u?[i]:null,t,null==i?lp(r):i,!!(32&r.__u),n),s.__.__k[s.__i]=s,s.__d=void 0,s.__e!=i&&dp(s),s}function dp(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return dp(e)}}function hp(e){(!e.__d&&(e.__d=!0)&&Yh.push(e)&&!pp.__r++||Jh!==Gh.debounceRendering)&&((Jh=Gh.debounceRendering)||Kh)(pp)}function pp(){var e,t,n,s=[],r=[];for(Yh.sort(Qh);e=Yh.shift();)e.__d&&(n=Yh.length,t=up(e,s,r)||t,0===n||Yh.length>n?(wp(s,t,r),r.length=s.length=0,t=void 0,Yh.sort(Qh)):t&&Gh.__c&&Gh.__c(t,ep));t&&wp(s,t,r),pp.__r=0}function fp(e,t,n,s,r,i,o,a,c,l,u){var d,h,p,f,m,g=s&&s.__k||ep,y=t.length;for(n.__d=c,function(e,t,n){var s,r,i,o,a,c=t.length,l=n.length,u=l,d=0;for(e.__k=[],s=0;s<c;s++)null!=(r=e.__k[s]=null==(r=t[s])||"boolean"==typeof r||"function"==typeof r?null:"string"==typeof r||"number"==typeof r||"bigint"==typeof r||r.constructor==String?op(null,r,null,null,r):np(r)?op(ap,{children:r},null,null,null):void 0===r.constructor&&r.__b>0?op(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)?(r.__=e,r.__b=e.__b+1,a=gp(r,n,o=s+d,u),r.__i=a,i=null,-1!==a&&(u--,(i=n[a])&&(i.__u|=131072)),null==i||null===i.__v?(-1==a&&d--,"function"!=typeof r.type&&(r.__u|=65536)):a!==o&&(a===o+1?d++:a>o?u>c-o?d+=a-o:d--:d=a<o&&a==o-1?a-o:0,a!==s+d&&(r.__u|=65536))):(i=n[s])&&null==i.key&&i.__e&&(i.__e==e.__d&&(e.__d=lp(i)),xp(i,i,!1),n[s]=null,u--);if(u)for(s=0;s<l;s++)null!=(i=n[s])&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=lp(i)),xp(i,i))}(n,t,g),c=n.__d,d=0;d<y;d++)null!=(p=n.__k[d])&&"boolean"!=typeof p&&"function"!=typeof p&&(h=-1===p.__i?Zh:g[p.__i]||Zh,p.__i=d,Sp(e,p,h,r,i,o,a,c,l,u),f=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&Ep(h.ref,null,p),u.push(p.ref,p.__c||f,p)),null==m&&null!=f&&(m=f),65536&p.__u||h.__k===p.__k?c=mp(p,c,e):"function"==typeof p.type&&void 0!==p.__d?c=p.__d:f&&(c=f.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=c,n.__e=m}function mp(e,t,n){var s,r;if("function"==typeof e.type){for(s=e.__k,r=0;s&&r<s.length;r++)s[r]&&(s[r].__=e,t=mp(s[r],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function gp(e,t,n,s){var r=e.key,i=e.type,o=n-1,a=n+1,c=t[n];if(null===c||c&&r==c.key&&i===c.type)return n;if(s>(null==c||131072&c.__u?0:1))for(;o>=0||a<t.length;){if(o>=0){if((c=t[o])&&!(131072&c.__u)&&r==c.key&&i===c.type)return o;o--}if(a<t.length){if((c=t[a])&&!(131072&c.__u)&&r==c.key&&i===c.type)return a;a++}}return-1}function yp(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||tp.test(t)?n:n+"px"}function _p(e,t,n,s,r){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof s&&(e.style.cssText=s=""),s)for(t in s)n&&t in n||yp(e.style,t,"");if(n)for(t in n)s&&n[t]===s[t]||yp(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?s?n.u=s.u:(n.u=Date.now(),e.addEventListener(t,i?vp:bp,i)):e.removeEventListener(t,i?vp:bp,i);else{if(r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&"role"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function bp(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(Gh.event?Gh.event(e):e)}}function vp(e){if(this.l)return this.l[e.type+!0](Gh.event?Gh.event(e):e)}function Sp(e,t,n,s,r,i,o,a,c,l){var u,d,h,p,f,m,g,y,_,b,v,S,w,k,E,x=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(c=!!(32&n.__u),i=[a=t.__e=n.__e]),(u=Gh.__b)&&u(t);e:if("function"==typeof x)try{if(y=t.props,_=(u=x.contextType)&&s[u.__c],b=u?_?_.props.value:u.__:s,n.__c?g=(d=t.__c=n.__c).__=d.__E:("prototype"in x&&x.prototype.render?t.__c=d=new x(y,b):(t.__c=d=new cp(y,b),d.constructor=x,d.render=Tp),_&&_.sub(d),d.props=y,d.state||(d.state={}),d.context=b,d.__n=s,h=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=x.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=sp({},d.__s)),sp(d.__s,x.getDerivedStateFromProps(y,d.__s))),p=d.props,f=d.state,d.__v=t,h)null==x.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==x.getDerivedStateFromProps&&y!==p&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(y,b),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(y,d.__s,b)||t.__v===n.__v)){for(t.__v!==n.__v&&(d.props=y,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),v=0;v<d._sb.length;v++)d.__h.push(d._sb[v]);d._sb=[],d.__h.length&&o.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(y,d.__s,b),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(p,f,m)}))}if(d.context=b,d.props=y,d.__P=e,d.__e=!1,S=Gh.__r,w=0,"prototype"in x&&x.prototype.render){for(d.state=d.__s,d.__d=!1,S&&S(t),u=d.render(d.props,d.state,d.context),k=0;k<d._sb.length;k++)d.__h.push(d._sb[k]);d._sb=[]}else do{d.__d=!1,S&&S(t),u=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++w<25);d.state=d.__s,null!=d.getChildContext&&(s=sp(sp({},s),d.getChildContext())),h||null==d.getSnapshotBeforeUpdate||(m=d.getSnapshotBeforeUpdate(p,f)),fp(e,np(E=null!=u&&u.type===ap&&null==u.key?u.props.children:u)?E:[E],t,n,s,r,i,o,a,c,l),d.base=t.__e,t.__u&=-161,d.__h.length&&o.push(d),g&&(d.__E=d.__=null)}catch(e){t.__v=null,c||null!=i?(t.__e=a,t.__u|=c?160:32,i[i.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),Gh.__e(e,t,n)}else null==i&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=kp(n.__e,t,n,s,r,i,o,c,l);(u=Gh.diffed)&&u(t)}function wp(e,t,n){for(var s=0;s<n.length;s++)Ep(n[s],n[++s],n[++s]);Gh.__c&&Gh.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){Gh.__e(e,t.__v)}}))}function kp(e,t,n,s,r,i,o,a,c){var l,u,d,h,p,f,m,g=n.props,y=t.props,_=t.type;if("svg"===_&&(r=!0),null!=i)for(l=0;l<i.length;l++)if((p=i[l])&&"setAttribute"in p==!!_&&(_?p.localName===_:3===p.nodeType)){e=p,i[l]=null;break}if(null==e){if(null===_)return document.createTextNode(y);e=r?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_,y.is&&y),i=null,a=!1}if(null===_)g===y||a&&e.data===y||(e.data=y);else{if(i=i&&Vh.call(e.childNodes),g=n.props||Zh,!a&&null!=i)for(g={},l=0;l<e.attributes.length;l++)g[(p=e.attributes[l]).name]=p.value;for(l in g)p=g[l],"children"==l||("dangerouslySetInnerHTML"==l?d=p:"key"===l||l in y||_p(e,l,null,p,r));for(l in y)p=y[l],"children"==l?h=p:"dangerouslySetInnerHTML"==l?u=p:"value"==l?f=p:"checked"==l?m=p:"key"===l||a&&"function"!=typeof p||g[l]===p||_p(e,l,p,g[l],r);if(u)a||d&&(u.__html===d.__html||u.__html===e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(d&&(e.innerHTML=""),fp(e,np(h)?h:[h],t,n,s,r&&"foreignObject"!==_,i,o,i?i[0]:n.__k&&lp(n,0),a,c),null!=i)for(l=i.length;l--;)null!=i[l]&&rp(i[l]);a||(l="value",void 0!==f&&(f!==e[l]||"progress"===_&&!f||"option"===_&&f!==g[l])&&_p(e,l,f,g[l],!1),l="checked",void 0!==m&&m!==e[l]&&_p(e,l,m,g[l],!1))}return e}function Ep(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){Gh.__e(e,n)}}function xp(e,t,n){var s,r;if(Gh.unmount&&Gh.unmount(e),(s=e.ref)&&(s.current&&s.current!==e.__e||Ep(s,null,t)),null!=(s=e.__c)){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(e){Gh.__e(e,t)}s.base=s.__P=null,e.__c=void 0}if(s=e.__k)for(r=0;r<s.length;r++)s[r]&&xp(s[r],t,n||"function"!=typeof e.type);n||null==e.__e||rp(e.__e),e.__=e.__e=e.__d=void 0}function Tp(e,t,n){return this.constructor(e,n)}Vh=ep.slice,Gh={__e:function(e,t,n,s){for(var r,i,o;t=t.__;)if((r=t.__c)&&!r.__)try{if((i=r.constructor)&&null!=i.getDerivedStateFromError&&(r.setState(i.getDerivedStateFromError(e)),o=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,s||{}),o=r.__d),o)return r.__E=r}catch(t){e=t}throw e}},Xh=0,cp.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=sp({},this.state),"function"==typeof e&&(e=e(sp({},n),this.props)),e&&sp(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),hp(this))},cp.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),hp(this))},cp.prototype.render=ap,Yh=[],Kh="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Qh=function(e,t){return e.__v.__b-t.__v.__b},pp.__r=0;var Ip,Cp,Mp,Rp,Np=0,Op=[],Ap=[],Dp=Gh,Lp=Dp.__b,Pp=Dp.__r,Fp=Dp.diffed,$p=Dp.__c,jp=Dp.unmount,Bp=Dp.__;function Up(e,t){Dp.__h&&Dp.__h(Cp,e,Np||t),Np=0;var n=Cp.__H||(Cp.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Ap}),n.__[e]}function Hp(e){return Np=1,zp(Zp,e)}function zp(e,t,n){var s=Up(Ip++,2);if(s.t=e,!s.__c&&(s.__=[n?n(t):Zp(void 0,t),function(e){var t=s.__N?s.__N[0]:s.__[0],n=s.t(t,e);t!==n&&(s.__N=[n,s.__[1]],s.__c.setState({}))}],s.__c=Cp,!Cp.u)){var r=function(e,t,n){if(!s.__c.__H)return!0;var r=s.__c.__H.__.filter((function(e){return!!e.__c}));if(r.every((function(e){return!e.__N})))return!i||i.call(this,e,t,n);var o=!1;return r.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(o=!0)}})),!(!o&&s.__c.props===e)&&(!i||i.call(this,e,t,n))};Cp.u=!0;var i=Cp.shouldComponentUpdate,o=Cp.componentWillUpdate;Cp.componentWillUpdate=function(e,t,n){if(this.__e){var s=i;i=void 0,r(e,t,n),i=s}o&&o.call(this,e,t,n)},Cp.shouldComponentUpdate=r}return s.__N||s.__}function qp(e,t){var n=Up(Ip++,4);!Dp.__s&&Qp(n.__H,t)&&(n.__=e,n.i=t,Cp.__h.push(n))}function Wp(e,t){var n=Up(Ip++,7);return Qp(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Vp(e,t){return Np=8,Wp((function(){return e}),t)}function Gp(){for(var e;e=Op.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Jp),e.__H.__h.forEach(Kp),e.__H.__h=[]}catch(t){e.__H.__h=[],Dp.__e(t,e.__v)}}Dp.__b=function(e){Cp=null,Lp&&Lp(e)},Dp.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Bp&&Bp(e,t)},Dp.__r=function(e){Pp&&Pp(e),Ip=0;var t=(Cp=e.__c).__H;t&&(Mp===Cp?(t.__h=[],Cp.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=Ap,e.__N=e.i=void 0}))):(t.__h.forEach(Jp),t.__h.forEach(Kp),t.__h=[],Ip=0)),Mp=Cp},Dp.diffed=function(e){Fp&&Fp(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==Op.push(t)&&Rp===Dp.requestAnimationFrame||((Rp=Dp.requestAnimationFrame)||Yp)(Gp)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==Ap&&(e.__=e.__V),e.i=void 0,e.__V=Ap}))),Mp=Cp=null},Dp.__c=function(e,t){t.some((function(e){try{e.__h.forEach(Jp),e.__h=e.__h.filter((function(e){return!e.__||Kp(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],Dp.__e(n,e.__v)}})),$p&&$p(e,t)},Dp.unmount=function(e){jp&&jp(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{Jp(e)}catch(e){t=e}})),n.__H=void 0,t&&Dp.__e(t,n.__v))};var Xp="function"==typeof requestAnimationFrame;function Yp(e){var t,n=function(){clearTimeout(s),Xp&&cancelAnimationFrame(t),setTimeout(e)},s=setTimeout(n,100);Xp&&(t=requestAnimationFrame(n))}function Jp(e){var t=Cp,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),Cp=t}function Kp(e){var t=Cp;e.__c=e.__(),Cp=t}function Qp(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function Zp(e,t){return"function"==typeof t?t(e):t}const ef={__proto__:null,useCallback:Vp,useContext:function(e){var t=Cp.context[e.__c],n=Up(Ip++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(Cp)),t.props.value):e.__},useDebugValue:function(e,t){Dp.useDebugValue&&Dp.useDebugValue(t?t(e):e)},useEffect:function(e,t){var n=Up(Ip++,3);!Dp.__s&&Qp(n.__H,t)&&(n.__=e,n.i=t,Cp.__H.__h.push(n))},useErrorBoundary:function(e){var t=Up(Ip++,10),n=Hp();return t.__=e,Cp.componentDidCatch||(Cp.componentDidCatch=function(e,s){t.__&&t.__(e,s),n[1](e)}),[n[0],function(){n[1](void 0)}]},useId:function(){var e=Up(Ip++,11);if(!e.__){for(var t=Cp.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__},useImperativeHandle:function(e,t,n){Np=6,qp((function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0}),null==n?n:n.concat(e))},useLayoutEffect:qp,useMemo:Wp,useReducer:zp,useRef:function(e){return Np=5,Wp((function(){return{current:e}}),[])},useState:Hp},tf="http://www.w3.org/2000/svg";function nf(){const e=e=>Oh.createElementNS(tf,e),t=jh(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=jh(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}const sf="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/DialogHeader.tsx";function rf({options:e}){const t=Wp((()=>({__html:nf().outerHTML})),[]);return ip("h2",{class:"dialog__header",__self:this,__source:{fileName:sf,lineNumber:16}},e.formTitle,e.showBranding?ip("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t,__self:this,__source:{fileName:sf,lineNumber:19}}):null)}const of="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx";function af(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function cf({options:e,defaultEmail:t,defaultName:n,onFormClose:s,onSubmit:r,onSubmitSuccess:i,onSubmitError:o,showEmail:a,showName:c,screenshotInput:u}){const{tags:d,addScreenshotButtonLabel:h,removeScreenshotButtonLabel:p,cancelButtonLabel:f,emailLabel:m,emailPlaceholder:g,isEmailRequired:y,isNameRequired:_,messageLabel:b,messagePlaceholder:v,nameLabel:S,namePlaceholder:w,submitButtonLabel:k,isRequiredLabel:E}=e,[x,T]=Hp(null),[I,C]=Hp(!1),M=u&&u.input,[R,N]=Hp(null),O=Vp((e=>{N(e),C(!1)}),[]),A=Vp((e=>{const t=function(e,t){const n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}(e,{emailLabel:m,isEmailRequired:y,isNameRequired:_,messageLabel:b,nameLabel:S});return t.length>0?T(`Please enter in the following required fields: ${t.join(", ")}`):T(null),0===t.length}),[m,y,_,b,S]),D=Vp((async e=>{try{if(e.preventDefault(),!(e.target instanceof HTMLFormElement))return;const t=new FormData(e.target),n=await(u&&I?u.value():void 0),s={name:af(t,"name"),email:af(t,"email"),message:af(t,"message"),attachments:n?[n]:void 0};if(!A(s))return;try{await r({name:s.name,email:s.email,message:s.message,source:Lh,tags:d},{attachments:s.attachments}),i(s)}catch(e){Fh&&l.error(e),T(e),o(e)}}catch(e){}}),[u&&I,i,o]);return ip("form",{class:"form",onSubmit:D,__self:this,__source:{fileName:of,lineNumber:144}},M&&I?ip(M,{onError:O,__self:this,__source:{fileName:of,lineNumber:146}}):null,ip("div",{class:"form__right","data-sentry-feedback":!0,__self:this,__source:{fileName:of,lineNumber:149}},ip("div",{class:"form__top",__self:this,__source:{fileName:of,lineNumber:150}},x?ip("div",{class:"form__error-container",__self:this,__source:{fileName:of,lineNumber:151}},x):null,c?ip("label",{for:"name",class:"form__label",__self:this,__source:{fileName:of,lineNumber:154}},ip(lf,{label:S,isRequiredLabel:E,isRequired:_,__self:this,__source:{fileName:of,lineNumber:155}}),ip("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:w,required:_,type:"text",__self:this,__source:{fileName:of,lineNumber:156}})):ip("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden",__self:this,__source:{fileName:of,lineNumber:167}}),a?ip("label",{for:"email",class:"form__label",__self:this,__source:{fileName:of,lineNumber:171}},ip(lf,{label:m,isRequiredLabel:E,isRequired:y,__self:this,__source:{fileName:of,lineNumber:172}}),ip("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:g,required:y,type:"email",__self:this,__source:{fileName:of,lineNumber:173}})):ip("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden",__self:this,__source:{fileName:of,lineNumber:184}}),ip("label",{for:"message",class:"form__label",__self:this,__source:{fileName:of,lineNumber:187}},ip(lf,{label:b,isRequiredLabel:E,isRequired:!0,__self:this,__source:{fileName:of,lineNumber:188}}),ip("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:v,required:!0,rows:5,__self:this,__source:{fileName:of,lineNumber:189}})),M?ip("label",{for:"screenshot",class:"form__label",__self:this,__source:{fileName:of,lineNumber:201}},ip("button",{class:"btn btn--default",type:"button",onClick:()=>{N(null),C((e=>!e))},__self:this,__source:{fileName:of,lineNumber:202}},I?p:h),R?ip("div",{class:"form__error-container",__self:this,__source:{fileName:of,lineNumber:212}},R.message):null):null),ip("div",{class:"btn-group",__self:this,__source:{fileName:of,lineNumber:216}},ip("button",{class:"btn btn--primary",type:"submit",__self:this,__source:{fileName:of,lineNumber:217}},k),ip("button",{class:"btn btn--default",type:"button",onClick:s,__self:this,__source:{fileName:of,lineNumber:220}},f))))}function lf({label:e,isRequired:t,isRequiredLabel:n}){return ip("span",{class:"form__label__text",__self:this,__source:{fileName:of,lineNumber:239}},e,t&&ip("span",{class:"form__label__text--required",__self:this,__source:{fileName:of,lineNumber:241}},n))}const uf=16,df=17,hf="http://www.w3.org/2000/svg";function pf(){const e=e=>Nh.document.createElementNS(hf,e),t=jh(e("svg"),{width:`${uf}`,height:`${df}`,viewBox:`0 0 ${uf} ${df}`,fill:"inherit"}),n=jh(e("g"),{clipPath:"url(#clip0_57_156)"}),s=jh(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),r=jh(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(r,s);const i=e("defs"),o=jh(e("clipPath"),{id:"clip0_57_156"}),a=jh(e("rect"),{width:`${uf}`,height:`${uf}`,fill:"white",transform:"translate(0 0.5)"});return o.appendChild(a),i.appendChild(o),t.appendChild(i).appendChild(o).appendChild(a),t}const ff="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Dialog.tsx";function mf({open:e,onFormSubmitted:t,...n}){const s=n.options,r=Wp((()=>({__html:pf().outerHTML})),[]),[i,o]=Hp(null),a=Vp((()=>{i&&(clearTimeout(i),o(null)),t()}),[i]),c=Vp((e=>{n.onSubmitSuccess(e),o(setTimeout((()=>{t(),o(null)}),5e3))}),[t]);return ip(ap,{__self:this,__source:{fileName:ff,lineNumber:48}},i?ip("div",{class:"success__position",onClick:a,__self:this,__source:{fileName:ff,lineNumber:50}},ip("div",{class:"success__content",__self:this,__source:{fileName:ff,lineNumber:51}},s.successMessageText,ip("span",{class:"success__icon",dangerouslySetInnerHTML:r,__self:this,__source:{fileName:ff,lineNumber:53}}))):ip("dialog",{class:"dialog",onClick:s.onFormClose,open:e,__self:this,__source:{fileName:ff,lineNumber:57}},ip("div",{class:"dialog__position",__self:this,__source:{fileName:ff,lineNumber:58}},ip("div",{class:"dialog__content",onClick:e=>{e.stopPropagation()},__self:this,__source:{fileName:ff,lineNumber:59}},ip(rf,{options:s,__self:this,__source:{fileName:ff,lineNumber:66}}),ip(cf,{...n,onSubmitSuccess:c,__self:this,__source:{fileName:ff,lineNumber:67}})))))}const gf=()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:s})=>{const r=s,i=e.useSentryUser,o=function(){const e=ge().getUser(),t=ye().getUser(),n=_e().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}(),a=Oh.createElement("div"),c=function(e){const t=Oh.createElement("style");return t.textContent="\n:host {\n  --dialog-inset: var(--inset);\n}\n\n\n.dialog {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: 0;\n  inset: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n  height: 100vh;\n  width: 100vw;\n\n  color: var(--dialog-color, var(--foreground));\n  fill: var(--dialog-color, var(--foreground));\n  line-height: 1.75em;\n\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  inset: 0;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog__position {\n  position: fixed;\n  z-index: var(--z-index);\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  display: flex;\n  max-height: calc(100vh - (2 * var(--page-margin)));\n}\n@media (max-width: 600px) {\n  .dialog__position {\n    inset: var(--page-margin);\n    padding: 0;\n  }\n}\n\n.dialog__position:has(.editor) {\n  inset: var(--page-margin);\n  padding: 0;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  padding: var(--dialog-padding, 24px);\n  max-width: 100%;\n  width: 100%;\n  max-height: 100%;\n  overflow: auto;\n\n  background: var(--dialog-background, var(--background));\n  border-radius: var(--dialog-border-radius, 20px);\n  border: var(--dialog-border, var(--border));\n  box-shadow: var(--dialog-box-shadow, var(--box-shadow));\n  transform: translate(0, 0) scale(1);\n  transition: transform 0.2s ease-in-out;\n}\n\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-weight: var(--dialog-header-weight, 600);\n  margin: 0;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n.brand-link:focus-visible {\n  outline: var(--outline);\n}\n\n\n.form {\n  display: flex;\n  overflow: auto;\n  flex-direction: row;\n  gap: 16px;\n  flex: 1 0;\n}\n\n.form__right {\n  flex: 0 0 auto;\n  width: var(--form-width, 272px);\n  display: flex;\n  overflow: auto;\n  flex-direction: column;\n  justify-content: space-between;\n  gap: 20px;\n}\n\n@media (max-width: 600px) {\n  .form__right {\n    width: var(--form-width, 100%);\n  }\n}\n\n.form__top {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.form__error-container {\n  color: var(--error-color);\n  fill: var(--error-color);\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: flex;\n  gap: 4px;\n  align-items: center;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  font-family: inherit;\n  line-height: inherit;\n  background: transparent;\n  box-sizing: border-box;\n  border: var(--input-border, var(--border));\n  border-radius: var(--input-border-radius, 6px);\n  color: var(--input-color, inherit);\n  fill: var(--input-color, inherit);\n  font-size: var(--input-font-size, inherit);\n  font-weight: var(--input-font-weight, 500);\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  opacity: 0.65;\n  color: var(--input-placeholder-color, inherit);\n  filter: var(--interactive-filter);\n}\n\n.form__input:focus-visible {\n  outline: var(--input-focus-outline, var(--outline));\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.error {\n  color: var(--error-color);\n  fill: var(--error-color);\n}\n\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--button-font-size, inherit);\n  font-weight: var(--button-font-weight, 600);\n  padding: var(--button-padding, 6px 16px);\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  color: var(--button-primary-color, var(--accent-foreground));\n  fill: var(--button-primary-color, var(--accent-foreground));\n  background: var(--button-primary-background, var(--accent-background));\n  border: var(--button-primary-border, var(--border));\n  border-radius: var(--button-primary-border-radius, 6px);\n  font-weight: var(--button-primary-font-weight, 500);\n}\n.btn--primary:hover {\n  color: var(--button-primary-hover-color, var(--accent-foreground));\n  fill: var(--button-primary-hover-color, var(--accent-foreground));\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n}\n.btn--primary:focus-visible {\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n  outline: var(--button-primary-focus-outline, var(--outline));\n}\n\n.btn--default {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-background, var(--background));\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  font-weight: var(--button-font-weight, 500);\n}\n.btn--default:hover {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n.btn--default:focus-visible {\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n  outline: var(--button-focus-outline, var(--outline));\n}\n\n\n.success__position {\n  position: fixed;\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  z-index: var(--z-index);\n}\n.success__content {\n  background: var(--success-background, var(--background));\n  border: var(--success-border, var(--border));\n  border-radius: var(--success-border-radius, 1.7em/50%);\n  box-shadow: var(--success-box-shadow, var(--box-shadow));\n  font-weight: var(--success-font-weight, 600);\n  color: var(--success-color);\n  fill: var(--success-color);\n  padding: 12px 24px;\n  line-height: 1.75em;\n\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success__icon {\n  display: flex;\n}\n\n",e&&t.setAttribute("nonce",e),t}(e.styleNonce);let l="";const u={get el(){return a},appendToDom(){r.contains(c)||r.contains(a)||(r.appendChild(c),r.appendChild(a))},removeFromDom(){r.removeChild(a),r.removeChild(c),Oh.body.style.overflow=l},open(){h(!0),e.onFormOpen&&e.onFormOpen(),l=Oh.body.style.overflow,Oh.body.style.overflow="hidden"},close(){h(!1),Oh.body.style.overflow=l}},d=t&&t.createInput({h:ip,hooks:ef,dialog:u,options:e}),h=t=>{!function(e,t){var n,s,r,i;Gh.__&&Gh.__(e,t),s=(n=!1)?null:t.__k,r=[],i=[],Sp(t,e=t.__k=ip(ap,null,[e]),s||Zh,Zh,void 0!==t.ownerSVGElement,s?null:t.firstChild?Vh.call(t.childNodes):null,r,s?s.__e:t.firstChild,n,i),e.__d=void 0,wp(r,e,i)}(ip(mf,{options:e,screenshotInput:d,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:i&&o&&o[i.name]||"",defaultEmail:i&&o&&o[i.email]||"",onFormClose:()=>{h(!1),e.onFormClose&&e.onFormClose()},onSubmit:n,onSubmitSuccess:t=>{h(!1),e.onSubmitSuccess&&e.onSubmitSuccess(t)},onSubmitError:t=>{e.onSubmitError&&e.onSubmitError(t)},onFormSubmitted:()=>{e.onFormSubmitted&&e.onFormSubmitted()},open:t,__self:void 0,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/integration.tsx",lineNumber:67}}),a)};return u}});function yf(e){const t=Oh.createElement("style"),n="#1A141F",s="#302735";return t.textContent=`\n.editor {\n  padding: 10px;\n  padding-top: 65px;\n  padding-bottom: 65px;\n  flex-grow: 1;\n\n  background-color: ${n};\n  background-image: repeating-linear-gradient(\n      -145deg,\n      transparent,\n      transparent 8px,\n      ${n} 8px,\n      ${n} 11px\n    ),\n    repeating-linear-gradient(\n      -45deg,\n      transparent,\n      transparent 15px,\n      ${s} 15px,\n      ${s} 16px\n    );\n}\n\n.editor__canvas-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.editor__canvas-container canvas {\n  object-fit: contain;\n  position: relative;\n}\n\n.editor__crop-btn-group {\n  padding: 8px;\n  gap: 8px;\n  border-radius: var(--menu-border-radius, 6px);\n  background: var(--button-primary-background, var(--background));\n  width: 175px;\n  position: absolute;\n}\n\n.editor__crop-corner {\n  width: 30px;\n  height: 30px;\n  position: absolute;\n  background: none;\n  border: 3px solid #ffffff;\n}\n\n.editor__crop-corner--top-left {\n  cursor: nwse-resize;\n  border-right: none;\n  border-bottom: none;\n}\n.editor__crop-corner--top-right {\n  cursor: nesw-resize;\n  border-left: none;\n  border-bottom: none;\n}\n.editor__crop-corner--bottom-left {\n  cursor: nesw-resize;\n  border-right: none;\n  border-top: none;\n}\n.editor__crop-corner--bottom-right {\n  cursor: nwse-resize;\n  border-left: none;\n  border-top: none;\n}\n`,e&&t.setAttribute("nonce",e),t}const _f="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",bf=33,vf=Nh.devicePixelRatio,Sf=e=>({x:Math.min(e.startX,e.endX),y:Math.min(e.startY,e.endY),width:Math.abs(e.startX-e.endX),height:Math.abs(e.startY-e.endY)}),wf=e=>{const t=e.clientHeight,n=e.clientWidth,s=e.width/e.height;let r=t*s,i=t;r>n&&(r=n,i=n/s);const o=(n-r)/2,a=(t-i)/2;return{startX:o,startY:a,endX:r+o,endY:i+a}};function kf({h:e,hooks:t,imageBuffer:n,dialog:s,options:r}){const i=function({hooks:e}){return function({onBeforeScreenshot:t,onScreenshot:n,onAfterScreenshot:s,onError:r}){e.useEffect((()=>{(async()=>{t();const e=await Ah.mediaDevices.getDisplayMedia({video:{width:Nh.innerWidth*Nh.devicePixelRatio,height:Nh.innerHeight*Nh.devicePixelRatio},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),r=Oh.createElement("video");await new Promise(((t,s)=>{r.srcObject=e,r.onloadedmetadata=()=>{n(r),e.getTracks().forEach((e=>e.stop())),t()},r.play().catch(s)})),s()})().catch(r)}),[])}}({hooks:t});return function({onError:o}){const a=t.useMemo((()=>({__html:yf(r.styleNonce).innerText})),[]),c=function({h:e}){return function({top:t,left:n,corner:s,onGrabButton:r}){return e("button",{class:`editor__crop-corner editor__crop-corner--${s} `,style:{top:t,left:n},onMouseDown:e=>{e.preventDefault(),r(e,s)},onClick:e=>{e.preventDefault()},__self:this,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/CropCorner.tsx",lineNumber:22}})}}({h:e}),l=t.useRef(null),u=t.useRef(null),d=t.useRef(null),[h,p]=t.useState({startX:0,startY:0,endX:0,endY:0}),[f,m]=t.useState(!1),[g,y]=t.useState(!1);function _(){const e=d.current,t=Sf(wf(n));if(e){e.width=t.width*vf,e.height=t.height*vf,e.style.width=`${t.width}px`,e.style.height=`${t.height}px`;const n=e.getContext("2d");n&&n.scale(vf,vf)}const s=u.current;s&&(s.style.width=`${t.width}px`,s.style.height=`${t.height}px`),p({startX:0,startY:0,endX:t.width,endY:t.height})}function b(e,t){m(!1),y(!0);const n=v(t),s=()=>{Oh.removeEventListener("mousemove",n),Oh.removeEventListener("mouseup",s),m(!0),y(!1)};Oh.addEventListener("mouseup",s),Oh.addEventListener("mousemove",n)}t.useEffect((()=>{Nh.addEventListener("resize",_,!1)}),[]),t.useEffect((()=>{const e=d.current;if(!e)return;const t=e.getContext("2d");if(!t)return;const s=Sf(wf(n)),r=Sf(h);t.clearRect(0,0,s.width,s.height),t.fillStyle="rgba(0, 0, 0, 0.5)",t.fillRect(0,0,s.width,s.height),t.clearRect(r.x,r.y,r.width,r.height),t.strokeStyle="#ffffff",t.lineWidth=3,t.strokeRect(r.x+1,r.y+1,r.width-2,r.height-2),t.strokeStyle="#000000",t.lineWidth=1,t.strokeRect(r.x+3,r.y+3,r.width-6,r.height-6)}),[h]);const v=t.useCallback((e=>function(t){if(!d.current)return;const n=d.current,s=n.getBoundingClientRect(),r=t.clientX-s.x,i=t.clientY-s.y;switch(e){case"top-left":p((e=>({...e,startX:Math.min(Math.max(0,r),e.endX-bf),startY:Math.min(Math.max(0,i),e.endY-bf)})));break;case"top-right":p((e=>({...e,endX:Math.max(Math.min(r,n.width/vf),e.startX+bf),startY:Math.min(Math.max(0,i),e.endY-bf)})));break;case"bottom-left":p((e=>({...e,startX:Math.min(Math.max(0,r),e.endX-bf),endY:Math.max(Math.min(i,n.height/vf),e.startY+bf)})));break;case"bottom-right":p((e=>({...e,endX:Math.max(Math.min(r,n.width/vf),e.startX+bf),endY:Math.max(Math.min(i,n.height/vf),e.startY+bf)})))}}),[]),S=t.useRef({initialX:0,initialY:0});return i({onBeforeScreenshot:t.useCallback((()=>{s.el.style.display="none"}),[]),onScreenshot:t.useCallback((e=>{const t=n.getContext("2d");if(!t)throw new Error("Could not get canvas context");n.width=e.videoWidth,n.height=e.videoHeight,n.style.width="100%",n.style.height="100%",t.drawImage(e,0,0)}),[n]),onAfterScreenshot:t.useCallback((()=>{s.el.style.display="block";const e=l.current;e&&e.appendChild(n),_()}),[]),onError:t.useCallback((e=>{s.el.style.display="block",o(e)}),[])}),e("div",{class:"editor",__self:this,__source:{fileName:_f,lineNumber:315}},e("style",{nonce:r.styleNonce,dangerouslySetInnerHTML:a,__self:this,__source:{fileName:_f,lineNumber:316}}),e("div",{class:"editor__canvas-container",ref:l,__self:this,__source:{fileName:_f,lineNumber:317}},e("div",{class:"editor__crop-container",style:{position:"absolute",zIndex:1},ref:u,__self:this,__source:{fileName:_f,lineNumber:318}},e("canvas",{onMouseDown:function(e){if(g)return;S.current={initialX:e.clientX,initialY:e.clientY};const t=e=>{const t=d.current;if(!t)return;const n=e.clientX-S.current.initialX,s=e.clientY-S.current.initialY;p((r=>{const i=Math.max(0,Math.min(r.startX+n,t.width/vf-(r.endX-r.startX))),o=Math.max(0,Math.min(r.startY+s,t.height/vf-(r.endY-r.startY))),a=i+(r.endX-r.startX),c=o+(r.endY-r.startY);return S.current.initialX=e.clientX,S.current.initialY=e.clientY,{startX:i,startY:o,endX:a,endY:c}}))},n=()=>{Oh.removeEventListener("mousemove",t),Oh.removeEventListener("mouseup",n)};Oh.addEventListener("mousemove",t),Oh.addEventListener("mouseup",n)},style:{position:"absolute",cursor:f?"move":"auto"},ref:d,__self:this,__source:{fileName:_f,lineNumber:319}}),e(c,{left:h.startX-3,top:h.startY-3,onGrabButton:b,corner:"top-left",__self:this,__source:{fileName:_f,lineNumber:324}}),e(c,{left:h.endX-30+3,top:h.startY-3,onGrabButton:b,corner:"top-right",__self:this,__source:{fileName:_f,lineNumber:330}}),e(c,{left:h.startX-3,top:h.endY-30+3,onGrabButton:b,corner:"bottom-left",__self:this,__source:{fileName:_f,lineNumber:336}}),e(c,{left:h.endX-30+3,top:h.endY-30+3,onGrabButton:b,corner:"bottom-right",__self:this,__source:{fileName:_f,lineNumber:342}}),e("div",{style:{left:Math.max(0,h.endX-191),top:Math.max(0,h.endY+8),display:f?"flex":"none"},class:"editor__crop-btn-group",__self:this,__source:{fileName:_f,lineNumber:348}},e("button",{onClick:e=>{e.preventDefault(),d.current&&p({startX:0,startY:0,endX:d.current.width/vf,endY:d.current.height/vf}),m(!1)},class:"btn btn--default",__self:this,__source:{fileName:_f,lineNumber:356}},r.cancelButtonLabel),e("button",{onClick:e=>{e.preventDefault(),function(){const e=Oh.createElement("canvas"),t=Sf(wf(n)),s=Sf(h);e.width=s.width*vf,e.height=s.height*vf;const r=e.getContext("2d");r&&n&&r.drawImage(n,s.x/t.width*n.width,s.y/t.height*n.height,s.width/t.width*n.width,s.height/t.height*n.height,0,0,e.width,e.height);const i=n.getContext("2d");i&&(i.clearRect(0,0,n.width,n.height),n.width=e.width,n.height=e.height,n.style.width=`${s.width}px`,n.style.height=`${s.height}px`,i.drawImage(e,0,0),_())}(),m(!1)},class:"btn btn--primary",__self:this,__source:{fileName:_f,lineNumber:373}},r.confirmButtonLabel)))))}}const Ef=()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:s})=>{const r=Oh.createElement("canvas");return{input:kf({h:e,hooks:t,imageBuffer:r,dialog:n,options:s}),value:async()=>{const e=await new Promise((e=>{r.toBlob(e,"image/png")}));if(e)return{data:new Uint8Array(await e.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}),xf=qh({lazyLoadIntegration:zd}),Tf=qh({lazyLoadIntegration:zd,getModalIntegration:()=>gf,getScreenshotIntegration:()=>Ef}),If="c",Cf="g",Mf="s",Rf="d";function Nf(e,t){const n=i("globalMetricsAggregators",(()=>new WeakMap)),s=n.get(e);if(s)return s;const r=new t(e);return e.on("flush",(()=>r.flush())),e.on("close",(()=>r.close())),n.set(e,r),r}function Of(e,t,n,s,r={}){const i=r.client||Se();if(!i)return;const o=Ht(),a=o?Ut(o):void 0,c=a&&Dt(a).description,{unit:u,tags:d,timestamp:h}=r,{release:p,environment:f}=i.getOptions(),m={};p&&(m.release=p),f&&(m.environment=f),c&&(m.transaction=c),Y&&l.log(`Adding value of ${s} to ${t} metric ${n}`),Nf(i,e).add(t,n,s,u,{...m,...d},h)}function Af(e,t,n,s){Of(e,"d",t,Lf(n),s)}const Df={increment:function(e,t,n=1,s){Of(e,"c",t,Lf(n),s)},distribution:Af,set:function(e,t,n,s){Of(e,"s",t,n,s)},gauge:function(e,t,n,s){Of(e,"g",t,Lf(n),s)},timing:function(e,t,n,s="second",r){if("function"==typeof n){const s=te();return ci({op:"metrics.timing",name:t,startTime:s,onlyIfParent:!0},(i=>Jr((()=>n()),(()=>{}),(()=>{const n=te();Af(e,t,n-s,{...r,unit:"second"}),i.end(n)}))))}Af(e,t,n,{...r,unit:s})},getMetricsAggregatorForClient:Nf};function Lf(e){return"string"==typeof e?parseInt(e):e}function Pf(e){return e.replace(/[^\w\-./]+/gi,"")}const Ff=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function $f(e){return[...e].reduce(((e,t)=>e+function(e){for(const[t,n]of Ff)if(e===t)return n;return e}(t)),"")}const jf={[If]:class{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}},[Cf]:class{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},[Rf]:class{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}},[Mf]:class{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t>>>0}(e):e)).join(":")}}};class Bf{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(e,t,n,s="none",r={},i=te()){const o=Math.floor(i),a=t.replace(/[^\w\-.]+/gi,"_"),c=function(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[Pf(n)]=$f(String(e[n])));return t}(r),l=function(e){return e.replace(/[^\w]+/gi,"_")}(s),u=function(e,t,n,s){const r=Object.entries(B(s)).sort(((e,t)=>e[0].localeCompare(t[0])));return`${e}${t}${n}${r}`}(e,a,l,c);let d=this._buckets.get(u);const h=d&&"s"===e?d.metric.weight:0;d?(d.metric.add(n),d.timestamp<o&&(d.timestamp=o)):(d={metric:new jf[e](n),timestamp:o,metricType:e,name:a,unit:l,tags:c},this._buckets.set(u,d)),function(e,t,n,s,r,i){const o=Ht();o&&function(e,t,n,s,r,i,o){const a=e[St]||(e[St]=new Map),c=`${t}:${n}@${r}`,l=a.get(o);if(l){const[,e]=l;a.set(o,[c,{min:Math.min(e.min,s),max:Math.max(e.max,s),count:e.count+=1,sum:e.sum+=s,tags:e.tags}])}else a.set(o,[c,{min:s,max:s,count:1,sum:s,tags:i}])}(o,e,t,n,s,r,i)}(e,a,"string"==typeof n?d.metric.weight-h:n,l,r,u)}flush(){if(0===this._buckets.size)return;const e=Array.from(this._buckets.values());(function(e,t){l.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const n=function(e,t,n,s){const r={sent_at:(new Date).toISOString()};n&&n.sdk&&(r.sdk={name:n.sdk.name,version:n.sdk.version}),s&&t&&(r.dsn=bn(t));const i=function(e){const t=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),s=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${s}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return Bn(r,[i])}(t,e.getDsn(),e.getSdkMetadata(),e.getOptions().tunnel);e.sendEnvelope(n)})(this._client,e),this._buckets.clear()}close(){clearInterval(this._interval),this.flush()}}const Uf={increment:function(e,t=1,n){Df.increment(Bf,e,t,n)},distribution:function(e,t,n){Df.distribution(Bf,e,t,n)},set:function(e,t,n){Df.set(Bf,e,t,n)},gauge:function(e,t,n){Df.gauge(Bf,e,t,n)},timing:function(e,t,n="second",s){return Df.timing(Bf,e,t,n,s)}},Hf=100,zf=5e3,qf=36e5;function Wf(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function Vf(e){return Wf(e.getAllKeys())}function Gf(e){let t;function n(){return null==t&&(t=function(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const s=Wf(n);return e=>s.then((n=>e(n.transaction(t,"readwrite").objectStore(t))))}(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async t=>{try{const s=await Wn(t);await function(e,t,n){return e((e=>Vf(e).then((s=>{if(!(s.length>=n))return e.put(t,Math.max(...s,0)+1),Wf(e.transaction)}))))}(n(),s,e.maxQueueSize||30)}catch(e){}},unshift:async t=>{try{const s=await Wn(t);await function(e,t,n){return e((e=>Vf(e).then((s=>{if(!(s.length>=n))return e.put(t,Math.min(...s,0)-1),Wf(e.transaction)}))))}(n(),s,e.maxQueueSize||30)}catch(e){}},shift:async()=>{try{const e=await function(e){return e((e=>Vf(e).then((t=>{const n=t[0];if(null!=n)return Wf(e.get(n)).then((t=>(e.delete(n),Wf(e.transaction).then((()=>t)))))}))))}(n());if(e)return function(e){let t="string"==typeof e?qn(e):e;function n(e){const n=t.subarray(0,e);return t=t.subarray(e+1),n}function s(){let e=t.indexOf(10);return e<0&&(e=t.length),JSON.parse((s=n(e),r.__SENTRY__&&r.__SENTRY__.decodePolyfill?r.__SENTRY__.decodePolyfill(s):(new TextDecoder).decode(s)));var s}const i=s(),o=[];for(;t.length;){const e=s(),t="number"==typeof e.length?e.length:void 0;o.push([e,t?n(t):s()])}return[i,o]}(e)}catch(e){}}}}function Xf(e=zr){return function(e){return t=>e({...t,createStore:Gf})}(function(e){function t(...e){Y&&l.info("[Offline]:",...e)}return n=>{const s=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const r=n.createStore(n);let i,o=zf;function a(e){i&&clearTimeout(i),i=setTimeout((async()=>{i=void 0;const e=await r.shift();e&&(t("Attempting to send previously queued event"),e[0].sent_at=(new Date).toISOString(),l(e,!0).catch((e=>{t("Failed to retry sending",e)})))}),e),"number"!=typeof i&&i.unref&&i.unref()}function c(){i||(a(o),o=Math.min(2*o,qf))}async function l(e,i=!1){if(!i&&zn(e,["replay_event","replay_recording"]))return await r.push(e),a(Hf),{};try{const t=await s.send(e);let n=Hf;if(t)if(t.headers&&t.headers["retry-after"])n=Fr(t.headers["retry-after"]);else if(t.headers&&t.headers["x-sentry-rate-limits"])n=6e4;else if((t.statusCode||0)>=400)return t;return a(n),o=zf,t}catch(s){if(await function(e,t,s){return!zn(e,["client_report"])&&(!n.shouldStore||n.shouldStore(e,t,s))}(e,s,o))return i?await r.unshift(e):await r.push(e),c(),t("Error sending. Event queued.",s),{};throw s}}return n.flushAtStartup&&c(),{send:l,flush:e=>s.flush(e)}}}(e))}function Yf(){return window.location.hostname.includes("app.napkin.ai")||"true"===new URLSearchParams(window.location.search).get("isProduction")}function Jf(e,t,n){try{const s=n.toLowerCase();if(e.message&&e.message.toLowerCase().includes(s))return!0;if(t&&t.originalException){const e=t.originalException;if(e&&e.message&&e.message.toLowerCase().includes(s))return!0}if(e.exception&&Array.isArray(e.exception.values))for(const t of e.exception.values)if(t.stacktrace&&Array.isArray(t.stacktrace.frames))for(const e of t.stacktrace.frames)if(e.filename&&e.filename.toLowerCase().includes(s)||e.function&&e.function.toLowerCase().includes(s))return!0;if(e.culprit&&e.culprit.toLowerCase().includes(s))return!0}catch(e){console.error("[Sentry] Error in _eventComingFromSrc: ",e)}return!1}window.NapkinSentry={errorHashes:{},init:function(){try{Wr({dsn:Yf()?"https://02d72dcf91f3ffafdfa130e080a6f809@o4507804332654592.ingest.de.sentry.io/4507825891246160":"https://f7b31574b55e1d3a86ce2e969584fc2b@o4507804332654592.ingest.de.sentry.io/4507804354609232",release:window.gitCommit||"unknown",integrations:[Zo(),Ea(),hd({maskAllText:!1,blockAllMedia:!1})],tracesSampleRate:.1,tracePropagationTargets:["localhost",/^https:\/\/napkin\.ai\/api/],replaysSessionSampleRate:0,replaysOnErrorSampleRate:1,profilesSampleRate:1,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed with undelivered notifications","Non-Error promise rejection captured with value","Error looking up record in object store by key range","WKWebView API client did not respond to this postMessage","Invalid call to runtime.sendMessage(). Tab not found.","Invalid event type from worker: undefined","Unexpected EOF","NS_ERROR_NOT_INITIALIZED","NS_ERROR_ABORT","NS_ERROR_FAILURE","NS_ERROR_UNEXPECTED","NS_ERROR_FILE_NOT_DIRECTORY","The operation is insecure.","Failed to execute 'write' on 'Clipboard': Document is not focused.","sendBeacon",/^Method not found$/,"Failed to execute 'insertRule' on 'CSSStyleSheet'","TypeError: Illegal invocation","Unexpected token","Unexpected end of script","Unexpected end of input","Promise.resolve is not a function","Failed to fetch","Load failed","AbortError","NetworkError when attempting to fetch resource.","NS_ERROR_FILE_NOT_FOUND","Unexpected identifier 'https","Connection to Indexed Database server lost. Refresh the page to try again","Database deleted by request of the user","Encountered full disk while opening backing store for indexedDB.open.","Unable to open database file on disk","Internal error opening backing store for indexedDB.open.","Internal error deleting database.","Object store cannot be found in the database","secret is not defined","zaloJSV2","Stylesheet append timeout","(type=unhandledrejection) captured as promise rejection","LaunchDarklyFlagFetchError","GA is not defined","Invalid content for node type paragraph","Failed to execute 'collapse' on 'Selection'","null is not an object (evaluating 'o.type')","Called contentMatchAt on a node with invalid content","Content hole not allowed in a leaf node spec","is larger than the node's length","IFrameMessageHandler","onReady is not defined","onHide is not defined","window.webkit.messageHandlers","kCFErrorDomainCFNetwork","Attempting to change value of a readonly property.","TypeError: window.checkLogin is not a function","Origin is only applicable schemes http and https: file://","Object captured as promise rejection with keys:","AbortController is not a constructor","window.performance.getEntriesByName","jb","_chromeNamespace","contentWindow","Can't find variable: post","Can't find variable: GM_getValue","webVitals.getCLS is not a function","jQuery is not defined","$ is not defined","Java bridge method invocation error","Java object is gone","WebViewJavascriptBridge is not defined","GetHTMLElementsAtPoint","Data cannot be cloned","window[objectName][methodName] is not a function","window[functionName] is not a function","TricentisAlertAlerter","TricentisShadowDomUnlocker","shadowDOMUnlocker is not defined","toscaAlertAlerter is not defined","yandexReadabilityChecker","_logicalFormForControl",/^Cannot read properties of null (reading 'document')$/,/^f is undefined$/,"change_ua","Menu caption text is required!","Not allowed to access cross-origin stylesheet","webtranslation_detect"],beforeSend(e,t){try{if(e.message&&window.NapkinSentry.errorHashes[e.message]>5)return null;window.NapkinSentry.errorHashes[e.message]=window.NapkinSentry.errorHashes[e.message]?window.NapkinSentry.errorHashes[e.message]+1:1}catch(e){console.error("[Sentry] Error in beforeSend: ",e)}return Jf(e,t,"file://")?(console.warn("[Sentry] Ignoring local file error: ",e.message),null):Jf(e,t,"blob:")?(console.warn("[Sentry] Ignoring blob file error: ",e.message),null):Jf(e,t,"chrome-extension://")?(console.warn("[Sentry] Ignoring chrome extension error: ",e.message),null):Jf(e,t,"clarity.js")?(console.warn("[Sentry] Ignoring clarity.js error: ",e.message),null):Jf(e,t,"@sentry-internal")||Jf(e,t,"@sentry")?(console.warn("[Sentry] Ignoring sentry-internal error: ",e.message),null):Jf(e,t,"@openreplay")?(console.warn("[Sentry] Ignoring openreplay error: ",e.message),null):Jf(e,t,"gtm.js")?(console.warn("[Sentry] Ignoring Google Tag Manager error: ",e.message),null):Jf(e,t,"prosemirror-transform")||Jf(e,t,"prosemirror-view")?(console.warn("[Sentry] Ignoring prosemirror error: ",e.message),null):Jf(e,t,"translate.googleapis.com")||Jf(e,t,"translate_http")||Jf(e,t,"intercomcdn.com")||Jf(e,t,"rocket-loader.min.js")||Jf(e,t,"u.c.b.r.o.w.s.e.r")?null:e},beforeBreadcrumb(e,t){try{if("console"===e.category&&"debug"===e.level)return null}catch(e){}return e}}),console.debug("[Sentry] Loaded")}catch(e){console.error("[Sentry] Error in loading Sentry: ",e)}if(window.location.search.includes("debug-session=true"))try{md().start(),an("debug-record","true"),console.debug("[Sentry] Session Replay Started from debug-session=true query parameter");const e=window.location.search.match(/email=([^&]*)/);e&&(cn({email:e[1]}),console.debug("[Sentry] User email set for the session replay",e[1]))}catch(e){console.error("[Sentry] Error in starting the session replay: ",e)}},getClient:function(){return t}};var Kf={},Qf=Uint8Array,Zf=Uint16Array,em=Int32Array,tm=new Qf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),nm=new Qf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),sm=new Qf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rm=function(e,t){for(var n=new Zf(31),s=0;s<31;++s)n[s]=t+=1<<e[s-1];var r=new em(n[30]);for(s=1;s<30;++s)for(var i=n[s];i<n[s+1];++i)r[i]=i-n[s]<<5|s;return{b:n,r}},im=rm(tm,2),om=im.b,am=im.r;om[28]=258,am[258]=28;for(var cm=rm(nm,0).r,lm=new Zf(32768),um=0;um<32768;++um){var dm=(43690&um)>>1|(21845&um)<<1;dm=(61680&(dm=(52428&dm)>>2|(13107&dm)<<2))>>4|(3855&dm)<<4,lm[um]=((65280&dm)>>8|(255&dm)<<8)>>1}var hm=function(e,t,n){for(var s=e.length,r=0,i=new Zf(t);r<s;++r)e[r]&&++i[e[r]-1];var o,a=new Zf(t);for(r=1;r<t;++r)a[r]=a[r-1]+i[r-1]<<1;if(n){o=new Zf(1<<t);var c=15-t;for(r=0;r<s;++r)if(e[r])for(var l=r<<4|e[r],u=t-e[r],d=a[e[r]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)o[lm[d]>>c]=l}else for(o=new Zf(s),r=0;r<s;++r)e[r]&&(o[r]=lm[a[e[r]-1]++]>>15-e[r]);return o},pm=new Qf(288);for(um=0;um<144;++um)pm[um]=8;for(um=144;um<256;++um)pm[um]=9;for(um=256;um<280;++um)pm[um]=7;for(um=280;um<288;++um)pm[um]=8;var fm=new Qf(32);for(um=0;um<32;++um)fm[um]=5;var mm=hm(pm,9,0),gm=hm(fm,5,0),ym=function(e){return(e+7)/8|0},_m=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new Qf(e.subarray(t,n))},bm=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],vm=function(e,t,n){var s=new Error(t||bm[e]);if(s.code=e,Error.captureStackTrace&&Error.captureStackTrace(s,vm),!n)throw s;return s},Sm=function(e,t,n){n<<=7&t;var s=t/8|0;e[s]|=n,e[s+1]|=n>>8},wm=function(e,t,n){n<<=7&t;var s=t/8|0;e[s]|=n,e[s+1]|=n>>8,e[s+2]|=n>>16},km=function(e,t){for(var n=[],s=0;s<e.length;++s)e[s]&&n.push({s,f:e[s]});var r=n.length,i=n.slice();if(!r)return{t:Rm,l:0};if(1==r){var o=new Qf(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var a=n[0],c=n[1],l=0,u=1,d=2;for(n[0]={s:-1,f:a.f+c.f,l:a,r:c};u!=r-1;)a=n[n[l].f<n[d].f?l++:d++],c=n[l!=u&&n[l].f<n[d].f?l++:d++],n[u++]={s:-1,f:a.f+c.f,l:a,r:c};var h=i[0].s;for(s=1;s<r;++s)i[s].s>h&&(h=i[s].s);var p=new Zf(h+1),f=Em(n[u-1],p,0);if(f>t){s=0;var m=0,g=f-t,y=1<<g;for(i.sort((function(e,t){return p[t.s]-p[e.s]||e.f-t.f}));s<r;++s){var _=i[s].s;if(!(p[_]>t))break;m+=y-(1<<f-p[_]),p[_]=t}for(m>>=g;m>0;){var b=i[s].s;p[b]<t?m-=1<<t-p[b]++-1:++s}for(;s>=0&&m;--s){var v=i[s].s;p[v]==t&&(--p[v],++m)}f=t}return{t:new Qf(p),l:f}},Em=function(e,t,n){return-1==e.s?Math.max(Em(e.l,t,n+1),Em(e.r,t,n+1)):t[e.s]=n},xm=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Zf(++t),s=0,r=e[0],i=1,o=function(e){n[s++]=e},a=1;a<=t;++a)if(e[a]==r&&a!=t)++i;else{if(!r&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(r),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(r);i=1,r=e[a]}return{c:n.subarray(0,s),n:t}},Tm=function(e,t){for(var n=0,s=0;s<t.length;++s)n+=e[s]*t[s];return n},Im=function(e,t,n){var s=n.length,r=ym(t+2);e[r]=255&s,e[r+1]=s>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var i=0;i<s;++i)e[r+i+4]=n[i];return 8*(r+4+s)},Cm=function(e,t,n,s,r,i,o,a,c,l,u){Sm(t,u++,n),++r[256];for(var d=km(r,15),h=d.t,p=d.l,f=km(i,15),m=f.t,g=f.l,y=xm(h),_=y.c,b=y.n,v=xm(m),S=v.c,w=v.n,k=new Zf(19),E=0;E<_.length;++E)++k[31&_[E]];for(E=0;E<S.length;++E)++k[31&S[E]];for(var x=km(k,7),T=x.t,I=x.l,C=19;C>4&&!T[sm[C-1]];--C);var M,R,N,O,A=l+5<<3,D=Tm(r,pm)+Tm(i,fm)+o,L=Tm(r,h)+Tm(i,m)+o+14+3*C+Tm(k,T)+2*k[16]+3*k[17]+7*k[18];if(c>=0&&A<=D&&A<=L)return Im(t,u,e.subarray(c,c+l));if(Sm(t,u,1+(L<D)),u+=2,L<D){M=hm(h,p,0),R=h,N=hm(m,g,0),O=m;var P=hm(T,I,0);for(Sm(t,u,b-257),Sm(t,u+5,w-1),Sm(t,u+10,C-4),u+=14,E=0;E<C;++E)Sm(t,u+3*E,T[sm[E]]);u+=3*C;for(var F=[_,S],$=0;$<2;++$){var j=F[$];for(E=0;E<j.length;++E){var B=31&j[E];Sm(t,u,P[B]),u+=T[B],B>15&&(Sm(t,u,j[E]>>5&127),u+=j[E]>>12)}}}else M=mm,R=pm,N=gm,O=fm;for(E=0;E<a;++E){var U=s[E];if(U>255){wm(t,u,M[257+(B=U>>18&31)]),u+=R[B+257],B>7&&(Sm(t,u,U>>23&31),u+=tm[B]);var H=31&U;wm(t,u,N[H]),u+=O[H],H>3&&(wm(t,u,U>>5&8191),u+=nm[H])}else wm(t,u,M[U]),u+=R[U]}return wm(t,u,M[256]),u+R[256]},Mm=new em([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Rm=new Qf(0),Nm=function(e,t,n,s,r,i){var o=i.z||e.length,a=new Qf(s+o+5*(1+Math.ceil(o/7e3))+r),c=a.subarray(s,a.length-r),l=i.l,u=7&(i.r||0);if(t){u&&(c[0]=i.r>>3);for(var d=Mm[t-1],h=d>>13,p=8191&d,f=(1<<n)-1,m=i.p||new Zf(32768),g=i.h||new Zf(f+1),y=Math.ceil(n/3),_=2*y,b=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<_)&f},v=new em(25e3),S=new Zf(288),w=new Zf(32),k=0,E=0,x=i.i||0,T=0,I=i.w||0,C=0;x+2<o;++x){var M=b(x),R=32767&x,N=g[M];if(m[R]=N,g[M]=R,I<=x){var O=o-x;if((k>7e3||T>24576)&&(O>423||!l)){u=Cm(e,c,0,v,S,w,E,T,C,x-C,u),T=k=E=0,C=x;for(var A=0;A<286;++A)S[A]=0;for(A=0;A<30;++A)w[A]=0}var D=2,L=0,P=p,F=R-N&32767;if(O>2&&M==b(x-F))for(var $=Math.min(h,O)-1,j=Math.min(32767,x),B=Math.min(258,O);F<=j&&--P&&R!=N;){if(e[x+D]==e[x+D-F]){for(var U=0;U<B&&e[x+U]==e[x+U-F];++U);if(U>D){if(D=U,L=F,U>$)break;var H=Math.min(F,U-2),z=0;for(A=0;A<H;++A){var q=x-F+A&32767,W=q-m[q]&32767;W>z&&(z=W,N=q)}}}F+=(R=N)-(N=m[R])&32767}if(L){v[T++]=268435456|am[D]<<18|cm[L];var V=31&am[D],G=31&cm[L];E+=tm[V]+nm[G],++S[257+V],++w[G],I=x+D,++k}else v[T++]=e[x],++S[e[x]]}}for(x=Math.max(x,I);x<o;++x)v[T++]=e[x],++S[e[x]];u=Cm(e,c,l,v,S,w,E,T,C,x-C,u),l||(i.r=7&u|c[u/8|0]<<3,u-=7,i.h=g,i.p=m,i.i=x,i.w=I)}else{for(x=i.w||0;x<o+l;x+=65535){var X=x+65535;X>=o&&(c[u/8|0]=l,X=o),u=Im(c,u+1,e.subarray(x,X))}i.i=o}return _m(a,0,s+ym(u)+r)},Om=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,s=9;--s;)n=(1&n&&-306674912)^n>>>1;e[t]=n}return e}(),Am=function(){var e=-1;return{p:function(t){for(var n=e,s=0;s<t.length;++s)n=Om[255&n^t[s]]^n>>>8;e=n},d:function(){return~e}}},Dm=function(e,t,n,s,r){if(!r&&(r={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new Qf(i.length+e.length);o.set(i),o.set(e,i.length),e=o,r.w=i.length}return Nm(e,null==t.level?6:t.level,null==t.mem?r.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,s,r)},Lm=function(e,t,n){for(var s=e(),r=e.toString(),i=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/\s+/g,"").split(","),o=0;o<s.length;++o){var a=s[o],c=i[o];if("function"==typeof a){t+=";"+c+"=";var l=a.toString();if(a.prototype)if(-1!=l.indexOf("[native code]")){var u=l.indexOf(" ",8)+1;t+=l.slice(u,l.indexOf("(",u))}else for(var d in t+=l,a.prototype)t+=";"+c+".prototype."+d+"="+a.prototype[d].toString();else t+=l}else n[c]=a}return t},Pm=[],Fm=function(){return[Qf,Zf,em,tm,nm,sm,am,cm,mm,pm,gm,fm,lm,Mm,Rm,hm,Sm,wm,km,Em,xm,Tm,Im,Cm,ym,_m,Nm,Dm,zm,jm]},$m=function(){return[Um,Hm,Bm,Am,Om]},jm=function(e){return postMessage(e,[e.buffer])},Bm=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},Um=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&Bm(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var s=0;s<=n.length;++s)e[s+10]=n.charCodeAt(s)}},Hm=function(e){return 10+(e.filename?e.filename.length+1:0)};function zm(e,t){return Dm(e,t||{},0,0)}function qm(e,t,n){return n||(n=t,t={}),"function"!=typeof n&&vm(7),function(e,t,n,s,r,i){var o=function(e,t,n,s){if(!Pm[n]){for(var r="",i={},o=e.length-1,a=0;a<o;++a)r=Lm(e[a],r,i);Pm[n]={c:Lm(e[o],r,i),e:i}}var c=function(e,t){var n={};for(var s in e)n[s]=e[s];for(var s in t)n[s]=t[s];return n}({},Pm[n].e);return function(e,t,n,s,r){var i=new Worker(Kf[t]||(Kf[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return i.onmessage=function(e){var t=e.data,n=t.$e$;if(n){var s=new Error(n[0]);s.code=n[1],s.stack=n[2],r(s,null)}else r(null,t)},i.postMessage(n,s),i}(Pm[n].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,c,function(e){var t=[];for(var n in e)e[n].buffer&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t}(c),s)}(n,(function(e){return jm(Wm(e.data[0],e.data[1]))}),2,(function(e,t){o.terminate(),i(e,t)}));return o.postMessage([e,t],t.consume?[e.buffer]:[]),function(){o.terminate()}}(e,t,[Fm,$m,function(){return[Wm]}],0,0,n)}function Wm(e,t){t||(t={});var n=Am(),s=e.length;n.p(e);var r=Dm(e,t,Hm(t),8),i=r.length;return Um(r,t),Bm(r,i-8,n.d()),Bm(r,i-4,s),r}var Vm="undefined"!=typeof TextDecoder&&new TextDecoder;try{Vm.decode(Rm,{stream:!0})}catch(e){}class Gm{constructor(){this.idx=1,this.backDict={}}getKey(e){let t=!1;return this.backDict[e]||(t=!0,this.backDict[e]=this.idx++),[this.backDict[e],t]}}class Xm{constructor(e){this.dict=new Gm,this.app=e.app,this.isDictDisabled=e.isDictDisabled}sendSetAttribute(e,t,n){if(this.isDictDisabled){const s=[12,e,t,n];return this.app.send(s)}{const s=[51,e,this.applyDict(t),this.applyDict(n)];return this.app.send(s)}}applyDict(e){const[t,n]=this.dict.getKey(e);return n&&this.app.send([50,t,e]),t}clear(){this.dict=new Gm}}class Ym{constructor(e,t){this.app=e,this.startParams=t,this.conditions=[],this.hasStarted=!1,this.createConditionFromFilter=e=>{if(e.value.length){const t=Km(e);if(t.type)return t}},this.durationInt=null}setConditions(e){this.conditions=e}async fetchConditions(e,t){try{const n=await fetch(`${this.app.options.ingestPoint}/v1/web/conditions/${e}`,{method:"GET",headers:{Authorization:`Bearer ${t}`}}),{conditions:s}=await n.json(),r=[];s.forEach((e=>{e.filters.forEach((t=>{let n;"fetch"===t.type?(n={type:"network_request",subConditions:[],name:e.name},t.filters.forEach((e=>{const t=this.createConditionFromFilter(e);t&&n.subConditions.push(t)}))):n=this.createConditionFromFilter(t),n&&("session_duration"===n.type&&this.processDuration(n.value[0],e.name),r.push({...n,name:e.name}))}))})),this.conditions=r}catch(e){this.app.debug.error("Critical: cannot fetch start conditions")}}trigger(e){if(!this.hasStarted)try{this.hasStarted=!0,this.app.start(this.startParams,void 0,e)}catch(e){this.app.debug.error(e)}}processMessage(e){if(!this.hasStarted)switch(e[0]){case 78:this.jsExceptionEvent(e);break;case 27:this.customEvent(e);break;case 68:this.clickEvent(e);break;case 122:this.pageLocationEvent(e);break;case 83:this.networkRequest(e)}}processFlags(e){const t=this.conditions.filter((e=>"feature_flag"===e.type));t.length&&t.forEach((t=>{const n=Jm[t.operator];n&&e.find((e=>n(e.key,t.value)))&&this.trigger(t.name)}))}processDuration(e,t){this.durationInt=setInterval((()=>{performance.now()>e&&this.trigger(t)}),1e3),this.app.attachStopCallback((()=>{this.durationInt&&clearInterval(this.durationInt)}))}networkRequest(e){const t=this.conditions.filter((e=>"network_request"===e.type));t.length&&t.forEach((t=>{const n=t.subConditions.filter((e=>"isAny"!==e.operator));n.length?n.every((t=>{let n;switch(t.key){case"url":n=e[3];break;case"status":n=e[6];break;case"method":n=e[2];break;case"duration":n=e[8]}const s=Jm[t.operator];if(s&&s(n,t.value))return!0}))&&this.trigger(t.name):0===n.length&&t.subConditions.length&&this.trigger(t.name)}))}customEvent(e){const t=this.conditions.filter((e=>"custom_event"===e.type));t.length&&t.forEach((t=>{const n=Jm[t.operator];n&&(n(e[1],t.value)||n(e[2],t.value))&&this.trigger(t.name)}))}clickEvent(e){const t=this.conditions.filter((e=>"click"===e.type));t.length&&t.forEach((t=>{const n=Jm[t.operator];n&&(n(e[3],t.value)||n(e[4],t.value))&&this.trigger(t.name)}))}pageLocationEvent(e){const t=this.conditions.filter((e=>"visited_url"===e.type));t&&t.forEach((t=>{const n=Jm[t.operator];n&&n(e[1],t.value)&&this.trigger(t.name)}))}jsExceptionEvent(e){const t=[e[1],e[2],e[3]],n=this.conditions.filter((e=>"exception"===e.type));n&&n.forEach((e=>{const n=Jm[e.operator];n&&t.some((t=>n(t,e.value)))&&this.trigger(e.name)}))}}const Jm={is:(e,t)=>t.some((t=>e.includes(t))),isAny:()=>!0,isNot:(e,t)=>!t.some((t=>e.includes(t))),contains:(e,t)=>t.some((t=>e.includes(t))),notContains:(e,t)=>!t.some((t=>e.includes(t))),startsWith:(e,t)=>t.some((t=>e.startsWith(t))),endsWith:(e,t)=>t.some((t=>e.endsWith(t))),greaterThan:(e,t)=>e>t,greaterOrEqual:(e,t)=>e>=t,lessOrEqual:(e,t)=>e<=t,lessThan:(e,t)=>e<t},Km=e=>{const t={on:"is",notOn:"isNot",">":"greaterThan","<":"lessThan","=":"is","<=":"lessOrEqual",">=":"greaterOrEqual"},n=e=>{if(Object.keys(t).includes(e))return t[e]};let s={type:"",operator:"",value:e.value,key:""};switch(e.type){case"click":s={type:"click",operator:n(e.operator),value:e.value,key:""};break;case"location":s={type:"visited_url",operator:e.operator,value:e.value,key:""};break;case"custom":s={type:"custom_event",operator:e.operator,value:e.value,key:""};break;case"metadata":s={type:"featureFlag"===e.source?"feature_flag":e.type,operator:e.operator,value:e.value,key:""};break;case"error":s={type:"exception",operator:e.operator,value:e.value,key:""};break;case"duration":s={type:"session_duration",value:e.value[0],key:""};break;case"fetchUrl":s={type:"network_request",key:"url",operator:e.operator,value:e.value};break;case"fetchStatusCode":s={type:"network_request",key:"status",operator:n(e.operator),value:e.value};break;case"fetchMethod":s={type:"network_request",key:"method",operator:n(e.operator),value:e.value};break;case"fetchDuration":s={type:"network_request",key:"duration",operator:n(e.operator),value:e.value}}return s};class Qm{constructor(e){this.app=e,this.flags=[],this.storageKey="__openreplay_flags";const t=this.app.sessionStorage.getItem(this.storageKey);if(t){const e=t.split(";").filter(Boolean);this.flags=e.map((e=>JSON.parse(e)))}}getFeatureFlag(e){return this.flags.find((t=>t.key===e))}isFlagEnabled(e){return-1!==this.flags.findIndex((t=>t.key===e))}onFlagsLoad(e){this.onFlagsCb=e}async reloadFlags(e){const t=this.app.sessionStorage.getItem(this.storageKey),n={};t&&t.split(";").filter(Boolean).forEach((e=>{const t=JSON.parse(e);n[t.key]={key:t.key,value:t.value}}));const s=this.app.session.getInfo(),r=this.app.session.userInfo,i={projectID:s.projectID,userID:s.userID,metadata:s.metadata,referrer:document.referrer,os:r.userOS,device:r.userDevice,country:r.userCountry,state:r.userState,city:r.userCity,browser:r.userBrowser,persistFlags:n},o=e??this.app.session.getSessionToken(),a=await fetch(this.app.options.ingestPoint+"/v1/web/feature-flags",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(i)});if(200===a.status){const e=await a.json();return this.handleFlags(e.flags)}}handleFlags(e){const t=[];e.forEach((e=>{e.is_persist&&t.push(e)}));let n="";return this.diffPersist(t).forEach((e=>{n+=`${JSON.stringify(e)};`})),this.app.sessionStorage.setItem(this.storageKey,n),this.flags=e,this.onFlagsCb?.(e)}clearPersistFlags(){this.app.sessionStorage.removeItem(this.storageKey)}diffPersist(e){const t=this.app.sessionStorage.getItem(this.storageKey);if(!t)return e;const n=t.split(";").filter(Boolean).map((e=>JSON.parse(e)));return e.filter((e=>-1===n.findIndex((t=>t.key===e.key))))}}const Zm={htmlmasked:"hidden",masked:"obscured"},eg=!("undefined"==typeof window),tg=eg&&navigator.userAgent.match(/firefox|fxios/i);let ng=eg?Date.now()-performance.now():0;function sg(){ng=Date.now()-performance.now()}function rg(){return ng}const ig=eg&&performance.now?()=>Math.round(performance.now()+ng):()=>Date.now(),og="repeat"in String.prototype?e=>"*".repeat(e.length):e=>e.replace(/./g,"*");function ag(e){return e.trim().replace(/\s+/g," ")}function cg(e){return e.startsWith("https://")||e.startsWith("http://")}const lg="https://docs.openreplay.com",ug={};function dg(e,t,n="/"){ug[e]||(console.warn(`OpenReplay: ${e} is deprecated. ${t?`Please, use ${t} instead.`:""} Visit ${lg}${n} for more information.`),ug[e]=!0)}function hg(e){let t=e.getAttribute("data-openreplay-label");return null!==t||(t=e.getAttribute("data-asayer-label"),null!==t&&dg('"data-asayer-label" attribute','"data-openreplay-label" attribute',"/")),t}function pg(e,t){const n=`data-openreplay-${t}`;return!!e.hasAttribute(n)&&(Zm[t]&&dg(`"${n}" attribute`,`"${Zm[t]}" attribute`,"/installation/sanitize-data"),!0)}function fg(e){try{return e instanceof HTMLIFrameElement?e.contentDocument:e instanceof Window?e.document:e instanceof Document?e.defaultView:"nodeType"in e?e.nodeType:"addEventListener"in e&&e.addEventListener,!0}catch(e){if(e instanceof DOMException&&"SecurityError"===e.name)return!1}return!0}function mg(e){return e.toString(16).padStart(2,"0")}function gg(){try{return window.self&&window.top&&window.self!==window.top}catch(e){return!0}}function yg(e){return window.Zone&&"__symbol__"in window.Zone?window.Zone.__symbol__(e):e}function _g(e,t){if(t)return new MutationObserver(e);{const t=yg("MutationObserver");return new window[t](e)}}function bg(e,t,n,s,r){if(!fg(e))return;let i="addEventListener";r||(i=yg("addEventListener"));try{e[i]?e[i](t,n,s):e.addEventListener(t,n,s)}catch(n){const s=n.message;console.error(`Openreplay: ${s}; if this error is caused by an IframeObserver, ignore it`,t,e)}}function vg(e,t,n,s,r){if(!fg(e))return;let i="removeEventListener";r||(i=yg("removeEventListener"));try{e[i]?e[i](t,n,s):e.removeEventListener(t,n,s)}catch(n){const s=n.message;console.error(`Openreplay: ${s}; if this error is caused by an IframeObserver, ignore it`,t,e)}}const Sg=new class{constructor(){this.taskQueue=[],this.isRunning=!1}addTask(e){this.taskQueue.push(e),this.runTasks()}runTasks(){if(this.isRunning||0===this.taskQueue.length)return;this.isRunning=!0;const e=()=>{if(0===this.taskQueue.length)return void(this.isRunning=!1);const t=this.taskQueue.shift();Promise.resolve(t()).then((()=>{requestAnimationFrame((()=>e()))}))};e()}};function wg(e,t){const n={...e};for(const s in t)if(t.hasOwnProperty(s)){const r=t[s],i=e[s];"object"!=typeof r||Array.isArray(r)||null===r?n[s]=r:n[s]=wg(i||{},r)}return n}function kg(e){return[0,e]}function Eg(e){return[11,e]}function xg(e,t){return[13,e,t]}function Tg(e,t){return[30,e,t]}function Ig(e,t,n,s){return[57,e,t,n,s]}function Cg(e){return[58,e]}function Mg(e,t,n,s){return[60,e,t,n,s]}function Rg(e,t){return[70,e,t]}function Ng(e,t,n){return[71,e,t,n]}function Og(e,t,n,s){return[73,e,t,n,s]}function Ag(e,t){return[75,e,t]}function Dg(e,t){return[76,e,t]}function Lg(e,t){return[77,e,t]}function Pg(e,t,n,s){return[78,e,t,n,s]}function Fg(e,t,n,s,r,i,o,a,c){return[83,e,t,n,s,r,i,o,a,c]}function $g(e,t,n){return[113,e,t,n]}function jg(e){return[115,e]}function Bg(e,t,n,s,r,i,o,a,c,l){return[116,e,t,n,s,r,i,o,a,c,l]}function Ug(e){return[117,e]}function Hg(e){return[118,e]}const zg=eg&&"performance"in window&&"memory"in performance?performance:{memory:{}},qg=eg?1024*(navigator.deviceMemory||0):0,Wg=zg.memory.jsHeapSizeLimit||0,Vg="__or__watched_tags__";class Gg{constructor(e){this.intervals={},this.tags=[],this.sessionStorage=e.sessionStorage,this.errLog=e.errLog,this.onTag=e.onTag;const t=JSON.parse(e.sessionStorage.getItem(Vg)??"[]");this.setTags(t),this.observer=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting&&e.target){const t=e.target.__or_watcher_tagname;t&&this.onTagRendered(t),this.observer.unobserve(e.target)}}))}))}async fetchTags(e,t){return fetch(`${e}/v1/web/tags`,{method:"GET",headers:{Authorization:`Bearer ${t}`}}).then((e=>e.json())).then((({tags:e})=>{if(e&&e.length){this.setTags(e);const t=JSON.stringify(e);this.sessionStorage.setItem(Vg,t||"")}})).catch((e=>this.errLog(e)))}setTags(e){this.tags=e,this.intervals={},e.forEach((e=>{this.intervals[e.id]=setInterval((()=>{const t=document.querySelectorAll(e.selector);if(t.length>0){const n=t[0];n.__or_watcher_tagname=e.id,this.observer.observe(n)}}),500)}))}onTagRendered(e){this.intervals[e]&&clearInterval(this.intervals[e]),this.onTag(e)}clear(){this.tags.forEach((e=>{clearInterval(this.intervals[e.id])})),this.tags=[],this.intervals={},this.observer.disconnect()}}const Xg={position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0, 0, 0, 0.40)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"'},Yg={display:"flex",flexDirection:"column",gap:"2rem",alignItems:"center",padding:"1.5rem",borderRadius:"2px",border:"1px solid #D9D9D9",background:"#FFF",width:"22rem"},Jg={display:"flex","flex-direction":"column",gap:"unset","align-items":"center",padding:"unset",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',"border-radius":"2px",border:"1px solid #D9D9D9",background:"rgba(255, 255, 255, 0.75)",width:"22rem"},Kg={fontFamily:"Verdana, sans-serif",fontSize:"1.25rem",fontStyle:"normal",fontWeight:"500",lineHeight:"1.75rem",color:"rgba(0, 0, 0, 0.85)"},Qg={borderTop:"1px solid rgba(0, 0, 0, 0.06)",borderBottom:"1px solid rgba(0, 0, 0, 0.06)",padding:"1.25rem 0rem",color:"rgba(0, 0, 0, 0.85)",fontFamily:"Verdana, sans-serif",fontSize:"13px",fontStyle:"normal",fontWeight:"400",lineHeight:"auto",whiteSpace:"pre-wrap"},Zg={display:"flex",padding:"0.4rem 0.9375rem",justifyContent:"center",alignItems:"center",gap:"0.625rem",borderRadius:"0.25rem",border:"1px solid #394EFF",background:"#394EFF",boxShadow:"0px 2px 0px 0px rgba(0, 0, 0, 0.04)",color:"#FFF",textAlign:"center",fontFamily:"Verdana, sans-serif",fontSize:"1rem",fontStyle:"normal",fontWeight:"500",lineHeight:"1.5rem",cursor:"pointer"},ey={fontFamily:"Verdana, sans-serif",fontSize:"13px",fontWeight:"500",lineHeight:"auto",display:"flex",justifyContent:"space-between",width:"100%",cursor:"pointer"},ty={display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.625rem",fontSize:"13px",lineHeight:"auto"},ny={padding:"0.5rem",gap:"0.5rem",fontFamily:"Verdana, sans-serif",fontSize:"16px",fontStyle:"normal",fontWeight:"500",lineHeight:"auto",color:"white",display:"flex",alignItems:"center",width:"100%",borderRadius:"2px",background:"rgba(0, 0, 0, 0.75)",boxSizing:"border-box"},sy={boxSizing:"border-box",display:"block",width:"100%",borderBottom:"1px solid #D9D9D9",background:"#FFF",padding:"0.65rem",alignSelf:"stretch",color:"#000",fontFamily:"Verdana, sans-serif",fontStyle:"normal",fontWeight:"400"},ry={...sy,display:"flex",flexDirection:"column",alignItems:"center",gap:"0.625rem"},iy={fontSize:"1.25rem",fontWeight:"500",cursor:"pointer",color:"#394EFF"},oy={display:"flex",padding:"0.4rem 0.9375rem",justifyContent:"center",alignItems:"center",gap:"0.625rem",borderRadius:"0.25rem",border:"1px solid #394EFF",background:"#394EFF",boxShadow:"0px 2px 0px 0px rgba(0, 0, 0, 0.04)",color:"#FFF",textAlign:"center",fontFamily:"Verdana, sans-serif",fontSize:"1rem",fontStyle:"normal",fontWeight:"500",lineHeight:"1.5rem",width:"100%",boxSizing:"border-box",cursor:"pointer"},ay={marginTop:"1rem",marginBottom:"1rem",cursor:"pointer",display:"block",fontWeight:"500",fontSize:"13px!important",lineHeight:"auto"},cy={display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",padding:"0.5rem",width:"100%",boxSizing:"border-box"},ly={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:"6.25em",outline:"1px solid #394EFF",fontSize:"13px",height:"24px",width:"24px"},uy={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:"6.25em",outline:"1px solid #D2DFFF",boxShadow:"0px 2px 0px 0px rgba(0, 0, 0, 0.04)",background:"#D2DFFF",fontSize:"13px",height:"24px",width:"24px"},dy={borderRadius:"0.375rem",border:"1px solid rgba(0, 0, 0, 0.06)",background:"#F5F7FF",boxShadow:"0px 2px 0px 0px rgba(0, 0, 0, 0.04)",display:"flex",flexDirection:"column",padding:"0.625rem 0.9375rem",gap:"0.5rem",alignSelf:"stretch"},hy={fontWeight:"bold"},py={fontSize:"13px",lineHeight:"auto"},fy={marginRight:"0.5rem",cursor:"pointer",color:"#394EFF",textAlign:"center",fontFamily:"Verdana, sans-serif",fontSize:"13px",fontStyle:"normal",fontWeight:"500",lineHeight:"auto"},my={...fy,display:"flex",padding:"0.25rem 0.9375rem",justifyContent:"center",alignItems:"center",gap:"0.5rem",borderRadius:"0.25rem",border:"1px solid #394EFF"},gy={display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",boxSizing:"border-box"},yy={border:"4px solid rgba(255, 255, 255, 0.4)",width:"16px",height:"16px",borderRadius:"50%",borderLeftColor:"#fff",animation:"spin 0.5s linear infinite"},_y={width:1280,height:720};class by{constructor(e){this.app=e,this.mediaRecorder=null,this.recordedChunks=[],this.stream=null,this.recStartTs=null}async startRecording(e,t,n,s){this.recStartTs=this.app.timestamp();const r=t;try{this.stream=await navigator.mediaDevices.getUserMedia({video:!!s&&{...r,frameRate:{ideal:e}},audio:n}),this.mediaRecorder=new MediaRecorder(this.stream,{mimeType:"video/webm;codecs=vp9"}),this.recordedChunks=[],this.mediaRecorder.ondataavailable=e=>{e.data.size>0&&this.recordedChunks.push(e.data)},this.mediaRecorder.start()}catch(e){console.error(e)}}async stopRecording(){return new Promise((e=>{this.mediaRecorder&&(this.mediaRecorder.onstop=()=>{const t=new Blob(this.recordedChunks,{type:"video/webm"});e(t)},this.mediaRecorder.stop())}))}async sendToAPI(){const e=await this.stopRecording();return fetch(`${this.app.options.ingestPoint}/v1/web/uxt/upload-url`,{headers:{Authorization:`Bearer ${this.app.session.getSessionToken()}`}}).then((e=>{if(e.ok)return e.json();throw new Error("Failed to get upload url")})).then((({url:t})=>fetch(t,{method:"PUT",headers:{"Content-Type":"video/webm"},body:e}))).catch(console.error).finally((()=>{this.discard()}))}async saveToFile(e="recorded-video.webm"){const t=await this.stopRecording(),n=URL.createObjectURL(t),s=document.createElement("a");s.style.display="none",s.href=n,s.download=e,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(n),document.body.removeChild(s)}discard(){this.mediaRecorder?.stop(),this.stream?.getTracks().forEach((e=>e.stop()))}}function vy(e,t,n,s,r){const i=document.createElement(e);return i.className=t,Object.assign(i.style,n),s&&(i.textContent=s),r&&(i.id=r),i}const Sy="or_uxt_test_start",wy="or_uxt_task_index",ky="or_uxt_session_id";class Ey{constructor(e,t,n,s,r,i,o,a,c){this.ingestPoint=e,this.getTimestamp=t,this.token=n,this.testId=s,this.storageKey=r,this.setStorageKey=i,this.removeStorageKey=o,this.getStorageKey=a,this.getSessionId=c,this.durations={testStart:0,tasks:[]},this.getDurations=()=>this.durations,this.setDurations=e=>{this.durations.testStart=e.testStart,this.durations.tasks=e.tasks},this.signalTask=(e,t,n)=>{if(!e)return console.error("User Testing: No Task ID Given");const s=this.durations.tasks.find((t=>t.taskId===e)),r=this.getTimestamp(),i=s?r-s.started:0;return fetch(`${this.ingestPoint}/v1/web/uxt/signals/task`,{method:"POST",headers:{Authorization:`Bearer ${this.token}`},body:JSON.stringify({testId:this.testId,taskId:e,status:t,duration:i,timestamp:r,taskAnswer:n})})},this.signalTest=e=>{const t=this.getTimestamp();if("begin"===e&&this.testId){const e=this.getSessionId();this.setStorageKey(ky,e),this.setStorageKey(this.storageKey,this.testId.toString()),this.setStorageKey(Sy,t.toString())}else this.removeStorageKey(this.storageKey),this.removeStorageKey(wy),this.removeStorageKey(Sy);const n=t-(this.durations.testStart||t);return fetch(`${this.ingestPoint}/v1/web/uxt/signals/test`,{method:"POST",headers:{Authorization:`Bearer ${this.token}`},body:JSON.stringify({testId:this.testId,status:e,duration:n,timestamp:t})})};const l=this.getStorageKey(Sy);l&&(this.durations.testStart=parseInt(l,10))}}class xy{constructor(e,t){this.app=e,this.storageKey=t,this.bg=vy("div","bg",Xg,void 0,"__or_ut_bg"),this.container=vy("div","container",Yg,void 0,"__or_ut_ct"),this.widgetGuidelinesVisible=!0,this.widgetTasksVisible=!1,this.widgetVisible=!0,this.isActive=!1,this.descriptionSection=null,this.taskSection=null,this.endSection=null,this.stopButton=null,this.stopButtonContainer=null,this.test=null,this.testId=null,this.signalManager=null,this.getTest=(e,t,n)=>{this.testId=e;const s=this.app.options.ingestPoint;return fetch(`${s}/v1/web/uxt/test/${e}`,{headers:{Authorization:`Bearer ${t}`}}).then((e=>e.json())).then((({test:s})=>{this.isActive=!0,this.test=s,this.signalManager=new Ey(this.app.options.ingestPoint,(()=>this.app.timestamp()),t,e,this.storageKey,((e,t)=>this.app.localStorage.setItem(e,t)),(e=>this.app.localStorage.removeItem(e)),(e=>this.app.localStorage.getItem(e)),(()=>this.app.getSessionID())),this.createGreeting(s.title,s.reqMic,s.reqCamera),n&&((s.reqMic||s.reqCamera)&&this.userRecorder.startRecording(30,_y,s.reqMic,s.reqCamera),this.showWidget(s.description,s.tasks,!0),this.showTaskSection())})).then((()=>e)).catch((e=>{console.log("OR: Error fetching test",e)}))},this.hideTaskSection=()=>!1,this.showTaskSection=()=>!0,this.collapseWidget=()=>!1,this.removeGreeting=()=>!1,this.toggleDescriptionVisibility=()=>{},this.currentTaskIndex=0,this.userRecorder=new by(e),this.app.getSessionID()!==this.app.localStorage.getItem(ky)&&(this.app.localStorage.removeItem(this.storageKey),this.app.localStorage.removeItem(ky),this.app.localStorage.removeItem("or_uxt_test_id"),this.app.localStorage.removeItem(wy),this.app.localStorage.removeItem(Sy));const n=this.app.localStorage.getItem(wy);n&&(this.currentTaskIndex=parseInt(n,10))}getTestId(){return this.testId}createGreeting(e,t,n){const s=vy("div","title",Kg,e),r=vy("div","description",Qg,"Welcome, you're here to help us improve, not to be judged. Your insights matter!\n\n📹 We're recording this browser tab to learn from your experience.\n🎤 Please enable mic and camera if asked, to give us a complete picture."),i=vy("div","button",Zg,"Read guidelines to begin");this.removeGreeting=()=>((t||n)&&this.userRecorder.startRecording(30,_y,t,n),this.container.removeChild(i),this.container.removeChild(r),this.container.removeChild(s),!1),i.onclick=()=>{this.removeGreeting();const e=this.signalManager?.getDurations();e&&this.signalManager&&(e.testStart=this.app.timestamp(),this.signalManager.setDurations(e)),this.signalManager?.signalTest("begin"),this.container.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',Object.assign(this.container.style,Jg),this.showWidget(this.test?.guidelines||"",this.test?.tasks||[])},this.container.append(s,r,i),this.bg.appendChild(this.container),document.body.appendChild(this.bg)}showWidget(e,t,n){this.container.innerHTML="",Object.assign(this.bg.style,{position:"fixed",zIndex:99999999999999,right:"8px",left:"unset",width:"fit-content",top:"8px",height:"fit-content",background:"unset",display:"unset",alignItems:"unset",justifyContent:"unset"});const s=this.createTitleSection();this.container.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',Object.assign(this.container.style,Jg);const r=this.createDescriptionSection(e),i=this.createTasksSection(t),o=vy("div","stop_bn_or",ay,"Abort Session"),a=vy("div","stop_ct_or",{fontSize:"13px!important"});a.style.fontSize="13px",a.append(o),this.container.append(s,r,i,a),this.taskSection=i,this.descriptionSection=r,this.stopButton=o,this.stopButtonContainer=a,o.onclick=()=>{this.userRecorder.discard(),this.signalManager?.signalTest("skipped"),document.body.removeChild(this.bg),window.close()},n?this.toggleDescriptionVisibility():this.hideTaskSection()}createTitleSection(){const e=vy("div","title",ny),t=function(){const e=document.createElement("div");e.className="grid";for(let t=0;t<16;t++){const t=document.createElement("div");Object.assign(t.style,{width:"2px",height:"2px",borderRadius:"10px",background:"white"}),t.className="cell",e.appendChild(t)}return Object.assign(e.style,{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gridTemplateRows:"repeat(4, 1fr)",gap:"2px",cursor:"grab"}),e}(),n=vy("div","title_text",{maxWidth:"19rem",overflow:"hidden",textOverflow:"ellipsis",width:"100%",fontSize:16,lineHeight:"auto",cursor:"pointer"},this.test?.title),s=function(){const e=document.createElement("div");Object.assign(e.style,{width:"0",height:"0",borderLeft:"7px solid transparent",borderRight:"7px solid transparent",borderBottom:"7px solid white"});const t=document.createElement("div");return t.appendChild(e),Object.assign(t.style,{display:"flex",alignItems:"center",justifyContent:"center",width:"16px",height:"16px",cursor:"pointer",marginLeft:"auto",transform:"rotate(180deg)"}),t}();e.append(t,n,s);const r=e=>(this.widgetVisible=e,this.container.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',Object.assign(this.container.style,this.widgetVisible?Jg:{border:"none",background:"none",padding:0}),this.taskSection&&Object.assign(this.taskSection.style,this.widgetVisible?sy:{display:"none"}),this.descriptionSection&&Object.assign(this.descriptionSection.style,this.widgetVisible?sy:{display:"none"}),this.endSection&&Object.assign(this.endSection.style,this.widgetVisible?sy:{display:"none"}),this.stopButton&&Object.assign(this.stopButton.style,this.widgetVisible?ay:{display:"none"}),e),i=()=>{Object.assign(s.style,{transform:this.widgetVisible?"rotate(0deg)":"rotate(180deg)"}),r(!this.widgetVisible)};var o,a;return n.onclick=i,s.onclick=i,o=this.bg,(a=t).onmousedown=function(e){const t=o.getBoundingClientRect(),n=e.clientX-t.left,s=e.clientY-t.top;function r(e,r){let i=e-n,a=r-s;i<=5&&(i=5),a<=5&&(a=5),i>=window.innerWidth-t.width&&(i=window.innerWidth-t.width),a>=window.innerHeight-t.height&&(a=window.innerHeight-t.height),o.style.left=`${i}px`,o.style.top=`${a}px`}function i(e){r(e.pageX,e.pageY)}o.style.position="fixed",o.style.zIndex=99999999999999,r(e.pageX,e.pageY),document.addEventListener("mousemove",i);const a=()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",a)};document.addEventListener("mouseup",a)},a.ondragstart=function(){return!1},this.collapseWidget=()=>r(!1),e}createDescriptionSection(e){const t=vy("div","description_section_or",sy),n=vy("div","description_s_title_or",ey),s=vy("div","title",{fontSize:13,fontWeight:500,lineHeight:"auto"},"Introduction & Guidelines"),r=vy("div","icon",iy,"-"),i=vy("div","content",ty),o=vy("div","text_description",{maxHeight:"250px",overflowY:"auto",whiteSpace:"pre-wrap",fontSize:13,color:"#454545",lineHeight:"auto"});o.innerHTML=e;const a=vy("div","button_begin_or",oy,"Begin Test");n.append(s,r),i.append(o,a),t.append(n,i);const c=()=>{this.widgetGuidelinesVisible=!this.widgetGuidelinesVisible,r.textContent=this.widgetGuidelinesVisible?"-":"+",Object.assign(i.style,this.widgetGuidelinesVisible?ty:{display:"none"})};return n.onclick=c,this.toggleDescriptionVisibility=()=>{this.widgetGuidelinesVisible=!1,r.textContent=this.widgetGuidelinesVisible?"-":"+",Object.assign(i.style,this.widgetGuidelinesVisible?ty:{display:"none"}),i.removeChild(a)},a.onclick=()=>{if(c(),this.test){const e=this.signalManager?.getDurations(),t=e?e.tasks.findIndex((e=>this.test&&e.taskId===this.test.tasks[0].task_id)):null;e&&-1===t&&(e.tasks.push({taskId:this.test.tasks[0].task_id,started:this.app.timestamp()}),this.signalManager?.setDurations(e)),this.signalManager?.signalTask(this.test.tasks[0].task_id,"begin")}this.showTaskSection(),i.removeChild(a)},t}createTasksSection(e){this.container.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',Object.assign(this.container.style,Jg);const t=vy("div","task_section_or",sy),n=vy("div","description_t_title_or",ey),s=vy("div","title",{fontSize:"13px",fontWeight:"500",lineHeight:"auto"},"Tasks"),r=vy("div","icon",iy,"-"),i=vy("div","content",ty),o=vy("div","pagination",cy),a=vy("div","taskCard",dy),c=vy("div","taskText",hy),l=vy("div","taskDescription",py),u=vy("div","taskButtons",gy),d=vy("div","taskText",hy);d.textContent="Your answer";const h=vy("textarea","taskDescription",{resize:"vertical"}),p=vy("div","inputArea",dy);p.append(d,h);const f=vy("div","closePanelButton",fy,"Collapse Panel"),m=vy("div","nextButton",my,"Done, Next");n.append(s,r),a.append(c,l),u.append(f,m),i.append(o,a,p,u),t.append(n,i);const g=()=>{const t=e[this.currentTaskIndex];c.textContent=t.title,l.textContent=t.description,t.allow_typing?p.style.display="flex":p.style.display="none"};e.forEach(((e,t)=>{const n=vy("span",`or_task_${t}`,{outline:"1px solid #efefef",fontSize:"13px",height:"24px",width:"24px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:"6.25em"},(t+1).toString());n.id=`or_task_${t}`,o.append(n)})),this.hideTaskSection=()=>(r.textContent="+",Object.assign(i.style,{display:"none"}),this.widgetTasksVisible=!1,!1),this.showTaskSection=()=>(r.textContent="-",Object.assign(i.style,ty),this.widgetTasksVisible=!0,!0);const y=()=>{const e=document.getElementById(`or_task_${this.currentTaskIndex}`);e&&Object.assign(e.style,ly);for(let e=0;e<this.currentTaskIndex;e++){const t=document.getElementById(`or_task_${e}`);t&&Object.assign(t.style,uy)}};return n.onclick=()=>{this.widgetTasksVisible=!this.widgetTasksVisible,r.textContent=this.widgetTasksVisible?"-":"+",Object.assign(i.style,this.widgetTasksVisible?ty:{display:"none"})},f.onclick=this.collapseWidget,m.onclick=()=>{const t=e[this.currentTaskIndex].allow_typing?h.value:void 0;if(h.value="",this.signalManager?.signalTask(e[this.currentTaskIndex].task_id,"done",t),this.currentTaskIndex<e.length-1){this.currentTaskIndex++,g();const t=this.signalManager?.getDurations();t&&-1===t.tasks.findIndex((t=>t.taskId===e[this.currentTaskIndex].task_id))&&(t.tasks.push({taskId:e[this.currentTaskIndex].task_id,started:this.app.timestamp()}),this.signalManager?.setDurations(t)),this.signalManager?.signalTask(e[this.currentTaskIndex].task_id,"begin"),y()}else this.showEndSection();this.app.localStorage.setItem("or_uxt_task_index",this.currentTaskIndex.toString())},setTimeout((()=>{const e=document.getElementById("or_task_0");e&&Object.assign(e.style,ly),g(),y()}),1),t}showEndSection(){let e=!0;this.signalManager?.signalTest("done");const t=vy("div","end_section_or",ry),n=vy("div","end_title_or",{fontSize:"1.25rem",fontWeight:"500"},"Thank you! 👍"),s=vy("div","end_description_or",{},this.test?.conclusion??"Thank you for participating in our usability test. Your feedback has been captured and will be used to enhance our website. \n\nWe appreciate your time and valuable input."),r=vy("div","end_button_or",oy,"Submitting Feedback"),i=function(){!function(){const e=document.createElement("style");e.type="text/css",e.innerText="@keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n    }",document.head.appendChild(e)}();const e=document.createElement("div");return e.classList.add("spinner"),Object.assign(e.style,yy),e}();r.appendChild(i),this.test?.reqMic||this.test?.reqCamera?this.userRecorder.sendToAPI().then((()=>{r.removeChild(i),r.textContent="End Session",e=!1})).catch((t=>{console.error(t),r.removeChild(i),r.textContent="End Session",e=!1})):(r.removeChild(i),r.textContent="End Session",e=!1),this.taskSection&&this.container.removeChild(this.taskSection),this.descriptionSection&&this.container.removeChild(this.descriptionSection),this.stopButton&&this.stopButtonContainer&&this.container.removeChild(this.stopButtonContainer),r.onclick=()=>{e||(window.close(),document.body.removeChild(this.bg))},t.append(n,s,r),this.endSection=t,this.container.append(t)}}function Ty(e){return!!e&&null!=e.nodeType}function Iy(e){return"http://www.w3.org/2000/svg"===e.namespaceURI}function Cy(e){return e.nodeType===Node.ELEMENT_NODE}function My(e){return e.nodeType===Node.TEXT_NODE}function Ry(e){return e.nodeType===Node.DOCUMENT_NODE}function Ny(e){return e.nodeType===Node.DOCUMENT_NODE||e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}function Oy(e,t){return e.localName===t}class Ay{constructor(e,t){this.app=e,this.options=t,this.snapshots={},this.intervals=[],this.restartTracking=()=>{this.clear(),this.app.nodes.scanTree(this.captureCanvas)},this.captureCanvas=e=>{const t=this.app.nodes.getID(e);t&&Oy(e,"canvas")&&(this.app.sanitizer.isObscured(t)||this.app.sanitizer.isHidden(t)||!Oy(e,"canvas")||this.snapshots[t]||new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target?this.snapshots[t]&&this.snapshots[t].createdAt?this.snapshots[t].paused=!1:this.recordCanvas(e.target,t):this.snapshots[t]&&(this.snapshots[t].paused=!0))}))})).observe(e))},this.recordCanvas=(e,t)=>{const n=this.app.timestamp();this.snapshots[t]={images:[],createdAt:n,paused:!1,dummy:document.createElement("canvas")};const s=[119,t.toString(),n];this.app.send(s);const r=e=>{!function(e,t="medium",n,s=!1,r,i){const o=`image/${r}`;if(s){const s=window.devicePixelRatio||1;n.width=e.width/s,n.height=e.height/s;const r=n.getContext("2d");if(!r)return"";r.clearRect(0,0,n.width,n.height),r.drawImage(e,0,0,n.width,n.height),n.toBlob(i,o,Dy[t])}else e.toBlob(i,o,Dy[t])}(e,this.options.quality,this.snapshots[t].dummy,this.options.fixedScaling,this.fileExt,(e=>{if(e){if(!this.snapshots[t])return this.app.debug.warn("Canvas not present in snapshots after capture:",this.snapshots,t);this.snapshots[t].images.push({id:this.app.timestamp(),data:e}),this.snapshots[t].images.length>9&&(this.sendSnaps(this.snapshots[t].images,t,this.snapshots[t].createdAt),this.snapshots[t].images=[])}}))},i=setInterval((()=>{const n=this.app.nodes.getID(e),s=n?this.app.nodes.getNode(n):void 0;return this.snapshots[t]?s&&Oy(s,"canvas")&&s===e?void(this.snapshots[t].paused||(this.options.useAnimationFrame?requestAnimationFrame((()=>{r(s)})):r(s))):(this.app.debug.log("Canvas element not in sync",s,e),void clearInterval(i)):(this.app.debug.log("Canvas is not present in {snapshots}"),void clearInterval(i))}),this.interval);this.intervals.push(i)},this.fileExt=t.fileExt??"webp",this.interval=1e3/t.fps}startTracking(){setTimeout((()=>{this.app.nodes.scanTree(this.captureCanvas),this.app.nodes.attachNodeCallback(this.captureCanvas)}),250)}sendSnaps(e,t,n){if(0===Object.keys(this.snapshots).length)return;const s=new FormData;e.forEach((e=>{const r=e.data;r&&(s.append("snapshot",r,`${n}_${t}_${e.id}.${this.fileExt}`),this.options.isDebug&&function(e,t){const n=URL.createObjectURL(e),s=document.createElement("a");s.href=n,s.download=t,s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}(r,`${n}_${t}_${e.id}.${this.fileExt}`))}));const r=()=>{this.app.debug.log("Restarting tracker; token expired"),this.app.stop(!1),setTimeout((()=>{this.app.start({},!0)}),250)};fetch(this.app.options.ingestPoint+"/v1/web/images",{method:"POST",headers:{Authorization:`Bearer ${this.app.session.getSessionToken()??""}`},body:s}).then((e=>401!==e.status||r())).catch((e=>{this.app.debug.error("error saving canvas",e)}))}clear(){this.intervals.forEach((e=>clearInterval(e))),this.snapshots={}}}const Dy={low:.35,medium:.55,high:.8};class Ly{constructor(e=0){this.shouldLog=e=>this.level>=e,this.info=(...e)=>{this.shouldLog(5)&&console.info(...e)},this.log=(...e)=>{this.shouldLog(4)&&console.log(...e)},this.warn=(...e)=>{this.shouldLog(3)&&console.warn(...e)},this.error=(...e)=>{this.shouldLog(2)&&console.error(...e)},this.level=e}}const Py={interval:3e4,batchSize:2500,enabled:!0};class Fy{constructor(e,t,n){this.nodes=e,this.unregisterNode=t,this.start=()=>{this.options.enabled&&(this.stop(),this.interval=setInterval((()=>{!function(e,t,n){const s=e.entries();!function e(){const r=[];let i=s.next();for(;!i.done&&r.length<t;)r.push(i.value),i=s.next();r.length>0&&(r.forEach((([e,t])=>{t&&n(t)})),setTimeout(e,50))}()}(this.nodes,this.options.batchSize,(e=>{const t=function(e){try{if(!e.isConnected)return[!1,"not connected"];const t=e.nodeType===Node.DOCUMENT_NODE,n=t?e.defaultView:e.ownerDocument?.defaultView,s=t?e:e.ownerDocument;return n?n.closed?[!1,"window closed"]:s?.documentElement.isConnected?[!0,"ok"]:[!1,"documentElement not connected"]:[!1,"no window"]}catch(e){return[!1,e]}}(e)[0];t||this.unregisterNode(e)}))}),this.options.interval))},this.stop=()=>{this.interval&&clearInterval(this.interval)},this.options={...Py,...n}}}class $y{constructor(e){this.nodes=new Map,this.totalNodeAmount=0,this.nodeCallbacks=[],this.elementListeners=new Map,this.nextNodeId=0,this.scanTree=e=>{this.nodes.forEach((t=>t?e(t):void 0))},this.attachNodeListener=(e,t,n,s=!0)=>{const r=this.getID(e);if(void 0===r)return;bg(e,t,n,s,this.forceNgOff);let i=this.elementListeners.get(r);void 0===i&&(i=[],this.elementListeners.set(r,i)),i.push([t,n,s])},this.unregisterNode=e=>{const t=e[this.node_id];if(void 0!==t){e[this.node_id]=void 0,delete e[this.node_id],this.nodes.delete(t);const n=this.elementListeners.get(t);void 0!==n&&(this.elementListeners.delete(t),n.forEach((t=>vg(e,t[0],t[1],t[2],this.forceNgOff)))),this.totalNodeAmount--}return t},this.node_id=e.node_id,this.forceNgOff=e.forceNgOff,this.maintainer=new Fy(this.nodes,this.unregisterNode,e.maintainer),this.maintainer.start()}syntheticMode(e){const t=99999999*e;if(t>Number.MAX_SAFE_INTEGER)throw new Error("Placeholder id overflow");this.nextNodeId=t}attachNodeCallback(e){return this.nodeCallbacks.push(e)}registerNode(e){let t=e[this.node_id];const n=void 0===t;return n&&(t=this.nextNodeId,this.totalNodeAmount++,this.nextNodeId++,this.nodes.set(t,e),e[this.node_id]=t),[t,n]}cleanTree(){for(const[e,t]of this.nodes)t&&!document.contains(t)&&this.unregisterNode(t)}callNodeCallbacks(e,t){this.nodeCallbacks.forEach((n=>n(e,t)))}getID(e){if(e)return e[this.node_id]}getNode(e){return this.nodes.get(e)}getNodeCount(){return this.totalNodeAmount}clear(){for(const[e,t]of this.nodes)t&&this.unregisterNode(t);this.nextNodeId=0,this.nodes.clear()}}function jy(e){if(function(e){return e.nodeType===Node.COMMENT_NODE}(e))return!0;if(My(e))return!1;if(!Cy(e))return!0;const t=e.tagName.toUpperCase();if("LINK"===t){const t=e.getAttribute("rel"),n=e.getAttribute("as");return!(t?.includes("stylesheet")||"style"===n||"font"===n)}return"SCRIPT"===t||"NOSCRIPT"===t||"META"===t||"TITLE"===t||"BASE"===t}function By(e){return!!Ny(e)||!jy(e)}var Uy;!function(e){e[e.New=0]="New",e[e.Removed=1]="Removed",e[e.Changed=2]="Changed"}(Uy||(Uy={}));class Hy{constructor(e,t=!1){this.app=e,this.isTopContext=t,this.commited=[],this.recents=new Map,this.indexes=[],this.attributesMap=new Map,this.textSet=new Set,this.observer=_g(this.app.safe((e=>{for(const t of e){const e=t.target,n=t.type;if(!By(e))continue;if("childList"===n){for(let e=0;e<t.removedNodes.length;e++)By(t.removedNodes[e])&&this.bindNode(t.removedNodes[e]);for(let e=0;e<t.addedNodes.length;e++)this.bindTree(t.addedNodes[e]);continue}const s=this.app.nodes.getID(e);if(void 0!==s)if(this.recents.has(s)||this.recents.set(s,Uy.Changed),"attributes"!==n)"characterData"===n&&this.textSet.add(s);else{const e=t.attributeName;if(null===e)continue;let n=this.attributesMap.get(s);void 0===n&&this.attributesMap.set(s,n=new Set),n.add(e)}}this.commitNodes()})),this.app.options.forceNgOff)}clear(){this.commited.length=0,this.recents.clear(),this.indexes.length=1,this.attributesMap.clear(),this.textSet.clear()}handleIframeSrcChange(e){const t=e.contentDocument;if(t&&void 0!==this.app.nodes.getID(t)){const n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT+NodeFilter.SHOW_TEXT,{acceptNode:e=>jy(e)||void 0===this.app.nodes.getID(e)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},!1);let s=0;const r=this.app.nodes.getNodeCount();for(;n.nextNode();)e.contentDocument.contains(n.currentNode)||(s+=1,this.app.nodes.unregisterNode(n.currentNode));const i=Math.floor(s/r*100);i>30&&this.app.send(jg(i))}}sendNodeAttribute(e,t,n,s){if(Iy(t))return"xlink:"===n.substring(0,6)&&(n=n.substring(6)),void(null===s?this.app.send(xg(e,n)):"href"===n?(s.length>1e5&&(s=""),this.app.send(Mg(e,n,s,this.app.getBaseHref()))):this.app.attributeSender.sendSetAttribute(e,n,s));"src"!==n&&"srcset"!==n&&"integrity"!==n&&"crossorigin"!==n&&"autocomplete"!==n&&"on"!==n.substring(0,2)&&("value"===n&&Oy(t,"input")&&"button"!==t.type&&"reset"!==t.type&&"submit"!==t.type||(null!==s?"style"===n||"href"===n&&Oy(t,"link")?this.app.send(Mg(e,n,s,this.app.getBaseHref())):(("href"===n||s.length>1e5)&&(s=""),this.app.attributeSender.sendSetAttribute(e,n,s)):this.app.send(xg(e,n))))}sendNodeData(e,t,n){Oy(t,"style")?this.app.send(function(e,t,n){return[61,e,t,n]}(e,n,this.app.getBaseHref())):(n=this.app.sanitizer.sanitize(e,n),this.app.send(function(e,t){return[14,e,t]}(e,n)))}bindNode(e){const[t,n]=this.app.nodes.registerNode(e);n?this.recents.set(t,Uy.New):this.recents.get(t)!==Uy.New&&this.recents.set(t,Uy.Removed)}bindTree(e){if(!By(e))return;this.bindNode(e);const t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT+NodeFilter.SHOW_TEXT,{acceptNode:e=>(void 0!==this.app.nodes.getID(e)&&this.app.debug.error("! Node is already bound",e),jy(e)||void 0!==this.app.nodes.getID(e)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT)},!1);for(;t.nextNode();)this.bindNode(t.currentNode)}unbindTree(e){const t=this.app.nodes.unregisterNode(e);if(void 0!==t&&this.recents.get(t)===Uy.Removed){this.app.send(Eg(t));const n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT+NodeFilter.SHOW_TEXT,{acceptNode:e=>jy(e)||void 0===this.app.nodes.getID(e)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},!1);let s=0;const r=this.app.nodes.getNodeCount();for(;n.nextNode();)s+=1,this.app.nodes.unregisterNode(n.currentNode);const i=Math.floor(s/r*100);i>30&&this.app.send(jg(i))}}_commitNode(e,t){if(Ny(t))return!0;const n=t.parentNode;let s;if(!Oy(t,"html")||!this.isTopContext){if(null===n)return this.unbindTree(t),!1;if(s=this.app.nodes.getID(n),void 0===s)return this.unbindTree(t),!1;if(!this.commitNode(s))return this.unbindTree(t),!1;if(this.app.sanitizer.handleNode(e,s,t),this.app.sanitizer.isHidden(s))return!1}let r=t.previousSibling;for(;null!==r;){const t=this.app.nodes.getID(r);if(void 0!==t){this.commitNode(t),this.indexes[e]=this.indexes[t]+1;break}r=r.previousSibling}null===r&&(this.indexes[e]=0);const i=this.recents.get(e),o=i===Uy.New,a=this.indexes[e];if(void 0===a)throw"commitNode: missing node index";if(o){if(Cy(t)){let n=t;if(void 0!==s){if(this.app.sanitizer.isHidden(e)){const e=n.clientWidth,s=n.clientHeight;n=t.cloneNode(),n.style.width=`${e}px`,n.style.height=`${s}px`}this.app.send(function(e,t,n,s,r){return[8,e,t,n,s,r]}(e,s,a,n.tagName,Iy(t)))}for(let t=0;t<n.attributes.length;t++){const s=n.attributes[t];this.sendNodeAttribute(e,n,s.nodeName,s.value)}}else My(t)&&(this.app.send(function(e,t,n){return[9,e,t,n]}(e,s,a)),this.sendNodeData(e,n,t.data));return!0}i===Uy.Removed&&void 0!==s&&this.app.send(function(e,t,n){return[10,e,t,n]}(e,s,a));const c=this.attributesMap.get(e);if(void 0!==c){if(!Cy(t))throw"commitNode: node is not an element";for(const n of c)this.sendNodeAttribute(e,t,n,t.getAttribute(n))}if(this.textSet.has(e)){if(!My(t))throw"commitNode: node is not a text";this.sendNodeData(e,n,t.data)}return!0}commitNode(e){const t=this.app.nodes.getNode(e);if(void 0===t)return!1;const n=this.commited[e];return void 0!==n?n:this.commited[e]=this._commitNode(e,t)}commitNodes(e=!1){let t;this.recents.forEach(((n,s)=>{this.commitNode(s),n===Uy.New&&(t=this.app.nodes.getNode(s))&&this.app.nodes.callNodeCallbacks(t,e)})),this.clear()}observeRoot(e,t,n=e){this.observer.observe(e,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1}),this.bindTree(n),t(this.app.nodes.getID(e)),this.commitNodes(!0)}disconnect(){this.observer.disconnect(),this.clear()}}class zy extends Hy{observe(e){const t=e.contentDocument,n=this.app.nodes.getID(e);t&&void 0!==n&&this.observeRoot(t,(e=>{void 0!==e?(this.docId=e,this.app.send(Rg(n,e))):this.app.debug.log("OpenReplay: Iframe document not bound")}))}syntheticObserve(e,t){this.observeRoot(t,(t=>{void 0!==t?this.app.send(Rg(e,t)):this.app.debug.log("OpenReplay: Iframe document not bound")}))}disconnect(){void 0!==this.docId&&this.app.send(Eg(this.docId)),super.disconnect()}}class qy extends Hy{observe(e){const t=e.shadowRoot,n=this.app.nodes.getID(e);t&&void 0!==n&&this.observeRoot(t,(e=>{void 0!==e?this.app.send(Rg(n,e)):this.app.debug.error("OpenReplay: Shadow Root was not bound")}))}}class Wy{constructor(){this.states=new WeakMap}calcOffset(e){let t=0,n=0;if(e.parent&&([t,n]=this.calcOffset(e.parent)),!e.offset){const{left:t,top:n}=e.iFrame.getBoundingClientRect();e.offset=[t,n]}const[s,r]=e.offset;return[t+s,n+r]}getDocumentOffset(e){const t=this.states.get(e);return t?this.calcOffset(t):[0,0]}observe(e){const t=e.contentDocument;if(!t)return;const n=e.ownerDocument,s={offset:null,iFrame:e,parent:this.states.get(n)||null,clear:()=>{n.removeEventListener("scroll",r),n.defaultView?.removeEventListener("resize",r)}},r=()=>{s.offset=null};n.addEventListener("scroll",r),n.defaultView?.addEventListener("resize",r),this.states.set(t,s)}clear(){this.states=new WeakMap}}const Vy=eg?Element.prototype.attachShadow:()=>new ShadowRoot;class Gy extends Hy{constructor(e){super(e.app,!0),this.iframeOffsets=new Wy,this.contextCallbacks=[],this.contextsSet=new WeakSet,this.iframeObserversArr=[],this.iframeObservers=new WeakMap,this.docObservers=new WeakMap,this.shadowRootObservers=new WeakMap,this.app=e.app,this.options=Object.assign({captureIFrames:!0},e.options),this.app.nodes.attachNodeCallback((e=>{Oy(e,"iframe")&&(this.options.captureIFrames&&!pg(e,"obscured")||pg(e,"capture"))&&this.handleIframe(e)})),this.app.nodes.attachNodeCallback((e=>{Cy(e)&&null!==e.shadowRoot&&this.handleShadowRoot(e.shadowRoot)}))}attachContextCallback(e){this.contextCallbacks.push(e)}getDocumentOffset(e){return this.iframeOffsets.getDocumentOffset(e)}handleIframe(e){const t=this.app.safe((()=>setTimeout((()=>{const t=this.app.nodes.getID(e);if(void 0===t||!function(e){try{return Boolean(e.contentDocument)}catch(e){return!1}}(e))return;const n=e.contentWindow,s=e.contentDocument;if(!s)return void this.app.debug.warn("no doc for iframe found",e);if(s&&this.docObservers.has(s))return void this.app.debug.info("doc already observed for",t);const r=new zy(this.app);this.iframeObservers.set(e,r),this.docObservers.set(s,r),this.iframeObserversArr.push(r),r.observe(e),this.iframeOffsets.observe(e),n&&n===n.window&&!this.contextsSet.has(n)&&(this.contextsSet.add(n),this.contextCallbacks.forEach((e=>e(n))))}),250)));e.addEventListener("load",t),t()}handleShadowRoot(e){const t=new qy(this.app);this.shadowRootObservers.set(e,t),t.observe(e.host)}observe(){const e=this;Element.prototype.attachShadow=function(){const t=Vy.apply(this,arguments);return e.handleShadowRoot(t),t},this.app.nodes.clear(),this.observeRoot(window.document,(()=>{this.app.send([7]),this.app.nodes.callNodeCallbacks(document,!0)}),window.document.documentElement)}crossdomainObserve(e,t){const n=this;Element.prototype.attachShadow=function(){const e=Vy.apply(this,arguments);return n.handleShadowRoot(e),e},this.app.nodes.clear(),this.app.nodes.syntheticMode(t);const s=new zy(this.app);this.iframeObservers.set(window.document,s),s.syntheticObserve(e,window.document)}disconnect(){this.iframeOffsets.clear(),Element.prototype.attachShadow=Vy,this.iframeObserversArr.forEach((e=>e.disconnect())),this.iframeObserversArr=[],this.iframeObservers=new WeakMap,this.shadowRootObservers=new WeakMap,this.docObservers=new WeakMap,super.disconnect()}}var Xy;!function(e){e[e.Plain=0]="Plain",e[e.Obscured=1]="Obscured",e[e.Hidden=2]="Hidden"}(Xy||(Xy={}));class Yy{constructor(e){this.obscured=new Set,this.hidden=new Set,this.app=e.app,this.options=Object.assign({obscureTextEmails:!0,obscureTextNumbers:!1},e.options)}handleNode(e,t,n){if((this.obscured.has(t)||Cy(n)&&(pg(n,"masked")||pg(n,"obscured")))&&this.obscured.add(e),(this.hidden.has(t)||Cy(n)&&(pg(n,"htmlmasked")||pg(n,"hidden")))&&this.hidden.add(e),void 0!==this.options.domSanitizer&&Cy(n)){const t=this.options.domSanitizer(n);t===Xy.Obscured&&this.obscured.add(e),t===Xy.Hidden&&this.hidden.add(e)}}sanitize(e,t){return this.obscured.has(e)?t.trim().replace(/[^\f\n\r\t\v\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]/g,"█"):(this.options.obscureTextNumbers&&(t=t.replace(/\d/g,"0")),this.options.obscureTextEmails&&(t=t.replace(/^\w+([+.-]\w+)*@\w+([.-]\w+)*\.\w{2,3}$/g,(e=>{const[t,n]=e.split("@"),[s,r]=n.split(".");return`${og(t)}@${og(s)}.${og(r)}`}))),t)}isObscured(e){return this.obscured.has(e)}isHidden(e){return this.hidden.has(e)}getInnerTextSecure(e){const t=this.app.nodes.getID(e);return t?this.sanitize(t,e.innerText):""}clear(){this.obscured.clear(),this.hidden.clear()}}class Jy{constructor(e){this.metadata={},this.userID=null,this.callbacks=[],this.timestamp=0,this.app=e.app,this.options=e.options,this.createTabId()}attachUpdateCallback(e){this.callbacks.push(e)}handleUpdate(e){null==e.userID&&delete e.userID,null==e.sessionID&&delete e.sessionID,this.callbacks.forEach((t=>t(e)))}assign(e){void 0!==e.userID&&(this.userID=e.userID),void 0!==e.metadata&&Object.entries(e.metadata).forEach((([e,t])=>this.metadata[e]=t)),void 0!==e.sessionID&&(this.sessionID=e.sessionID),void 0!==e.timestamp&&(this.timestamp=e.timestamp),void 0!==e.projectID&&(this.projectID=e.projectID),this.handleUpdate(e)}setMetadata(e,t){this.metadata[e]=t,this.handleUpdate({metadata:{[e]:t}})}setUserID(e){this.userID=e,this.handleUpdate({userID:e})}setUserInfo(e){this.userInfo=e}getPageNumber(){const e=this.app.sessionStorage.getItem(this.options.session_pageno_key);if(null!=e)return parseInt(e)}incPageNo(){let e=this.getPageNumber();return void 0===e?e=0:e++,this.app.sessionStorage.setItem(this.options.session_pageno_key,e.toString()),e}getSessionToken(){return this.token||this.app.sessionStorage.getItem(this.options.session_token_key)||void 0}setSessionToken(e){this.token=e,this.app.sessionStorage.setItem(this.options.session_token_key,e)}applySessionHash(e){const t=decodeURI(e).split("&");let n=e,s="100500";2==t.length&&([s,n]=t),s&&n&&(this.app.sessionStorage.setItem(this.options.session_token_key,n),this.app.sessionStorage.setItem(this.options.session_pageno_key,s))}getSessionHash(){const e=this.getPageNumber(),t=this.getSessionToken();if(void 0!==e&&void 0!==t)return encodeURI(String(e)+"&"+t)}getTabId(){return this.tabId||this.createTabId(),this.tabId}regenerateTabId(){const e=function(){const e=new Uint8Array(6),t=window.crypto||window.msCrypto;return t?(t.getRandomValues(e),Array.from(e,mg).join("")):Array.from({length:12},(()=>mg(Math.floor(16*Math.random())))).join("")}();this.app.sessionStorage.setItem(this.options.session_tabid_key,e),this.tabId=e}createTabId(){const e=this.app.sessionStorage.getItem(this.options.session_tabid_key);e?this.tabId=e:this.regenerateTabId()}getInfo(){return{sessionID:this.sessionID,metadata:this.metadata,userID:this.userID,timestamp:this.timestamp,projectID:this.projectID}}reset(){this.app.sessionStorage.removeItem(this.options.session_token_key),this.metadata={},this.userID=null,this.sessionID=void 0,this.timestamp=0}}class Ky{constructor(e){this.app=e,this.timer=null,this.callbacks=[]}attach(e,t=0,n=!0,s){s&&(e=e.bind(s)),n&&(e=this.app.safe(e)),this.callbacks.unshift(t?function(e,t){let n=0;return()=>{n++>=t&&(n=0,e())}}(e,t):e)}start(){null===this.timer&&(this.timer=setInterval((()=>this.callbacks.forEach((e=>{e&&e()}))),30))}stop(){null!==this.timer&&(clearInterval(this.timer),this.timer=null)}}const Qy="canceled",Zy="or_uxt_active",e_="or_buffer_1",t_=e=>({reason:e,success:!1}),n_=e=>({...e,success:!0});var s_;!function(e){e[e.NotActive=0]="NotActive",e[e.Starting=1]="Starting",e[e.Active=2]="Active",e[e.ColdStart=3]="ColdStart"}(s_||(s_={}));const r_="https://api.openreplay.com/ingest";function i_(){const e=-1*(new Date).getTimezoneOffset(),t=e>=0?"+":"-",n=Math.floor(Math.abs(e)/60),s=Math.abs(e)%60;return`UTC${t}${String(n).padStart(2,"0")}:${String(s).padStart(2,"0")}`}const o_=e=>new Promise((t=>setTimeout(t,e))),a_="never-gonna-give-you-up",c_="never-gonna-let-you-down",l_="never-gonna-run-around-and-desert-you",u_="tracker inside a child iframe",d_="getting node id for child iframe",h_="batch of messages from an iframe window",p_="signal that parent is live",f_="stop tracker inside frame",m_="start tracker inside frame",g_="hello-how-are-you-im-under-the-water-please-help-me";class y_{constructor(e,t,n,s,r){this.signalError=s,this.insideIframe=r,this.messages=[],this.bufferedMessages1=[],this.bufferedMessages2=[],this.startCallbacks=[],this.stopCallbacks=[],this.commitCallbacks=[],this.activityState=s_.NotActive,this.version="14.0.12",this.socketMode=!1,this.compressionThreshold=24e3,this.bc=null,this.canvasRecorder=null,this.conditionsManager=null,this.canStart=!1,this.rootId=null,this.pageFrames=[],this.frameOderNumber=0,this.features={"feature-flags":!0,"usability-test":!0},this.parentActive=!1,this.checkStatus=()=>this.parentActive,this.parentCrossDomainFrameListener=e=>{const{data:t}=e;if(t&&e.source!==window){if(t.line===m_){if(this.active())return;try{this.allowAppStart(),this.start()}catch(e){console.error("children frame restart failed:",e)}}t.line===p_&&(this.parentActive=!0),t.line===d_&&(this.parentActive=!0,this.rootId=t.id,this.session.setSessionToken(t.token),this.frameOderNumber=t.frameOrderNumber,this.debug.log("starting iframe tracking",t),this.allowAppStart()),t.line===f_&&this.active()&&this.stop()}},this.trackedFrames=[],this.crossDomainIframeListener=e=>{if(!this.active()||e.source===window)return;const{data:t}=e;if(t){if(t.line===u_){e.source?.postMessage({ping:!0,line:p_},"*");const n=async()=>{if(null===e.source)return console.error("Couldnt connect to event.source for child iframe tracking");const n=await this.checkNodeId(e.source);if(n&&!this.trackedFrames.includes(t.context))try{this.trackedFrames.push(t.context),await this.waitStarted();const s=this.session.getSessionToken(),r=this.trackedFrames.findIndex((e=>e===t.context))+1;0===r&&this.debug.error("Couldnt get order number for iframe",t.context,this.trackedFrames);const i={line:d_,id:n,token:s,frameOrderNumber:r};this.debug.log("Got child frame signal; nodeId",n,e.source,i),e.source?.postMessage(i,"*")}catch(e){console.error(e)}else this.debug.log("Couldnt get node id for iframe",e.source)};n()}if(t.line===h_){const n=t.messages.map((t=>{if(20===t[0]){let n=t;return this.pageFrames.forEach((s=>{if(s.contentWindow===e.source){const[e,r,i]=t,{left:o,top:a}=s.getBoundingClientRect();n=[e,r+o,i+a]}})),n}if(68===t[0]){let n=t;return this.pageFrames.forEach((s=>{if(s.contentWindow===e.source){const[e,r,i,o,a,c,l]=t,{left:u,top:d,width:h,height:p}=s.getBoundingClientRect(),f=(c/100*h+u)/document.documentElement.scrollWidth,m=(l/100*p+d)/document.documentElement.scrollHeight;n=[e,r,i,o,a,Math.round(1e3*f)/10,Math.round(1e3*m)/10]}})),n}return t}));this.messages.push(...n)}if(t.line===g_){if(!this.pollingQueue.order.length)return;const n=this.pollingQueue.order[0];this.pollingQueue[n].includes(t.context)&&(this.pollingQueue[n]=this.pollingQueue[n].filter((e=>e!==t.context)),e.source?.postMessage({line:n},"*"),0===this.pollingQueue[n].length&&this.pollingQueue.order.shift())}}},this.pollingQueue={order:[]},this.addCommand=e=>{this.pollingQueue.order.push(e),this.pollingQueue[e]=[...this.trackedFrames]},this.bootChildrenFrames=async()=>{await this.waitStarted(),this.addCommand(m_)},this.killChildrenFrames=()=>{this.addCommand(f_)},this.signalIframeTracker=()=>{const e=this.session.getTabId();window.parent.postMessage({line:u_,source:e,context:this.contextId},this.options.crossdomain?.parentDomain??"*");let t=0,n=250,s=0,r=!1;const i=()=>{r||this.checkStatus()?r=!0:(window.parent.postMessage({line:u_,source:e,context:this.contextId},this.options.crossdomain?.parentDomain??"*"),this.debug.info("Trying to signal to parent, attempt:",t+1),t++)};for(let e=0;e<10;e++){if(this.checkStatus()){r=!0;break}s+=n,setTimeout((()=>{i()}),s),n*=1.5}},this.startTimeout=null,this.coldStartCommitN=0,this.delay=0,this.attachStartCallback=(e,t=!1)=>{t&&(e=this.safe(e)),this.startCallbacks.push(e)},this.attachStopCallback=(e,t=!1)=>{t&&(e=this.safe(e)),this.stopCallbacks.push(e)},this.attachEventListener=(e,t,n,s=!0,r=!0)=>{s&&(n=this.safe(n)),this.attachStartCallback((()=>e?bg(e,t,n,r,this.options.forceNgOff):null),s),this.attachStopCallback((()=>e?vg(e,t,n,r,this.options.forceNgOff):null),s)},this.coldInterval=null,this.orderNumber=0,this.coldStartTs=0,this.singleBuffer=!1,this.onSessionSent=()=>{},this.restartCanvasTracking=()=>{this.canvasRecorder?.restartTracking()},this.flushBuffer=async e=>new Promise((t=>{let n=!1;const s=[e.shift()];for(;!n;){const t=e[0];t&&0!==t[0]?s.push(e.shift()):n=!0}this.postToWorker(s),t(null)})),this.onUxtCb=[],this.contextId=Math.random().toString(36).slice(2),this.projectKey=e,-1!==Object.keys(n).findIndex((e=>["fixedCanvasScaling","disableCanvas"].includes(e)))&&(console.warn('Openreplay: canvas options are moving to separate key "canvas" in next update. Please update your configuration.'),n={...n,canvas:{__save_canvas_locally:n.__save_canvas_locally,fixedCanvasScaling:n.fixedCanvasScaling,disableCanvas:n.disableCanvas}}),this.networkOptions=n.network;const i={revID:"",node_id:"__openreplay_id",session_token_key:"__openreplay_token",session_pageno_key:"__openreplay_pageno",session_reset_key:"__openreplay_reset",session_tabid_key:"__openreplay_tabid",local_uuid_key:"__openreplay_uuid",ingestPoint:r_,resourceBaseHref:null,__is_snippet:!1,__debug_report_edp:null,__debug__:0,__save_canvas_locally:!1,localStorage:null,sessionStorage:null,disableStringDict:!1,forceSingleTab:!1,assistSocketHost:"",fixedCanvasScaling:!1,disableCanvas:!1,captureIFrames:!0,obscureTextEmails:!0,obscureTextNumbers:!1,crossdomain:{parentDomain:"*"},canvas:{disableCanvas:!1,fixedCanvasScaling:!1,__save_canvas_locally:!1,useAnimationFrame:!1},forceNgOff:!1};if(this.options=wg(i,n),!this.insideIframe&&!this.options.forceSingleTab&&globalThis&&"BroadcastChannel"in globalThis){const e=location.hostname.split(".").slice(-2).join("_");this.bc=new BroadcastChannel(`rick_${e}`)}this.revID=this.options.revID,this.localStorage=this.options.localStorage??window.localStorage,this.sessionStorage=this.options.sessionStorage??window.sessionStorage,this.sanitizer=new Yy({app:this,options:n}),this.nodes=new $y({node_id:this.options.node_id,forceNgOff:Boolean(n.forceNgOff),maintainer:this.options.nodes?.maintainer}),this.observer=new Gy({app:this,options:n}),this.ticker=new Ky(this),this.ticker.attach((()=>this.commit())),this.debug=new Ly(this.options.__debug__),this.session=new Jy({app:this,options:this.options}),this.attributeSender=new Xm({app:this,isDictDisabled:Boolean(this.options.disableStringDict||this.options.crossdomain?.enabled)}),this.featureFlags=new Qm(this),this.tagWatcher=new Gg({sessionStorage:this.sessionStorage,errLog:this.debug.error,onTag:e=>this.send([120,e])}),this.session.attachUpdateCallback((({userID:e,metadata:t})=>{null!=e&&this.send(function(e){return[28,e]}(e)),null!=t&&Object.entries(t).forEach((([e,t])=>this.send(Tg(e,t))))})),null!=t&&this.session.applySessionHash(t);const o=this.session.getTabId();this.insideIframe?(window.addEventListener("message",this.parentCrossDomainFrameListener),setInterval((()=>{document.hidden||window.parent.postMessage({line:g_,context:this.contextId},n.crossdomain?.parentDomain??"*")}),250)):(this.initWorker(),window.addEventListener("message",this.crossDomainIframeListener)),null!==this.bc&&(this.bc.postMessage({line:a_,source:o,context:this.contextId}),this.startTimeout=setTimeout((()=>{this.allowAppStart()}),250),this.bc.onmessage=e=>{if(e.data.context!==this.contextId){if(e.data.line===c_){const t=e.data.token;this.session.setSessionToken(t),this.allowAppStart()}if(e.data.line===l_){const t=e.data.token;this.session.regenerateTabId(),this.session.setSessionToken(t),this.allowAppStart()}if(e.data.line===a_){const t=this.session.getSessionToken();t&&this.bc&&this.bc.postMessage({line:e.data.source===o?l_:c_,token:t,source:o,context:this.contextId})}}})}allowAppStart(){this.canStart=!0,this.startTimeout&&(clearTimeout(this.startTimeout),this.startTimeout=null)}async checkNodeId(e){let t;if(this.pageFrames.length>0&&(t=this.pageFrames.find((t=>t.contentWindow===e))),!t||!this.pageFrames.length){const n=Array.from(document.querySelectorAll("iframe"));this.pageFrames=n,t=n.find((t=>t.contentWindow===e))}if(!t)return null;let n=0;for(;n<100;){const e=t[this.options.node_id];if(void 0!==e)return n=100,e;n++,await o_(100)}return null}initWorker(){try{this.worker=new Worker(URL.createObjectURL(new Blob(['!function(){"use strict";class t{constructor(t,s,i,e=10,n=250,h,r){this.onUnauthorised=s,this.onFailure=i,this.MAX_ATTEMPTS_COUNT=e,this.ATTEMPT_TIMEOUT=n,this.onCompress=h,this.pageNo=r,this.attemptsCount=0,this.busy=!1,this.queue=[],this.token=null,this.lastBatchNum=0,this.ingestURL=t+"/v1/web/i",this.isCompressing=void 0!==h}getQueueStatus(){return 0===this.queue.length&&!this.busy}authorise(t){this.token=t,this.busy||this.sendNext()}push(t){if(this.busy||!this.token)this.queue.push(t);else if(this.busy=!0,this.isCompressing&&this.onCompress)this.onCompress(t);else{const s=++this.lastBatchNum;this.sendBatch(t,!1,s)}}sendNext(){const t=this.queue.shift();if(t)if(this.busy=!0,this.isCompressing&&this.onCompress)this.onCompress(t);else{const s=++this.lastBatchNum;this.sendBatch(t,!1,s)}else this.busy=!1}retry(t,s,i){this.attemptsCount>=this.MAX_ATTEMPTS_COUNT?this.onFailure(`Failed to send batch after ${this.attemptsCount} attempts.`):(this.attemptsCount++,setTimeout((()=>this.sendBatch(t,s,i)),this.ATTEMPT_TIMEOUT*this.attemptsCount))}sendBatch(t,s,i){var e;const n=null==i?void 0:i.toString().replace(/^([^_]+)_([^_]+).*/,"$1_$2_$3");this.busy=!0;const h={Authorization:`Bearer ${this.token}`};s&&(h["Content-Encoding"]="gzip"),null!==this.token?fetch(`${this.ingestURL}?batch=${null!==(e=this.pageNo)&&void 0!==e?e:"noPageNum"}_${null!=n?n:"noBatchNum"}`,{body:t,method:"POST",headers:h,keepalive:t.length<65536}).then((e=>{if(401===e.status)return this.busy=!1,void this.onUnauthorised();e.status>=400?this.retry(t,s,`${null!=i?i:"noBatchNum"}_network:${e.status}`):(this.attemptsCount=0,this.sendNext())})).catch((e=>{console.warn("OpenReplay:",e),this.retry(t,s,`${null!=i?i:"noBatchNum"}_reject:${e.message}`)})):setTimeout((()=>{this.sendBatch(t,s,`${null!=i?i:"noBatchNum"}_newToken`)}),500)}sendCompressed(t){const s=++this.lastBatchNum;this.sendBatch(t,!0,s)}sendUncompressed(t){const s=++this.lastBatchNum;this.sendBatch(t,!1,s)}clean(){this.sendNext(),setTimeout((()=>{this.token=null,this.queue.length=0}),10)}}const s="function"==typeof TextEncoder?new TextEncoder:{encode(t){const s=t.length,i=new Uint8Array(3*s);let e=-1;for(let n=0,h=0,r=0;r!==s;){if(n=t.charCodeAt(r),r+=1,n>=55296&&n<=56319){if(r===s){i[e+=1]=239,i[e+=1]=191,i[e+=1]=189;break}if(h=t.charCodeAt(r),!(h>=56320&&h<=57343)){i[e+=1]=239,i[e+=1]=191,i[e+=1]=189;continue}if(n=1024*(n-55296)+h-56320+65536,r+=1,n>65535){i[e+=1]=240|n>>>18,i[e+=1]=128|n>>>12&63,i[e+=1]=128|n>>>6&63,i[e+=1]=128|63&n;continue}}n<=127?i[e+=1]=0|n:n<=2047?(i[e+=1]=192|n>>>6,i[e+=1]=128|63&n):(i[e+=1]=224|n>>>12,i[e+=1]=128|n>>>6&63,i[e+=1]=128|63&n)}return i.subarray(0,e+1)}};class i{constructor(t){this.size=t,this.offset=0,this.checkpointOffset=0,this.data=new Uint8Array(t)}getCurrentOffset(){return this.offset}checkpoint(){this.checkpointOffset=this.offset}get isEmpty(){return 0===this.offset}skip(t){return this.offset+=t,this.offset<=this.size}set(t,s){this.data.set(t,s)}boolean(t){return this.data[this.offset++]=+t,this.offset<=this.size}uint(t){for((t<0||t>Number.MAX_SAFE_INTEGER)&&(t=0);t>=128;)this.data[this.offset++]=t%256|128,t=Math.floor(t/128);return this.data[this.offset++]=t,this.offset<=this.size}int(t){return t=Math.round(t),this.uint(t>=0?2*t:-2*t-1)}string(t){const i=s.encode(t),e=i.byteLength;return!(!this.uint(e)||this.offset+e>this.size)&&(this.data.set(i,this.offset),this.offset+=e,!0)}reset(){this.offset=0,this.checkpointOffset=0}flush(){const t=this.data.slice(0,this.checkpointOffset);return this.reset(),t}}class e extends i{encode(t){switch(t[0]){case 0:case 11:case 114:case 115:return this.uint(t[1]);case 4:case 44:case 47:return this.string(t[1])&&this.string(t[2])&&this.uint(t[3]);case 5:case 20:case 38:case 70:case 75:case 76:case 77:case 82:return this.uint(t[1])&&this.uint(t[2]);case 6:return this.int(t[1])&&this.int(t[2]);case 7:return!0;case 8:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3])&&this.string(t[4])&&this.boolean(t[5]);case 9:case 10:case 24:case 51:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3]);case 12:case 61:case 71:return this.uint(t[1])&&this.string(t[2])&&this.string(t[3]);case 13:case 14:case 17:case 50:case 54:return this.uint(t[1])&&this.string(t[2]);case 16:return this.uint(t[1])&&this.int(t[2])&&this.int(t[3]);case 18:return this.uint(t[1])&&this.string(t[2])&&this.int(t[3]);case 19:return this.uint(t[1])&&this.boolean(t[2]);case 21:return this.string(t[1])&&this.string(t[2])&&this.string(t[3])&&this.string(t[4])&&this.string(t[5])&&this.uint(t[6])&&this.uint(t[7])&&this.uint(t[8]);case 22:case 27:case 30:case 41:case 45:case 46:case 63:case 64:case 79:return this.string(t[1])&&this.string(t[2]);case 23:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3])&&this.uint(t[4])&&this.uint(t[5])&&this.uint(t[6])&&this.uint(t[7])&&this.uint(t[8])&&this.uint(t[9]);case 28:case 29:case 42:case 117:case 118:return this.string(t[1]);case 37:return this.uint(t[1])&&this.string(t[2])&&this.uint(t[3]);case 39:return this.string(t[1])&&this.string(t[2])&&this.string(t[3])&&this.string(t[4])&&this.uint(t[5])&&this.uint(t[6])&&this.uint(t[7]);case 40:return this.string(t[1])&&this.uint(t[2])&&this.string(t[3])&&this.string(t[4]);case 48:return this.string(t[1])&&this.string(t[2])&&this.string(t[3])&&this.string(t[4])&&this.int(t[5]);case 49:return this.int(t[1])&&this.int(t[2])&&this.uint(t[3])&&this.uint(t[4]);case 53:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3])&&this.uint(t[4])&&this.uint(t[5])&&this.uint(t[6])&&this.string(t[7])&&this.string(t[8]);case 55:return this.boolean(t[1]);case 57:case 60:return this.uint(t[1])&&this.string(t[2])&&this.string(t[3])&&this.string(t[4]);case 58:case 120:return this.int(t[1]);case 59:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3])&&this.uint(t[4])&&this.string(t[5])&&this.string(t[6])&&this.string(t[7]);case 67:case 73:return this.uint(t[1])&&this.string(t[2])&&this.uint(t[3])&&this.string(t[4]);case 68:return this.uint(t[1])&&this.uint(t[2])&&this.string(t[3])&&this.string(t[4])&&this.uint(t[5])&&this.uint(t[6]);case 69:return this.uint(t[1])&&this.uint(t[2])&&this.string(t[3])&&this.string(t[4]);case 78:return this.string(t[1])&&this.string(t[2])&&this.string(t[3])&&this.string(t[4]);case 81:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3])&&this.int(t[4])&&this.string(t[5]);case 83:return this.string(t[1])&&this.string(t[2])&&this.string(t[3])&&this.string(t[4])&&this.string(t[5])&&this.uint(t[6])&&this.uint(t[7])&&this.uint(t[8])&&this.uint(t[9]);case 84:return this.string(t[1])&&this.string(t[2])&&this.string(t[3])&&this.uint(t[4])&&this.string(t[5])&&this.string(t[6]);case 112:return this.uint(t[1])&&this.string(t[2])&&this.boolean(t[3])&&this.string(t[4])&&this.int(t[5])&&this.int(t[6]);case 113:return this.uint(t[1])&&this.uint(t[2])&&this.string(t[3]);case 116:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3])&&this.uint(t[4])&&this.uint(t[5])&&this.uint(t[6])&&this.string(t[7])&&this.string(t[8])&&this.uint(t[9])&&this.boolean(t[10]);case 119:return this.string(t[1])&&this.uint(t[2]);case 121:return this.string(t[1])&&this.string(t[2])&&this.uint(t[3])&&this.uint(t[4]);case 122:return this.string(t[1])&&this.string(t[2])&&this.uint(t[3])&&this.string(t[4]);case 123:return this.string(t[1])&&this.string(t[2])&&this.string(t[3])&&this.string(t[4])&&this.uint(t[5])}}}class n{constructor(t,s,i,n,h,r){this.pageNo=t,this.timestamp=s,this.url=i,this.onBatch=n,this.tabId=h,this.onOfflineEnd=r,this.nextIndex=0,this.beaconSize=2e5,this.encoder=new e(this.beaconSize),this.sizeBuffer=new Uint8Array(3),this.isEmpty=!0,this.beaconSizeLimit=1e6,this.prepare()}writeType(t){return this.encoder.uint(t[0])}writeFields(t){return this.encoder.encode(t)}writeSizeAt(t,s){for(let s=0;s<3;s++)this.sizeBuffer[s]=t>>8*s;this.encoder.set(this.sizeBuffer,s)}prepare(){if(!this.encoder.isEmpty)return;const t=[81,1,this.pageNo,this.nextIndex,this.timestamp,this.url],s=[118,this.tabId];this.writeType(t),this.writeFields(t),this.writeWithSize(s),this.isEmpty=!0}writeWithSize(t){const s=this.encoder;if(!this.writeType(t)||!s.skip(3))return!1;const i=s.getCurrentOffset(),e=this.writeFields(t);if(e){const e=s.getCurrentOffset()-i;if(e>16777215)return console.warn("OpenReplay: max message size overflow."),!1;this.writeSizeAt(e,i-3),s.checkpoint(),this.isEmpty=this.isEmpty&&0===t[0],this.nextIndex++}return e}setBeaconSizeLimit(t){this.beaconSizeLimit=t}writeMessage(t){if("q_end"===t[0])return this.finaliseBatch(),this.onOfflineEnd();0===t[0]&&(this.timestamp=t[1]),122===t[0]&&(this.url=t[1]),this.writeWithSize(t)||(this.finaliseBatch(),this.writeWithSize(t)||(this.encoder=new e(this.beaconSizeLimit),this.prepare(),this.writeWithSize(t)?this.finaliseBatch():console.warn("OpenReplay: beacon size overflow. Skipping large message.",t,this),this.encoder=new e(this.beaconSize),this.prepare()))}finaliseBatch(){if(this.isEmpty)return;const t=this.encoder.flush();this.onBatch(t),this.prepare()}clean(){this.encoder.reset()}}var h;!function(t){t[t.NotActive=0]="NotActive",t[t.Starting=1]="Starting",t[t.Stopping=2]="Stopping",t[t.Active=3]="Active",t[t.Stopped=4]="Stopped"}(h||(h={}));let r=null,u=null,a=h.NotActive;function o(){u&&u.finaliseBatch()}function c(){return new Promise((t=>{a=h.Stopping,null!==p&&(clearInterval(p),p=null),u&&(u.clean(),u=null),r&&(r.clean(),setTimeout((()=>{r=null}),20)),setTimeout((()=>{a=h.NotActive,t(null)}),100)}))}function g(){[h.Stopped,h.Stopping].includes(a)||(postMessage("a_stop"),c().then((()=>{postMessage("a_start")})))}let l,p=null;self.onmessage=({data:s})=>{if(null!=s){if("stop"===s)return o(),void c().then((()=>{a=h.Stopped}));if("forceFlushBatch"!==s){if(!Array.isArray(s)){if("compressed"===s.type){if(!r)return console.debug("OR WebWorker: sender not initialised. Compressed batch."),void g();s.batch&&r.sendCompressed(s.batch)}if("uncompressed"===s.type){if(!r)return console.debug("OR WebWorker: sender not initialised. Uncompressed batch."),void g();s.batch&&r.sendUncompressed(s.batch)}return"start"===s.type?(a=h.Starting,r=new t(s.ingestPoint,(()=>{g()}),(t=>{!function(t){postMessage({type:"failure",reason:t}),c()}(t)}),s.connAttemptCount,s.connAttemptGap,(t=>{postMessage({type:"compress",batch:t},[t.buffer])}),s.pageNo),u=new n(s.pageNo,s.timestamp,s.url,(t=>{r&&r.push(t)}),s.tabId,(()=>postMessage({type:"queue_empty"}))),null===p&&(p=setInterval(o,1e4)),a=h.Active):"auth"===s.type?r?u?(r.authorise(s.token),void(s.beaconSizeLimit&&u.setBeaconSizeLimit(s.beaconSizeLimit))):(console.debug("OR WebWorker: writer not initialised. Received auth."),void g()):(console.debug("OR WebWorker: sender not initialised. Received auth."),void g()):void 0}if(u){const t=u;s.forEach((s=>{55===s[0]&&(s[1]?l=setTimeout((()=>g()),18e5):clearTimeout(l)),t.writeMessage(s)}))}else postMessage("not_init"),g()}else o()}else o()}}();\n'],{type:"text/javascript"}))),this.worker.onerror=e=>{this._debug("webworker_error",e)},this.worker.onmessage=({data:e})=>{this.handleWorkerMsg(e)};const e=()=>{this.worker&&this.worker.postMessage(null)};this.attachEventListener(window,"beforeunload",e,!1),this.attachEventListener(document.body,"mouseleave",e,!1,!1),this.attachEventListener(document,"visibilitychange",e,!1)}catch(e){this._debug("worker_start",e)}}handleWorkerMsg(e){if("a_stop"===e)this.stop(!1);else if("a_start"===e)this.start({},!0);else if("not_init"===e)this.debug.warn("OR WebWorker: writer not initialised. Restarting tracker");else if("failure"===e.type)this.stop(!1),this.debug.error("worker_failed",e.reason),this._debug("worker_failed",e.reason);else if("compress"===e.type){const t=e.batch;t.byteLength>this.compressionThreshold?qm(e.batch,{mtime:0},((e,n)=>{e?(this.debug.error("Openreplay compression error:",e),this.worker?.postMessage({type:"uncompressed",batch:t})):this.worker?.postMessage({type:"compressed",batch:n})})):this.worker?.postMessage({type:"uncompressed",batch:t})}else"queue_empty"===e.type&&this.onSessionSent()}_debug(e,t){null!==this.options.__debug_report_edp&&fetch(this.options.__debug_report_edp,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context:e,error:`${t}`})}),this.debug.error("OpenReplay error: ",e,t)}send(e,t=!1){this.activityState!==s_.NotActive&&(this.activityState===s_.ColdStart?(this.bufferedMessages1.push(e),this.singleBuffer||this.bufferedMessages2.push(e),this.conditionsManager?.processMessage(e)):this.messages.push(e),this.activityState===s_.Active&&t&&this.commit())}_nCommit(){if(this.socketMode)return this.messages.unshift(Hg(this.session.getTabId())),this.messages.unshift(kg(this.timestamp())),this.commitCallbacks.forEach((e=>e(this.messages))),void(this.messages.length=0);if(this.insideIframe)return window.parent.postMessage({line:h_,messages:this.messages},this.options.crossdomain?.parentDomain??"*"),this.commitCallbacks.forEach((e=>e(this.messages))),void(this.messages.length=0);var e;if(void 0!==this.worker&&this.messages.length)try{e=()=>{this.messages.unshift(Hg(this.session.getTabId())),this.messages.unshift(kg(this.timestamp())),this.worker?.postMessage(this.messages),this.commitCallbacks.forEach((e=>e(this.messages))),this.messages.length=0},Sg.addTask(e)}catch(e){this._debug("worker_commit",e),this.stop(!0),setTimeout((()=>{this.start()}),500)}}_cStartCommit(){this.coldStartCommitN+=1,2===this.coldStartCommitN&&(this.bufferedMessages1.push(kg(this.timestamp())),this.bufferedMessages1.push(Hg(this.session.getTabId())),this.bufferedMessages2.push(kg(this.timestamp())),this.bufferedMessages2.push(Hg(this.session.getTabId())),this.coldStartCommitN=0)}commit(){this.activityState===s_.ColdStart?this._cStartCommit():this._nCommit()}postToWorker(e){this.worker?.postMessage(e),this.commitCallbacks.forEach((t=>t(e))),e.length=0}timestamp(){return ig()+this.delay}safe(e){const t=this;return function(...n){try{e.apply(this,n)}catch(e){t._debug("safe_fn_call",e)}}}attachCommitCallback(e){this.commitCallbacks.push(e)}checkRequiredVersion(e){const t=e.split(/[.-]/),n=this.version.split(/[.-]/);for(let e=0;e<3;e++){if(isNaN(Number(n[e]))||isNaN(Number(t[e])))return!1;if(Number(n[e])>Number(t[e]))return!0;if(Number(n[e])<Number(t[e]))return!1}return!0}getTrackerInfo(){return{userUUID:this.localStorage.getItem(this.options.local_uuid_key),projectKey:this.projectKey,revID:this.revID,trackerVersion:this.version,isSnippet:this.options.__is_snippet}}getSessionInfo(){return{...this.session.getInfo(),...this.getTrackerInfo()}}getSessionToken(){return this.session.getSessionToken()}getSessionID(){return this.session.getInfo().sessionID||void 0}getSessionURL(e){const{projectID:t,sessionID:n,timestamp:s}=this.session.getInfo();if(!t||!n)return void this.debug.error("OpenReplay error: Unable to build session URL");const r=this.options.ingestPoint,i=(/api\.openreplay\.com/.test(r)?"https://app.openreplay.com/ingest":r).replace(/ingest$/,`${t}/session/${n}`);return e?.withCurrentTime?`${i}?jumpto=${ig()-s}`:i}getHost(){return new URL(this.options.ingestPoint).host}getProjectKey(){return this.projectKey}getBaseHref(){return"string"==typeof this.options.resourceBaseHref?this.options.resourceBaseHref:(this.options.resourceBaseHref,document.baseURI?document.baseURI:document.head?.getElementsByTagName("base")[0]?.getAttribute("href")||location.origin+location.pathname)}resolveResourceURL(e){const t=new URL(this.getBaseHref());return t.pathname+="/"+new URL(e).pathname,t.pathname.replace(/\/+/g,"/"),t.toString()}isServiceURL(e){return e.startsWith(this.options.ingestPoint)}active(){return this.activityState===s_.Active}resetNextPageSession(e){e?this.sessionStorage.setItem(this.options.session_reset_key,"t"):this.sessionStorage.removeItem(this.options.session_reset_key)}checkSessionToken(e){const t=null!==this.sessionStorage.getItem(this.options.session_reset_key),n=e||t,s=this.session.getSessionToken();return n||!s}async coldStart(e={},t){this.singleBuffer=!1;const n=this.checkSessionToken(e.forceNew);t&&await this.setupConditionalStart(e);const s=()=>{this.orderNumber+=1,sg(),this.coldStartTs=ig(),this.orderNumber%2==0?(this.bufferedMessages1.length=0,this.bufferedMessages1.push(kg(this.timestamp())),this.bufferedMessages1.push(Hg(this.session.getTabId()))):(this.bufferedMessages2.length=0,this.bufferedMessages2.push(kg(this.timestamp())),this.bufferedMessages2.push(Hg(this.session.getTabId()))),this.stop(!1),this.activityState=s_.ColdStart,e.sessionHash&&this.session.applySessionHash(e.sessionHash),e.forceNew&&this.session.reset(),this.session.assign({userID:e.userID,metadata:e.metadata}),n||(this.debug.log("continuing session on new tab",this.session.getTabId()),this.send(Ug(this.session.getTabId()))),this.observer.observe(),this.ticker.start()};this.coldInterval=setInterval((()=>{s()}),3e4),s()}async setupConditionalStart(e){this.conditionsManager=new Ym(this,e);const t=await fetch(this.options.ingestPoint+"/v1/web/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...this.getTrackerInfo(),timestamp:ig(),doNotRecord:!0,bufferDiff:0,userID:this.session.getInfo().userID,token:void 0,deviceMemory:qg,jsHeapSizeLimit:Wg,timezone:i_(),width:window.screen.width,height:window.screen.height})}),{token:n,userBrowser:s,userCity:r,userCountry:i,userDevice:o,userOS:a,userState:c,projectID:l,features:u}=await t.json();this.features=u||this.features,this.session.assign({projectID:l}),this.session.setUserInfo({userBrowser:s,userCity:r,userCountry:i,userDevice:o,userOS:a,userState:c});const d={sessionToken:n,userUUID:"",sessionID:""};this.startCallbacks.forEach((e=>e(d))),await(this.conditionsManager?.fetchConditions(l,n)),this.features["feature-flags"]&&(await this.featureFlags.reloadFlags(n),this.conditionsManager?.processFlags(this.featureFlags.flags)),await this.tagWatcher.fetchTags(this.options.ingestPoint,n)}offlineRecording(e={},t){this.onSessionSent=t,this.singleBuffer=!0;const n=this.checkSessionToken(e.forceNew);sg(),this.coldStartTs=ig();const s=this.localStorage.getItem(e_);if(s){const e=JSON.parse(s);this.bufferedMessages1=Array.isArray(e)?e:this.bufferedMessages1,this.localStorage.removeItem(e_)}this.bufferedMessages1.push(kg(this.timestamp())),this.bufferedMessages1.push(Hg(this.session.getTabId())),this.activityState=s_.ColdStart,e.sessionHash&&this.session.applySessionHash(e.sessionHash),e.forceNew&&this.session.reset(),this.session.assign({userID:e.userID,metadata:e.metadata});const r={sessionToken:"",userUUID:"",sessionID:""};return this.startCallbacks.forEach((e=>e(r))),n||this.send(Ug(this.session.getTabId())),this.observer.observe(),this.ticker.start(),{saveBuffer:this.saveBuffer,getBuffer:this.getBuffer,setBuffer:this.setBuffer}}saveBuffer(){this.localStorage.setItem(e_,JSON.stringify(this.bufferedMessages1))}getBuffer(){return this.bufferedMessages1}setBuffer(e){this.bufferedMessages1=e}async uploadOfflineRecording(){this.stop(!1);const e=ig();this.worker?.postMessage({type:"start",pageNo:this.session.incPageNo(),ingestPoint:this.options.ingestPoint,timestamp:this.coldStartTs,url:document.URL,connAttemptCount:this.options.connAttemptCount,connAttemptGap:this.options.connAttemptGap,tabId:this.session.getTabId()});const t=await fetch(this.options.ingestPoint+"/v1/web/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...this.getTrackerInfo(),timestamp:e,doNotRecord:!1,bufferDiff:e-this.coldStartTs,userID:this.session.getInfo().userID,token:void 0,deviceMemory:qg,jsHeapSizeLimit:Wg,timezone:i_()})}),{token:n,userBrowser:s,userCity:r,userCountry:i,userDevice:o,userOS:a,userState:c,beaconSizeLimit:l,projectID:u}=await t.json();for(this.worker?.postMessage({type:"auth",token:n,beaconSizeLimit:l}),this.session.assign({projectID:u}),this.session.setUserInfo({userBrowser:s,userCity:r,userCountry:i,userDevice:o,userOS:a,userState:c});this.bufferedMessages1.length>0;)await this.flushBuffer(this.bufferedMessages1);this.postToWorker([["q_end"]]),this.clearBuffers()}async _start(e={},t=!1,n){const s=this.activityState===s_.ColdStart;if(s&&this.coldInterval&&clearInterval(this.coldInterval),!this.worker&&!this.insideIframe){const e="No worker found: perhaps, CSP is not set.";return this.signalError(e,[]),Promise.resolve(t_(e))}if(this.activityState===s_.Active||this.activityState===s_.Starting){const e="OpenReplay: trying to call `start()` on the instance that has been started already.";return Promise.resolve(t_(e))}this.activityState=s_.Starting,s||sg(),e.sessionHash&&this.session.applySessionHash(e.sessionHash),e.forceNew&&this.session.reset(),this.session.assign({userID:e.userID,metadata:e.metadata});const r=ig();this.worker?.postMessage({type:"start",pageNo:this.session.incPageNo(),ingestPoint:this.options.ingestPoint,timestamp:s?this.coldStartTs:r,url:document.URL,connAttemptCount:this.options.connAttemptCount,connAttemptGap:this.options.connAttemptGap,tabId:this.session.getTabId()});const i=this.session.getSessionToken(),o=this.checkSessionToken(e.forceNew);this.sessionStorage.removeItem(this.options.session_reset_key),this.debug.log("OpenReplay: starting session; need new session id?",o,"session token: ",i);try{const t=await window.fetch(this.options.ingestPoint+"/v1/web/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...this.getTrackerInfo(),timestamp:r,doNotRecord:!1,bufferDiff:r-this.coldStartTs,userID:this.session.getInfo().userID,token:o?void 0:i,deviceMemory:qg,jsHeapSizeLimit:Wg,timezone:i_(),condition:n,assistOnly:e.assistOnly??this.socketMode,width:window.screen.width,height:window.screen.height})});if(200!==t.status){const e=await t.text(),n=e===Qy?Qy:`Server error: ${t.status}. ${e}`;return t_(n)}if(!this.worker&&!this.insideIframe){const e="no worker found after start request (this should not happen in real world)";return this.signalError(e,[]),t_(e)}const{token:a,userUUID:c,projectID:l,beaconSizeLimit:u,compressionThreshold:d,delay:h,sessionID:p,startTimestamp:f,userBrowser:m,userCity:g,userCountry:y,userDevice:_,userOS:b,userState:v,canvasEnabled:S,canvasQuality:w,canvasFPS:k,assistOnly:E,features:x}=await t.json();if(this.features=x||this.features,"string"!=typeof a||"string"!=typeof c||"number"!=typeof f&&void 0!==f||"string"!=typeof p||"number"!=typeof h||"number"!=typeof u&&void 0!==u){const e=`Incorrect server response: ${JSON.stringify(t)}`;return this.signalError(e,[]),t_(e)}this.delay=h,this.session.setSessionToken(a),this.session.setUserInfo({userBrowser:m,userCity:g,userCountry:y,userDevice:_,userOS:b,userState:v}),this.session.assign({sessionID:p,timestamp:f||r,projectID:l}),E?(this.socketMode=!0,this.worker?.postMessage("stop")):this.worker?.postMessage({type:"auth",token:a,beaconSizeLimit:u}),o||a!==i||(this.debug.log("continuing session on new tab",this.session.getTabId()),this.send(Ug(this.session.getTabId()))),Object.entries(this.session.getInfo().metadata).forEach((([e,t])=>this.send(Tg(e,t)))),this.localStorage.setItem(this.options.local_uuid_key,c),this.compressionThreshold=d;const T={sessionToken:a,userUUID:c,sessionID:p};if(this.startCallbacks.forEach((e=>e(T))),e.startCallback&&e.startCallback(n_(T)),this.features["feature-flags"]&&this.featureFlags.reloadFlags(),await this.tagWatcher.fetchTags(this.options.ingestPoint,a),this.activityState=s_.Active,this.options.crossdomain?.enabled&&!this.insideIframe&&this.bootChildrenFrames(),S&&!this.options.canvas.disableCanvas&&(this.canvasRecorder=this.canvasRecorder??new Ay(this,{fps:k,quality:w,isDebug:this.options.canvas.__save_canvas_locally,fixedScaling:this.options.canvas.fixedCanvasScaling,useAnimationFrame:this.options.canvas.useAnimationFrame})),s){const e=this.bufferedMessages1.length>this.bufferedMessages2.length?this.bufferedMessages1:this.bufferedMessages2;for(;e.length>0;)await this.flushBuffer(e);this.clearBuffers(),this.commit()}else this.insideIframe&&this.rootId?this.observer.crossdomainObserve(this.rootId,this.frameOderNumber):this.observer.observe(),this.ticker.start();if(this.canvasRecorder?.startTracking(),this.features["usability-test"]&&!this.insideIframe){let e;this.uxtManager=this.uxtManager?this.uxtManager:new xy(this,Zy);const t=this.localStorage.getItem(Zy);if(t&&(e=parseInt(t,10)),location?.search){const t=new URLSearchParams(location.search);if(t.has("oruxt")){const n=t.get("oruxt");e=n?parseInt(n,10):void 0}}e&&(this.uxtManager.isActive?this.onUxtCb.forEach((t=>t(e))):this.uxtManager.getTest(e,a,Boolean(t)).then((e=>{e&&this.onUxtCb.forEach((t=>t(e)))})))}return n_(T)}catch(e){if(this.stop(),this.session.reset(),!e)return console.error("Unknown error during start"),this.signalError("Unknown error",[]),t_("Unknown error");if(e===Qy)return this.signalError(Qy,[]),t_(Qy);this._debug("session_start",e);const t=e instanceof Error?e.message:e.toString();return this.signalError(t,[]),t_(t)}}addOnUxtCb(e){this.onUxtCb.push(e)}getUxtId(){return this.uxtManager?.getTestId()}async waitStart(){return new Promise((e=>{const t=setInterval((()=>{this.canStart&&(clearInterval(t),e(!0))}),100)}))}async waitStarted(){return this.waitStatus(s_.Active)}async waitStatus(e){return new Promise((t=>{const n=()=>{this.activityState===e?t(!0):setTimeout(n,25)};n()}))}async start(...e){if(this.activityState===s_.Active||this.activityState===s_.Starting){const e="OpenReplay: trying to call `start()` on the instance that has been started already.";return Promise.resolve(t_(e))}return this.insideIframe&&this.signalIframeTracker(),document.hidden?new Promise((t=>{const n=async()=>{document.hidden||(await this.waitStart(),document.removeEventListener("visibilitychange",n),t(this._start(...e)))};document.addEventListener("visibilitychange",n)})):(await this.waitStart(),this._start(...e))}forceFlushBatch(){this.worker?.postMessage("forceFlushBatch")}getTabId(){return this.session.getTabId()}clearBuffers(){this.bufferedMessages1.length=0,this.bufferedMessages2.length=0}trackWs(e){const t=e;return(e,n,s="down")=>{"string"!=typeof e||"string"!=typeof n||n.length>5242880||e.length>255||this.send(function(e,t,n,s,r,i){return[84,e,t,n,s,r,i]}("websocket",t,n,this.timestamp(),s,e))}}stop(e=!0){if(this.activityState!==s_.NotActive){console.trace("stopped");try{!this.insideIframe&&this.options.crossdomain?.enabled&&this.killChildrenFrames(),this.attributeSender.clear(),this.sanitizer.clear(),this.observer.disconnect(),this.nodes.clear(),this.ticker.stop(),this.stopCallbacks.forEach((e=>e())),this.tagWatcher.clear(),this.worker&&e&&this.worker.postMessage("stop"),this.canvasRecorder?.clear(),this.messages.length=0,this.trackedFrames=[],this.parentActive=!1,this.canStart=!1}finally{this.activityState=s_.NotActive,this.debug.log("OpenReplay tracking stopped.")}}}}const __=eg&&"InstallTrigger"in window?e=>e.message+"\n"+e.stack:e=>e.stack||e.message;function b_(e){return void 0===e?"undefined":null===e?"null":e instanceof Error?__(e):Array.isArray(e)?`Array(${e.length})`:String(e)}function v_(e){if(void 0===e)return"undefined";if(null===e)return"null";if(e instanceof Error)return __(e);if(Array.isArray(e))return`Array(${e.length})[${e.slice(0,10).map(b_).join(", ")}]`;if("object"==typeof e){const t=[];let n=0;for(const s in e){if(10==++n)break;const r=e[s];t.push(s+": "+b_(r))}return"{"+t.join(", ")+"}"}return e.toString()}const S_=["log","info","warn","error","debug","assert"];function w_(e,t){const n=Object.assign({consoleMethods:S_,consoleThrottling:30},t);if(!Array.isArray(n.consoleMethods)||0===n.consoleMethods.length)return;const s=e.safe(((t,n)=>e.send(function(e,t){return[22,e,t]}(t,function(e){return"string"==typeof e[0]&&e.unshift(e.shift().replace(/%(o|s|f|d|i)/g,((t,n)=>{const s=e.shift();if(void 0===s)return t;switch(n){case"o":return v_(s);case"s":return b_(s);case"f":return function(e){return"number"!=typeof e?"NaN":e.toString()}(s);case"d":case"i":return function(e){return"number"!=typeof e?"NaN":Math.floor(e).toString()}(s);default:return t}}))),e.map(v_).join(" ")}(n)))));let r=0;const i=()=>{r=0};e.attachStartCallback(i),e.ticker.attach(i,33,!1);const o=e.safe((t=>((t,i)=>{const o={apply:function(e,t,o){Reflect.apply(e,i,o),r+=1,r>n.consoleThrottling||s(e.name,o)}};n.consoleMethods.forEach((n=>{if(-1===S_.indexOf(n))return void e.debug.error(`OpenReplay: unsupported console method "${n}"`);const s=i.console[n];t[n]=new Proxy(s,o)}))})(t.console,t)));o(window),e.observer.attachContextCallback(o)}const k_=/(^|@)\S+:\d+/,E_=/^\s*at .*(\S+:\d+|\(native\))/m,x_=/^(eval@)?(\[native code\])?$/;function T_(e){if(!e.includes(":"))return[e,void 0,void 0];const t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]}function I_(e,t){return e}function C_(e){return[{columnNumber:e.colno,lineNumber:e.lineno,fileName:e.filename,functionName:"",source:""}]}function M_(e,t,n={}){let s=t;try{s=function(e){return function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return!(t=e).stacktrace||t.message.includes("\n")&&t.message.split("\n").length>t.stacktrace.split("\n").length?function(e){const t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),s=[];for(let e=2,r=n.length;e<r;e+=2){const r=t.exec(n[e]);r&&s.push({file:r[2],line:+r[1],raw:n[e]})}return I_(s)}(t):t.stack?function(e){return I_(e.stack.split("\n").filter((e=>!!e.match(k_)&&!e.match(/^Error created at/)))).map((e=>{const t=e.split("@"),n=T_(t.pop()),s=t.shift()||"",r=s.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;let i;return s.match(/\(([^)]*)\)/)&&(i=s.replace(/^[^(]+\(([^)]*)\)$/,"$1")),{function:r,args:void 0===i||"[arguments not available]"===i?void 0:i.split(","),file:n[0],line:n[1]?+n[1]:void 0,col:n[2]?+n[2]:void 0,raw:e}}))}(t):function(e){const t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),s=[];for(let e=0,r=n.length;e<r;e+=2){const r=t.exec(n[e]);r&&s.push({function:r[3]||void 0,file:r[2],line:r[1]?+r[1]:void 0,raw:n[e]})}return I_(s)}(t);var t;if(e.stack&&e.stack.match(E_))return function(e){return I_(e.stack.split("\n").filter((e=>!!e.match(E_)))).map((e=>{e.includes("(eval ")&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));let t=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,"");const n=t.match(/ (\(.+\)$)/);t=n?t.replace(n[0],""):t;const s=T_(n?n[1]:t);return{function:n&&t||void 0,file:["eval","<anonymous>"].includes(s[0])?void 0:s[0],line:s[1]?+s[1]:void 0,col:s[2]?+s[2]:void 0,raw:e}}))}(e);if(e.stack)return function(e){return I_(e.stack.split("\n").filter((e=>!e.match(x_)))).map((e=>{if(e.includes(" > eval")&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),e.includes("@")||e.includes(":")){const t=/(([^\n\r"\u2028\u2029]*".[^\n\r"\u2028\u2029]*"[^\n\r@\u2028\u2029]*(?:@[^\n\r"\u2028\u2029]*"[^\n\r@\u2028\u2029]*)*(?:[\n\r\u2028\u2029][^@]*)?)?[^@]*)@/,n=e.match(t),s=n&&n[1]?n[1]:void 0,r=T_(e.replace(t,""));return{function:s,file:r[0],line:r[1]?+r[1]:void 0,col:r[2]?+r[2]:void 0,raw:e}}return{function:e}}))}(e);throw new Error("Cannot parse given Error object")}(e).map((e=>({functionName:e.function,args:e.args,fileName:e.file,lineNumber:e.line,columnNumber:e.col,source:e.raw})))}(e)}catch(e){}return Pg(e.name,e.message,JSON.stringify(s),JSON.stringify(n))}function R_(e,t=window,n={}){if(e instanceof ErrorEvent){if(e.error instanceof Error)return M_(e.error,C_(e),n);{let[t,s]=e.message.split(":");return s||(t="Error",s=e.message),Pg(t,s,JSON.stringify(C_(e)),JSON.stringify(n))}}if("PromiseRejectionEvent"in t&&e instanceof t.PromiseRejectionEvent){if(e.reason instanceof Error)return M_(e.reason,[],n);{let t;try{t=JSON.stringify(e.reason)}catch(n){t=String(e.reason)}return Pg("Unhandled Promise Rejection",t,"[]",JSON.stringify(n))}}return null}function N_(e,t=document.location){return(e=e.trim()).startsWith("//")||e.startsWith("http://")||e.startsWith("https://")||e.startsWith("data:")?e:e.startsWith("/")?t.origin+e:t.origin+t.pathname+e}const O_=["text","password","email","search","number","range","date","tel","time"],A_=eg&&"labels"in HTMLInputElement.prototype?e=>{let t=e;for(;null!==(t=t.parentNode);)if(Oy(t,"label"))return t;const n=e.labels;if(null!==n&&1===n.length)return n[0]}:e=>{let t=e;for(;null!==(t=t.parentNode);)if(Oy(t,"label"))return t;const n=e.id;if(n){const t=e.ownerDocument.querySelectorAll('label[for="'+n+'"]');if(null!==t&&1===t.length)return t[0]}};function D_(e){let t=hg(e);if(null===t){const n=A_(e);t=n&&n.innerText||e.placeholder||e.name||e.id||e.className||e.type}return ag(t).slice(0,100)}let L_,P_,F_;function $_(e,t){if(F_=new Date,e.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if("html"===e.tagName.toLowerCase())return"html";const n={root:document.body,idName:e=>!0,className:e=>!0,tagName:e=>!0,attr:(e,t)=>!1,seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4,timeoutMs:void 0};L_={...n,...t},P_=function(e,t){return e.nodeType===Node.DOCUMENT_NODE?e:e===t.root?e.ownerDocument:e}(L_.root,n);let s=j_(e,"all",(()=>j_(e,"two",(()=>j_(e,"one",(()=>j_(e,"none")))))));if(s){const t=eb(tb(s,e));return t.length>0&&(s=t[0]),U_(s)}throw new Error("Selector was not found.")}function j_(e,t,n){let s=null,r=[],i=e,o=0;for(;i;){const e=(new Date).getTime()-F_.getTime();if(void 0!==L_.timeoutMs&&e>L_.timeoutMs)throw new Error(`Timeout: Can't find a unique selector after ${e}ms`);let a=K_(q_(i))||K_(...W_(i))||K_(...V_(i))||K_(G_(i))||[{name:"*",penalty:3}];const c=X_(i);if("all"==t)c&&(a=a.concat(a.filter(J_).map((e=>Y_(e,c)))));else if("two"==t)a=a.slice(0,1),c&&(a=a.concat(a.filter(J_).map((e=>Y_(e,c)))));else if("one"==t){const[e]=a=a.slice(0,1);c&&J_(e)&&(a=[Y_(e,c)])}else"none"==t&&(a=[{name:"*",penalty:3}],c&&(a=[Y_(a[0],c)]));for(let e of a)e.level=o;if(r.push(a),r.length>=L_.seedMinLength&&(s=B_(r,n),s))break;i=i.parentElement,o++}return s||(s=B_(r,n)),!s&&n?n():s}function B_(e,t){const n=eb(Z_(e));if(n.length>L_.threshold)return t?t():null;for(let e of n)if(z_(e))return e;return null}function U_(e){let t=e[0],n=t.name;for(let s=1;s<e.length;s++){const r=e[s].level||0;n=t.level===r-1?`${e[s].name} > ${n}`:`${e[s].name} ${n}`,t=e[s]}return n}function H_(e){return e.map((e=>e.penalty)).reduce(((e,t)=>e+t),0)}function z_(e){const t=U_(e);switch(P_.querySelectorAll(t).length){case 0:throw new Error(`Can't select any node with this selector: ${t}`);case 1:return!0;default:return!1}}function q_(e){const t=e.getAttribute("id");return t&&L_.idName(t)?{name:"#"+CSS.escape(t),penalty:0}:null}function W_(e){const t=Array.from(e.attributes).filter((e=>L_.attr(e.name,e.value)));return t.map((e=>({name:`[${CSS.escape(e.name)}="${CSS.escape(e.value)}"]`,penalty:.5})))}function V_(e){return Array.from(e.classList).filter(L_.className).map((e=>({name:"."+CSS.escape(e),penalty:1})))}function G_(e){const t=e.tagName.toLowerCase();return L_.tagName(t)?{name:t,penalty:2}:null}function X_(e){const t=e.parentNode;if(!t)return null;let n=t.firstChild;if(!n)return null;let s=0;for(;n&&(n.nodeType===Node.ELEMENT_NODE&&s++,n!==e);)n=n.nextSibling;return s}function Y_(e,t){return{name:e.name+`:nth-child(${t})`,penalty:e.penalty+1}}function J_(e){return"html"!==e.name&&!e.name.startsWith("#")}function K_(...e){const t=e.filter(Q_);return t.length>0?t:null}function Q_(e){return null!=e}function*Z_(e,t=[]){if(e.length>0)for(let n of e[0])yield*Z_(e.slice(1,e.length),t.concat(n));else yield t}function eb(e){return[...e].sort(((e,t)=>H_(e)-H_(t)))}function*tb(e,t,n={counter:0,visited:new Map}){if(e.length>2&&e.length>L_.optimizedMinLength)for(let s=1;s<e.length-1;s++){if(n.counter>L_.maxNumberOfTries)return;n.counter+=1;const r=[...e];r.splice(s,1);const i=U_(r);if(n.visited.has(i))return;z_(r)&&nb(r,t)&&(yield r,n.visited.set(i,!0),yield*tb(r,t,n))}}function nb(e,t){return P_.querySelector(U_(e))===t}function sb(e){const t=e.tagName.toUpperCase();return"BUTTON"===t||"A"===t||"LI"===t||"SELECT"===t||"TR"===t||"TH"===t||null!=e.onclick||"button"===e.getAttribute("role")}function rb(e,t){return e instanceof Element?function(e,t){let n=e;for(;null!==n&&n!==t.documentElement;){if(pg(n,"masked"))return null;n=n.parentElement}if(Iy(e)){let t=e.ownerSVGElement;for(;null!==t;)e=t,t=t.ownerSVGElement}for(n=e;null!==n&&n!==t.documentElement;){const e=n.tagName.toUpperCase();if("LABEL"===e)return null;if("INPUT"===e)return n;if(sb(n)||null!==hg(n))return n;n=n.parentElement}return e===t.documentElement?null:e}(e,t):null}function ib(e,t){const{disableClickmaps:n=!1}=t||{};let s,r=-1,i=-1,o=!1,a=null,c=0,l={},u=0,d=0,h=0,p=0;e.attachStartCallback((()=>{s=setInterval((()=>function(){const t=p/225;u?(h>4&&(t-u)/225>.008&&e.send([114,ig()]),p=0,h=0,u=t):u=t}()),225)})),e.attachStopCallback((()=>{r=-1,i=-1,o=!1,a=null,l={},s&&clearInterval(s)}));const f=()=>{o&&(e.send(function(e,t){return[20,e,t]}(r,i)),o=!1)},m=(s,u=!1)=>{const m=u?e.attachEventListener.bind(e):e.nodes.attachNodeListener.bind(e.nodes);m(s.documentElement,"mouseover",(e=>{const t=rb(e.target,s);t!==a&&(a=t,c=performance.now())})),m(s,"mousemove",(t=>{const[n,a]=e.observer.getDocumentOffset(s);r=t.clientX+n,i=t.clientY+a,o=!0;const c=Math.sign(t.movementX);p+=Math.abs(t.movementX)+Math.abs(t.movementY),c!==d&&(d=c,h++)}),!1),m(s,"click",(r=>{const i=rb(r.target,s);if(!r.clientX&&!r.clientY||null===i)return;const o=e.nodes.getID(i);if(void 0!==o){const u=r.pageX,d=r.pageY,h=s.documentElement.scrollWidth,p=s.documentElement.scrollHeight,m=ob(u/h),g=ob(d/p);f(),e.send(function(e,t,n,s,r,i){return[68,e,t,n,s,r,i]}(o,a===i?Math.round(performance.now()-c):0,function(t){const n=hg(t);if(null!==n)return n;if(Oy(t,"input"))return D_(t);if(sb(t)){let n="";return t instanceof HTMLElement&&(n=e.sanitizer.getInnerTextSecure(t)),n=n||t.id||t.className,ag(n).slice(0,100)}return""}(i),sb(i)&&!n?function(e,t,n){return l[e]=l[e]||function(e,t,n){return $_(e,{root:t.body,seedMinLength:3,optimizedMinLength:n?.minSelectorDepth||2,threshold:n?.nthThreshold||1e3,maxNumberOfTries:n?.maxOptimiseTries||1e4})}(t,s,n)}(o,i,t):"",m,g),!0)}a=null}))};e.nodes.attachNodeCallback((e=>{Ry(e)&&m(e)})),m(document,!0),e.ticker.attach(f,t?.trackingOffset||7)}function ob(e){return Math.round(1e4*e)}function ab(e){const t=e.defaultView;return[t&&t.scrollX||e.documentElement&&e.documentElement.scrollLeft||e.body&&e.body.scrollLeft||0,t&&t.scrollY||e.documentElement&&e.documentElement.scrollTop||e.body&&e.body.scrollTop||0]}function cb(e){return Ny(e)&&!!e.adoptedStyleSheets}let lb=15;function ub(){return lb++}const db=new Map;class hb{constructor(e=[],t,n){this.ignoredHeaders=e,this.setSessionTokenHeader=t,this.sanitize=n,this.id="",this.name="",this.method="",this.url="",this.status=0,this.statusText="",this.cancelState=0,this.readyState=0,this.header={},this.responseType="",this.requestType="xhr",this.requestHeader={},this.responseSize=0,this.responseSizeText="",this.startTime=0,this.endTime=0,this.duration=0,this.getData={},this.requestData=null}getMessage(){const{reqHs:e,resHs:t}=this.writeHeaders(),n={headers:e,body:"GET"===this.method?JSON.stringify(this.getData):this.requestData},s={headers:t,body:this.response},r=this.sanitize({url:this.url,method:this.method,status:this.status,request:n,response:s});if(!r)return null;if(r.url.includes("/graphql")&&r.response.body&&"string"==typeof r.response.body){const e=r.response.body.includes("errors");r.status=e?400:200,this.requestType="graphql"}return{requestType:this.requestType,method:r.method,url:r.url,request:JSON.stringify(r.request),response:JSON.stringify(r.response),status:r.status,startTime:this.startTime,duration:this.duration,responseSize:this.responseSize}}writeHeaders(){const e={};Object.entries(this.requestHeader).forEach((([t,n])=>{this.isHeaderIgnored(t)||(e[t]=n)})),this.setSessionTokenHeader(((t,n)=>{e[t]=n}));const t={};return Object.entries(this.header).forEach((([e,n])=>{this.isHeaderIgnored(e)||(t[e]=n)})),{reqHs:e,resHs:t}}isHeaderIgnored(e){return Array.isArray(this.ignoredHeaders)?this.ignoredHeaders.map((e=>e.toLowerCase())).includes(e.toLowerCase()):this.ignoredHeaders}}const pb=(e,t)=>{let n="";switch(e){case"":case"text":case"json":"string"==typeof t?n=t:mb(t)||Array.isArray(t)?n=JSON.stringify(t):void 0!==t&&(n=Object.prototype.toString.call(t));break;default:void 0!==t&&(n=Object.prototype.toString.call(t))}return n},fb=e=>{if(!e)return null;let t;if("string"==typeof e){"{"!==e[0]&&"["!==e[0]||(t=e);const n=e.split("&");t=1===n.length?e:n.join(",")}else if(null==(n=e)||ArrayBuffer.isView(n)||"undefined"==typeof Symbol||"function"!=typeof n[Symbol.iterator])t=e instanceof Blob||e instanceof ReadableStream||e instanceof ArrayBuffer?"byte data":mb(e)?e:"can't parse body "+typeof e;else{const n=[];for(const[t,s]of e)n.push(`${t}=${"string"==typeof s?s:"[object Object]"}`);t=n.join(",")}var n;return t};function mb(e){return null!==e&&"object"==typeof e}function gb(e){return e<=0?"":e>=1e6?(e/1e3/1e3).toFixed(1)+" MB":e>=1e3?(e/1e3).toFixed(1)+" KB":`${e}B`}const yb=e=>(e.startsWith("//")&&(e=`${new URL(window.location.href).protocol}${e}`),e.startsWith("http")?new URL(e):new URL(e,window.location.href));var _b;const bb=e=>e instanceof Blob?e.type:e instanceof FormData?"multipart/form-data":e instanceof URLSearchParams?"application/x-www-form-urlencoded;charset=UTF-8":"text/plain;charset=UTF-8";class vb{constructor(e,t,n,s,r){this.ignoredHeaders=e,this.setSessionTokenHeader=t,this.sanitize=n,this.sendMessage=s,this.isServiceUrl=r}apply(e,t,n){const s=n[0],r=n[1],i=new hb(this.ignoredHeaders,this.setSessionTokenHeader,this.sanitize);if(this.isServiceUrl(s))return e.apply(t,n);const o=yb(s);if(i.method="POST",i.url=s,i.name=(o.pathname.split("/").pop()||"")+o.search,i.requestType="beacon",i.requestHeader={"Content-Type":bb(r)},i.status=0,i.statusText="Pending",o.search&&o.searchParams){i.getData={};for(const[e,t]of o.searchParams)i.getData[e]=t}i.requestData=fb(r),i.startTime||(i.startTime=performance.now());const a=e.apply(t,n);a?(i.endTime=performance.now(),i.duration=i.endTime-(i.startTime||i.endTime),i.status=0,i.statusText="Sent",i.readyState=4):(i.status=500,i.statusText="Unknown");const c=i.getMessage();return c&&this.sendMessage(c),a}}class Sb{static hasSendBeacon(){return!!Sb.origSendBeacon}static create(e,t,n,s,r){if(Sb.hasSendBeacon())return new Proxy(Sb.origSendBeacon,new vb(e,t,n,s,r))}}var wb;Sb.origSendBeacon=null===(_b=null===window||void 0===window?void 0:window.navigator)||void 0===_b?void 0:_b.sendBeacon,function(e){e[e.UNSENT=0]="UNSENT",e[e.OPENED=1]="OPENED",e[e.HEADERS_RECEIVED=2]="HEADERS_RECEIVED",e[e.LOADING=3]="LOADING",e[e.DONE=4]="DONE"}(wb||(wb={}));class kb{constructor(e,t){this.resp=e,this.item=t,this.mockReader()}set(e,t,n){return Reflect.set(e,t,n)}get(e,t){const n=Reflect.get(e,t);switch(t){case"arrayBuffer":case"blob":case"formData":case"json":case"text":return()=>(this.item.responseType=t.toLowerCase(),n.apply(e).then((e=>(this.item.response=pb(this.item.responseType,e),e))))}return"function"==typeof n?n.bind(e):n}mockReader(){let e;if(!this.resp.body)return;if("function"!=typeof this.resp.body.getReader)return;const t=this.resp.body.getReader;this.resp.body.getReader=()=>{const n=t.apply(this.resp.body);if(this.item.readyState===wb.DONE)return n;const s=n.read,r=n.cancel;return this.item.responseType="arraybuffer",n.read=()=>s.apply(n).then((t=>{if(e){const n=new Uint8Array(e.length+t.value.length);n.set(e),n.set(t.value,e.length),e=n}else e=new Uint8Array(t.value);return this.item.endTime=performance.now(),this.item.duration=this.item.endTime-(this.item.startTime||this.item.endTime),this.item.readyState=t.done?4:3,this.item.statusText=t.done?String(this.item.status):"Loading",this.item.responseSize=e.length,this.item.responseSizeText=gb(this.item.responseSize),t.done&&(this.item.response=pb(this.item.responseType,e)),t})),n.cancel=(...t)=>(this.item.cancelState=2,this.item.statusText="Cancel",this.item.endTime=performance.now(),this.item.duration=this.item.endTime-(this.item.startTime||this.item.endTime),this.item.response=pb(this.item.responseType,e),r.apply(n,t)),n}}}class Eb{constructor(e,t,n,s,r,i){this.ignoredHeaders=e,this.setSessionTokenHeader=t,this.sanitize=n,this.sendMessage=s,this.isServiceUrl=r,this.tokenUrlMatcher=i}apply(e,t,n){const s=n[0],r=n[1];if(!s||"string"!=typeof s&&!(null==s?void 0:s.url))return e.apply(window,n);if(s instanceof URL||"string"==typeof s?this.isServiceUrl(String(s)):this.isServiceUrl(String(s.url)))return e.apply(window,n);const i=new hb(this.ignoredHeaders,this.setSessionTokenHeader,this.sanitize);return this.beforeFetch(i,s,r),this.setSessionTokenHeader(((e,t)=>{if(void 0===this.tokenUrlMatcher||this.tokenUrlMatcher(i.url))return void 0===n[1]&&n[0]instanceof Request?n[0].headers.append(e,t):(n[1]||(n[1]={}),void 0===n[1].headers&&(n[1]=Object.assign(Object.assign({},n[1]),{headers:{}})),void(n[1].headers instanceof Headers?n[1].headers.append(e,t):Array.isArray(n[1].headers)?n[1].headers.push([e,t]):n[1].headers[e]=t))})),e.apply(window,n).then(this.afterFetch(i)).catch((e=>{throw i.endTime=performance.now(),i.duration=i.endTime-(i.startTime||i.endTime),e}))}beforeFetch(e,t,n){let s,r="GET",i={};if("string"==typeof t?(r=(null==n?void 0:n.method)||"GET",s=yb(t),i=(null==n?void 0:n.headers)||{}):(r=t.method||"GET",s=yb(t.url),i=t.headers),e.method=r,e.requestType="fetch",e.requestHeader=i,e.url=s.toString(),e.name=(s.pathname.split("/").pop()||"")+s.search,e.status=0,e.statusText="Pending",e.readyState=1,e.startTime||(e.startTime=performance.now()),"[object Headers]"===Object.prototype.toString.call(i)){e.requestHeader={};for(const[t,n]of i)e.requestHeader[t]=n}else e.requestHeader=i;if(s.search&&s.searchParams){e.getData={};for(const[t,n]of s.searchParams)e.getData[t]=n}(null==n?void 0:n.body)&&(e.requestData=fb(n.body))}afterFetch(e){return t=>{e.endTime=performance.now(),e.duration=e.endTime-(e.startTime||e.endTime),e.status=t.status,e.statusText=String(t.status);let n=!1;e.header={};for(const[s,r]of t.headers)e.header[s]=r,n=r.toLowerCase().indexOf("chunked")>-1||n;return n?e.readyState=3:(e.readyState=4,this.handleResponseBody(t.clone(),e).then((t=>{e.responseSize="string"==typeof t?t.length:t.byteLength,e.responseSizeText=gb(e.responseSize),e.response=pb(e.responseType,t);const n=e.getMessage();n&&this.sendMessage(n)})).catch((e=>{if("AbortError"!==e.name)throw e}))),new Proxy(t,new kb(t,e))}}handleResponseBody(e,t){const n=e.headers.get("content-type");return n&&n.includes("application/json")?(t.responseType="json",e.text()):n&&(n.includes("text/html")||n.includes("text/plain"))?(t.responseType="text",e.text()):(t.responseType="arraybuffer",e.arrayBuffer())}}class xb{static create(e,t,n,s,r,i){return new Proxy(fetch,new Eb(e,t,n,s,r,i))}}class Tb{constructor(e,t,n,s,r,i,o){this.ignoredHeaders=t,this.setSessionTokenHeader=n,this.sanitize=s,this.sendMessage=r,this.isServiceUrl=i,this.tokenUrlMatcher=o,this.XMLReq=e,this.XMLReq.onreadystatechange=()=>{this.onReadyStateChange()},this.XMLReq.onabort=()=>{this.onAbort()},this.XMLReq.ontimeout=()=>{this.onTimeout()},this.item=new hb(t,n,s),this.item.requestType="xhr"}get(e,t){switch(t){case"open":return this.getOpen(e);case"send":return this.setSessionTokenHeader(((t,n)=>{(void 0===this.tokenUrlMatcher||this.tokenUrlMatcher(this.item.url))&&e.setRequestHeader(t,n)})),this.getSend(e);case"setRequestHeader":return this.getSetRequestHeader(e);default:const n=Reflect.get(e,t);return"function"==typeof n?n.bind(e):n}}set(e,t,n){switch(t){case"onreadystatechange":return this.setOnReadyStateChange(e,t,n);case"onabort":return this.setOnAbort(e,t,n);case"ontimeout":return this.setOnTimeout(e,t,n)}return Reflect.set(e,t,n)}onReadyStateChange(){if(!(this.item.url&&this.isServiceUrl(this.item.url)||(this.item.readyState=this.XMLReq.readyState,this.item.responseType=this.XMLReq.responseType,this.item.endTime=performance.now(),this.item.duration=this.item.endTime-this.item.startTime,this.updateItemByReadyState(),setTimeout((()=>{this.item.response=pb(this.item.responseType,this.item.response)}),0),this.XMLReq.readyState!==wb.DONE))){const e=this.item.getMessage();e&&this.sendMessage(e)}}onAbort(){this.item.cancelState=1,this.item.statusText="Abort";const e=this.item.getMessage();e&&this.sendMessage(e)}onTimeout(){this.item.cancelState=3,this.item.statusText="Timeout";const e=this.item.getMessage();e&&this.sendMessage(e)}getOpen(e){const t=Reflect.get(e,"open");return(...n)=>{var s,r,i;const o=n[0],a=n[1];return this.item.method=o?o.toUpperCase():"GET",this.item.url=(null===(s=a.toString)||void 0===s?void 0:s.call(a))||"",this.item.name=null!==(i=null===(r=this.item.url)||void 0===r?void 0:r.replace(new RegExp("/*$"),"").split("/").pop())&&void 0!==i?i:"",this.item.getData=((e,t={})=>{mb(t)||(t={});let n=e?e.split("?"):[];if(n.shift(),n.length>0){n=n.join("?").split("&");for(const e of n){const n=e.split("=");try{t[n[0]]=decodeURIComponent(n[1])}catch(e){t[n[0]]=n[1]}}}return t})(this.item.url,{}),t.apply(e,n)}}getSend(e){const t=Reflect.get(e,"send");return(...n)=>{const s=n[0];return this.item.requestData=fb(s),t.apply(e,n)}}getSetRequestHeader(e){const t=Reflect.get(e,"setRequestHeader");return(...n)=>(this.item.requestHeader||(this.item.requestHeader={}),this.item.requestHeader[n[0]]=n[1],t.apply(e,n))}setOnReadyStateChange(e,t,n){return Reflect.set(e,t,((...t)=>{this.onReadyStateChange(),null==n||n.apply(e,t)}))}setOnAbort(e,t,n){return Reflect.set(e,t,((...t)=>{this.onAbort(),n.apply(e,t)}))}setOnTimeout(e,t,n){return Reflect.set(e,t,((...t)=>{this.onTimeout(),n.apply(e,t)}))}updateItemByReadyState(){switch(this.XMLReq.readyState){case wb.UNSENT:case wb.OPENED:this.item.status=wb.UNSENT,this.item.statusText="Pending",this.item.startTime||(this.item.startTime=performance.now());break;case wb.HEADERS_RECEIVED:this.item.status=this.XMLReq.status,this.item.statusText="Loading",this.item.header={};const e=(this.XMLReq.getAllResponseHeaders()||"").split("\n");for(let t=0;t<e.length;t++){const n=e[t];if(!n)continue;const s=n.split(": "),r=s[0];this.item.header[r]=s.slice(1).join(": ")}break;case wb.LOADING:this.item.status=this.XMLReq.status,this.item.statusText="Loading",this.XMLReq.response&&this.XMLReq.response.length&&(this.item.responseSize=this.XMLReq.response.length,this.item.responseSizeText=gb(this.item.responseSize));break;case wb.DONE:this.item.status=this.XMLReq.status||this.item.status||0,this.item.statusText=String(this.item.status),this.item.endTime=performance.now(),this.item.duration=this.item.endTime-(this.item.startTime||this.item.endTime),this.item.response=this.XMLReq.response,this.XMLReq.response&&this.XMLReq.response.length&&(this.item.responseSize=this.XMLReq.response.length,this.item.responseSizeText=gb(this.item.responseSize));break;default:this.item.status=this.XMLReq.status,this.item.statusText="Unknown"}}}class Ib{static create(e,t,n,s,r,i){return new Proxy(XMLHttpRequest,{construct(o){const a=new o;return new Proxy(a,new Tb(a,e,t,n,s,r,i))}})}}const Cb=e=>{const t=`Openreplay: Can't find ${e} in global context.`;console.warn(t)};function Mb(e){return e.__or_req_data__||(e.__or_req_data__={body:void 0,headers:{}}),e.__or_req_data__}function Rb(e){return"string"==typeof e?e.toUpperCase():"GET"}function Nb(e,t={}){const n=Object.assign({failuresOnly:!1,ignoreHeaders:["cookie","set-cookie","authorization"],capturePayload:!1,sessionTokenHeader:!1,captureInIframes:!0,axiosInstances:void 0,useProxy:!0},t);!1===n.useProxy&&e.debug.warn("Network module is migrating to proxy api, to gradually migrate and test it set useProxy to true");const s=n.ignoreHeaders,r=Array.isArray(s)?e=>s.includes(e):()=>s,i=!0===n.sessionTokenHeader?"X-OpenReplay-SessionToken":n.sessionTokenHeader;function o(t){if(i){const n=e.getSessionToken();n&&e.safe(t)(i,n)}}function a(e){if(n.capturePayload||(delete e.request.body,delete e.response.body),n.sanitizer){const t=e.response.body;if("string"==typeof t)try{e.response.body=JSON.parse(t)}catch{}return n.sanitizer(e)}return e}function c(t){if(t&&"string"!=typeof t.body)try{t.body=JSON.stringify(t.body)}catch{t.body="<unable to stringify>",e.notify.warn("Openreplay fetch couldn't stringify body:",t.body)}return JSON.stringify(t)}const l=t=>{if(n.useProxy)return function(e,t,n,s,r,i,o={xhr:!0,fetch:!0,beacon:!0},a){var c;o.xhr&&(e.XMLHttpRequest?e.XMLHttpRequest=Ib.create(t,n,s,r,i,a):Cb("XMLHttpRequest")),o.fetch&&(e.fetch?e.fetch=xb.create(t,n,s,r,i,a):Cb("fetch")),o.beacon&&(null===(c=null==e?void 0:e.navigator)||void 0===c?void 0:c.sendBeacon)&&(e.navigator.sendBeacon=Sb.create(t,n,s,r,i))}(t,n.ignoreHeaders,o,a,(t=>{e.send(Fg(t.requestType,t.method,t.url,t.request,t.response,t.status,t.startTime+rg(),t.duration,t.responseSize))}),(t=>e.isServiceURL(t)),{xhr:!0,fetch:!0,beacon:!0},n.tokenUrlMatcher);const i=t.fetch.bind(t);t.fetch=(t,l={})=>{if(!("string"==typeof t||t instanceof URL)||e.isServiceURL(String(t)))return i(t,l);o((function(e,t){void 0===l.headers&&(l.headers={}),l.headers instanceof Headers?l.headers.append(e,t):Array.isArray(l.headers)?l.headers.push([e,t]):l.headers[e]=t}));const u=performance.now();return i(t,l).then((i=>{const o=performance.now()-u;if(n.failuresOnly&&i.status<400)return i;const d=i.clone();return d.text().then((n=>{const i={},h={};if(!0!==s){const e=([e,t])=>{r(e)||(i[e]=t)};l.headers instanceof Headers?l.headers.forEach(((t,n)=>e([n,t]))):Array.isArray(l.headers)?l.headers.forEach(e):"object"==typeof l.headers&&Object.entries(l.headers).forEach(e),d.headers.forEach(((e,t)=>{r(t)||(h[t]=e)}))}const p=Rb(l.method),f=a({url:String(t),method:p,status:d.status,request:{headers:i,body:l.body||null},response:{headers:h,body:n}});f&&e.send(Fg("fetch",p,String(f.url),c(f.request),c(f.response),d.status,u+rg(),o,0))})).catch((t=>e.debug.error("Could not process Fetch response:",t))),i}))};const l=t.XMLHttpRequest.prototype.open,u=t.XMLHttpRequest.prototype.setRequestHeader,d=t.XMLHttpRequest.prototype.send;n.axiosInstances||(t.XMLHttpRequest.prototype.open=function(t,n){const s=this;o(((e,t)=>s.setRequestHeader(e,t)));let i=0;return s.addEventListener("loadstart",(e=>{i=e.timeStamp})),s.addEventListener("load",e.safe((o=>{const{headers:l,body:u}=Mb(s),d=i>0?o.timeStamp-i:0,h=(s.getAllResponseHeaders()||"").trim().split(/[\r\n]+/),p={};h.forEach((function(e){const t=e.split(": "),n=t.shift();r(n)||(p[n]=t.join(": "))}));const f=Rb(t),m=a({url:String(n),method:f,status:s.status,request:{headers:l,body:u||null},response:{headers:p,body:s.response}});m&&e.send(Fg("xhr",f,String(m.url),c(m.request),c(m.response),s.status,i+rg(),d,0))}))),l.apply(this,arguments)},t.XMLHttpRequest.prototype.send=function(e){return Mb(this).body=e,d.apply(this,arguments)},t.XMLHttpRequest.prototype.setRequestHeader=function(e,t){return r(e)||(Mb(this).headers[e]=t),u.apply(this,arguments)})};l(window),n.axiosInstances&&n.axiosInstances.forEach((t=>{!function(e,t,n,s,r){function i(t){e.debug.log("Openreplay: capturing axios response data",t);const{headers:i,data:o,method:a,url:c,baseURL:l}=t.config,{data:u,headers:d,status:h,response:p}=t,{data:f,headers:m,status:g}=p||{},y=n.ignoreHeaders,_=Array.isArray(y)?e=>y.includes(e):()=>y;function b(e,t){_(t[0])||(e[t[0]]=t[1])}let v={},S={};i.toJSON?v=i.toJSON():i instanceof Headers?i.forEach(((e,t)=>b(v,[t,e]))):Array.isArray(i)?i.forEach((e=>b(v,e))):"object"==typeof i&&Object.entries(i).forEach((e=>b(v,e)));const w=m||d;w.toJSON?S=w.toJSON():w instanceof Headers?w.forEach(((e,t)=>b(S,[t,e]))):Array.isArray(w)?w.forEach((e=>b(S,e))):"object"==typeof w&&Object.entries(w).forEach((([e,t])=>{_(e)||(S[e]=t)}));const k=s({url:c,method:a||"",status:h||g||0,request:{headers:v,body:o},response:{headers:S,body:f||u}});if(!k)return void e.debug.log("Openreplay: empty request/response info, skipping");const E=t.config.__openreplay_timing,x=performance.now()-E;e.debug.log("Openreplay: final req object",k),e.send(Fg("xhr",String(a),String(k.url),r(k.request),r(k.response),k.status,E+rg(),x,0))}e.debug.log("Openreplay: attaching axios spy to instance",t);const o=t.interceptors.request.use((function(t){if(e.debug.log("Openreplay: capturing API request",t),t.__openreplay_timing=performance.now(),n.sessionTokenHeader){const s="string"==typeof n.sessionTokenHeader?n.sessionTokenHeader:"X-OpenReplay-Session-Token",r=e.getSessionToken();r&&t.headers.set(s,r)}return t}),(function(t){e.debug.log("Openreplay: failed API request, skipping",t)}),{synchronous:!0}),a=t.interceptors.response.use((function(e){return n.failuresOnly||i(e),e}),(function(t){var n,s;return e.debug.log("Openreplay: capturing API request error",t),null!==(s=n=t)&&"object"==typeof s&&!0===n.isAxiosError&&Boolean(t.response)?i(t.response):t instanceof Error&&e.send(M_(t,[])),Promise.reject(t)}),{synchronous:!0});e.attachStopCallback((()=>{t.interceptors.request.eject?.(o),t.interceptors.response.eject?.(a)}))}(e,t,n,a,c)})),n.captureInIframes&&e.observer.attachContextCallback(e.safe(l))}const Ob="/installation/javascript-sdk";class Ab{constructor(e){if(this.options=e,this.app=null,this.crossdomainMode=!1,this.checkDoNotTrack=()=>this.options.respectDoNotTrack&&("1"==navigator.doNotTrack||"1"==window.doNotTrack),this.signalStartIssue=(e,t)=>{const n=this.checkDoNotTrack(),s=new XMLHttpRequest,r=this.options.ingestPoint||r_;s.open("POST",r+"/v1/web/not-started"),s.send(JSON.stringify({trackerVersion:"14.0.12",projectKey:this.options.projectKey,doNotTrack:n,reason:t.length?`missing api: ${t.join(",")}`:e}))},this.restartCanvasTracking=()=>{null!==this.app&&this.app.restartCanvasTracking()},this.handleError=(e,t={})=>{if(null!==this.app)if(e instanceof Error){const n=M_(e,[],t);this.app.send(n)}else if(e instanceof ErrorEvent||"PromiseRejectionEvent"in window&&e instanceof PromiseRejectionEvent){const n=R_(e,void 0,t);null!=n&&this.app.send(n)}},this.crossdomainMode=Boolean(gg()&&e.crossdomain?.enabled),!eg||!function(e){if(null==e)return console.error(`OpenReplay: invalid options argument type. Please, check documentation on ${lg}${Ob}`),!1;if("string"!=typeof e.projectKey)if("number"!=typeof e.projectKey){if("number"!=typeof e.projectID)return console.error(`OpenReplay: projectKey is missing or wrong type (string is expected). Please, check ${lg}${Ob} for more information.`),!1;e.projectKey=e.projectID.toString(),dg("`projectID` option","`projectKey` option",Ob)}else console.warn("OpenReplay: projectKey is expected to have a string type."),e.projectKey=e.projectKey.toString();return null!=e.sessionToken&&dg("`sessionToken` option","`sessionHash` start() option","/"),!0}(e))return;if(window.__OPENREPLAY__||!this.crossdomainMode&&gg()&&window.top?.__OPENREPLAY__)return void console.error("OpenReplay: one tracker instance has been initialised already");if(!e.__DISABLE_SECURE_MODE&&"https:"!==location.protocol)return void console.error("OpenReplay: Your website must be publicly accessible and running on SSL in order for OpenReplay to properly capture and replay the user session. You can disable this check by setting `__DISABLE_SECURE_MODE` option to `true` if you are testing in localhost. Keep in mind, that asset files on a local machine are not available to the outside world. This might affect tracking if you use css files.");const t=[],n=["Map","Set","MutationObserver","performance","timing","startsWith","Blob","Worker"];if(this.checkDoNotTrack())t.push("doNotTrack");else for(const e of n)if("timing"===e){if("performance"in window&&!(e in performance)){t.push(e);break}}else if("startsWith"===e){if(!(e in String.prototype)){t.push(e);break}}else if(!(e in window)){t.push(e);break}if(t.length>0){const e=t.join(",");return console.error(`OpenReplay: browser doesn't support API required for tracking or doNotTrack is set to 1. Reason: ${e}`),void this.signalStartIssue("missing_api",t)}const s=new y_(e.projectKey,e.sessionToken,e,this.signalStartIssue,this.crossdomainMode);this.app=s,this.crossdomainMode||(function(e){let t,n,s,r,i=document.referrer;const o=e.safe((()=>{const{URL:n}=document;n!==t&&(t=n,e.send(function(e,t,n,s){return[122,e,t,n,s]}(t,i,r,document.title)),r=0,i=t)})),a=e.safe((()=>{const{innerWidth:t,innerHeight:r}=window;t===n&&r===s||(n=t,s=r,e.send(function(e,t){return[5,e,t]}(n,s)))})),c=void 0===document.hidden?Function.prototype:e.safe((()=>e.send([55,document.hidden])));e.attachStartCallback((()=>{t=null,r=rg(),n=s=-1,o(),a(),c()})),void 0!==document.hidden&&e.attachEventListener(document,"visibilitychange",c,!1,!1),e.ticker.attach(o,1,!1),e.ticker.attach(a,5,!1)}(s),function(e){const t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(void 0===t)return;const n=()=>{return e.send((n=Math.round(1e3*t.downlink),s=t.type||"unknown",[54,n,s]));var n,s};n(),t.addEventListener("change",n)}(s),function(e,t){if(!Object.assign({capturePerformance:!0},t).capturePerformance)return;let n,s;const r=()=>{void 0!==n&&-1!==n&&(n++,requestAnimationFrame(r))};e.ticker.attach((()=>{void 0!==s&&-1!==s&&s++}),0,!1);const i=()=>{void 0!==n&&void 0!==s&&(e.send(function(e,t,n,s){return[49,e,t,n,s]}(n,s,zg.memory.totalJSHeapSize||0,zg.memory.usedJSHeapSize||0)),s=n=document.hidden?-1:0)};e.attachStartCallback((()=>{s=n=-1,i(),r()})),e.attachStopCallback((()=>{s=n=void 0})),e.ticker.attach(i,40,!1),void 0!==document.hidden&&e.attachEventListener(document,"visibilitychange",i,!1,!1)}(s,e),function(e){e.attachEventListener(window,"focus",(function(){document.hidden||(e.debug.log("Openreplay: tab change to"+e.session.getTabId()),e.send(Ug(e.session.getTabId())))}),!1,!1)}(s)),ib(s,e.mouse),function(e,t){let n=!1;const s=new Map;function r(e){Ty(e)&&(Cy(e)&&s.set(e,[e.scrollLeft,e.scrollTop]),Ry(e)&&s.set(e,ab(e)))}const i=e.safe((()=>{t||e.send(function(e,t){return[6,e,t]}(...ab(document)))})),o=e.safe(((t,n)=>{const s=e.nodes.getID(n);void 0!==s&&e.send(function(e,t,n){return[16,e,t,n]}(s,t[0],t[1]))}));e.attachStartCallback(i),e.attachStopCallback((()=>{n=!1,s.clear()})),e.nodes.attachNodeCallback(((t,n)=>{n&&(Cy(t)&&t.scrollLeft+t.scrollTop>0?s.set(t,[t.scrollLeft,t.scrollTop]):Ry(t)&&s.set(t,ab(t))),Ny(t)&&e.nodes.attachNodeListener(t,"scroll",(e=>{r(e.target)}))})),e.attachEventListener(document,"scroll",(e=>{const t=e.target;t!==document?r(t):n=!0})),e.ticker.attach((()=>{n&&(i(),n=!1),s.forEach(o),s.clear()}),5,!1)}(s,this.crossdomainMode),function(e){if(null===e)return;if(!window.CSSStyleSheet)return void e.send((t="no_stylesheet_prototype_in_window",n="",[63,t,n]));var t,n;const s=e.safe(((t,n,s)=>{const r=db.get(t);r&&("string"==typeof s?e.send(Og(r,s,n,e.getBaseHref())):e.send(Ag(r,n)))})),r=e.safe((t=>{let n=t;for(;n.parentRule;)n=n.parentRule;const s=n.parentStyleSheet;if(!s)return void e.debug.warn("No parent StyleSheet found for",n,t);const r=db.get(s);if(!r)return void e.debug.warn("No sheedID found for",s,db);const i=n.cssText,o=s.cssRules,a=Array.from(o).indexOf(n);a>=0?(e.send(Og(r,i,a,e.getBaseHref())),e.send(Ag(r,a+1))):e.debug.warn("Rule index not found in",s,n)})),i=e.safe((e=>{const{insertRule:t,deleteRule:n}=e.CSSStyleSheet.prototype,{insertRule:i,deleteRule:o}=e.CSSGroupingRule.prototype;e.CSSStyleSheet.prototype.insertRule=function(e,n=0){return s(this,n,e),t.call(this,e,n)},e.CSSStyleSheet.prototype.deleteRule=function(e){return s(this,e),n.call(this,e)},e.CSSGroupingRule.prototype.insertRule=function(e,t=0){const n=i.call(this,e,t);return r(this),n},e.CSSGroupingRule.prototype.deleteRule=function(e=0){const t=o.call(this,e);return r(this),t}}));i(window),e.observer.attachContextCallback(i),e.nodes.attachNodeCallback((t=>{if(!Oy(t,"style")||!t.sheet)return;if(null!==t.textContent&&t.textContent.trim().length>0)return;const n=e.nodes.getID(t);if(!n)return;const r=t.sheet,i=ub();db.set(r,i),e.send(Dg(i,n));const o=r.cssRules;for(let e=0;e<o.length;e++)s(r,e,o[e].cssText)}))}(s),function(e){if(null===e)return;if(!cb(document))return;const t=new Map,n=new Map,s=s=>setTimeout((()=>{let r=e.nodes.getID(s);if(s===document&&(r=0),void 0===r)return;let i=n.get(r);i||(i=[]);const o=[],a=s.adoptedStyleSheets;if(a&&Symbol.iterator in a)for(const n of a){let s=t.get(n);const a=!s;if(s||(s=ub(),t.set(n,s)),i.includes(s)||e.send(Dg(s,r)),a){const t=n.cssRules;for(let n=0;n<t.length;n++)e.send(Og(s,t[n].cssText,n,e.getBaseHref()))}o.push(s)}if(Symbol.iterator in i)for(const t of i)o.includes(t)||e.send(Lg(t,r));n.set(r,o)}),20);function r(e){const t=Object.getOwnPropertyDescriptor(e,"adoptedStyleSheets");t&&Object.defineProperty(e,"adoptedStyleSheets",{...t,set:function(e){const n=t.set.call(this,e);return s(this),n}})}const i=n=>{if(n.__openreplay_adpss_patched__)return;n.__openreplay_adpss_patched__=!0,r(n.Document.prototype),r(n.ShadowRoot.prototype);const{replace:s,replaceSync:i}=n.CSSStyleSheet.prototype;n.CSSStyleSheet.prototype.replace=function(n){return s.call(this,n).then((s=>{const r=t.get(this);return r&&e.send(Ng(r,n,e.getBaseHref())),s}))},n.CSSStyleSheet.prototype.replaceSync=function(n){const s=t.get(this);return s&&e.send(Ng(s,n,e.getBaseHref())),i.call(this,n)}};i(window),e.observer.attachContextCallback(e.safe(i)),e.attachStopCallback((()=>{t.clear(),n.clear()})),e.attachStartCallback((()=>{s(document)})),e.nodes.attachNodeCallback((e=>{cb(e)&&s(e)}))}(s),w_(s,e),function(e,t){function n(t){function n(n){const s=R_(n,t);null!=s&&e.send(s)}try{e.attachEventListener(t,"unhandledrejection",n),e.attachEventListener(t,"error",n)}catch(e){console.error("Error while attaching to error proto contexts",e)}}Object.assign({captureExceptions:!0},t).captureExceptions&&(e.observer.attachContextCallback(n),n(window))}(s,e),function(e){function t(t,n){e.attributeSender.sendSetAttribute(t,"src","https://static.openreplay.com/tracker/placeholder.jpeg");const{width:s,height:r}=n.getBoundingClientRect();n.hasAttribute("width")||e.attributeSender.sendSetAttribute(t,"width",String(s)),n.hasAttribute("height")||e.attributeSender.sendSetAttribute(t,"height",String(r))}const n=function(t,n){const{srcset:s}=n;if(!s)return;const r=s.split(s.match(/,\s+/)?/,\s+/:",").map((e=>N_(e))).join(", ");e.attributeSender.sendSetAttribute(t,"srcset",r)},s=function(n,s){s.src.length>1e5&&t(n,s),e.send(Mg(n,"src",s.src,e.getBaseHref()))},r=e.safe((function(t){const n=N_(t.src||"");cg(n)&&e.send(Bg(e.timestamp(),0,0,0,0,0,n,"img",0,!1))})),i=e.safe((function(i){const o=e.nodes.getID(i);var a;void 0!==o&&i.complete&&(0!==i.naturalHeight||0!==i.naturalWidth||(a=i.src,tg&&(a.startsWith("data:image/svg+xml")||a.match(/.svg$|/i)))?e.sanitizer.isHidden(o)||e.sanitizer.isObscured(o)?t(o,i):(s(o,i),n(o,i)):r(i))})),o=_g(e.safe((t=>{for(const r of t)if("attributes"===r.type){const t=r.target,i=e.nodes.getID(t);if(void 0===i)return;"src"===r.attributeName&&s(i,t),"srcset"===r.attributeName&&n(i,t)}})),e.options.forceNgOff);e.attachStopCallback((()=>{o.disconnect()})),e.nodes.attachNodeCallback((t=>{Oy(t,"img")&&(e.nodes.attachNodeListener(t,"error",(()=>r(t))),e.nodes.attachNodeListener(t,"load",(()=>i(t))),i(t),o.observe(t,{attributes:!0,attributeFilter:["src","srcset"]}))}))}(s),function(e,t){const n=Object.assign({obscureInputNumbers:!0,obscureInputEmails:!0,defaultInputMode:1,obscureInputDates:!1},t);function s(t,s){let r=s.value,i=n.defaultInputMode;"password"===s.type||e.sanitizer.isHidden(t)?i=2:(e.sanitizer.isObscured(t)||0===i&&(n.obscureInputNumbers&&"date"!==s.type&&/\d\d\d\d/.test(r)||n.obscureInputDates&&"date"===s.type||n.obscureInputEmails&&("email"===s.type||~r.indexOf("@"))))&&(i=1);let o=0;switch(i){case 2:o=-1,r="";break;case 1:o=r.length,r=""}return{value:r,mask:o}}function r(t,n){const{value:r,mask:i}=s(t,n);e.send(function(e,t,n){return[18,e,t,n]}(t,r,i))}const i=new Map,o=new Map;function a(e,t){i.get(e)!==t.value&&(i.set(e,t.value),r(e,t))}function c(t,n){o.get(t)!==n&&(o.set(t,n),e.send(function(e,t){return[19,e,t]}(t,n)))}e.attachStopCallback((()=>{i.clear(),o.clear()})),e.ticker.attach((()=>{i.forEach(((t,n)=>{const s=e.nodes.getNode(n);if(!s)return i.delete(n);a(n,s)})),o.forEach(((t,n)=>{const s=e.nodes.getNode(n);if(!s)return o.delete(n);c(n,s.checked)}))}),3),e.nodes.attachNodeCallback(e.safe((t=>{const n=e.nodes.getID(t);if(void 0!==n){if(Oy(t,"select")&&(r(n,t),e.nodes.attachNodeListener(t,"change",(()=>r(n,t)))),function(e){return!!Oy(e,"textarea")||!!Oy(e,"input")&&O_.includes(e.type)}(t)){a(n,t);let r=0,i=0,o=0;const c=()=>{r=ig()},l=()=>{0===i&&0!==r&&(i=ig()-r)},u=()=>{0!==r&&(o=ig()-r),function(t,n,r,i){const{value:o,mask:a}=s(t,n),c=D_(n);e.send(function(e,t,n,s,r,i){return[112,e,t,n,s,r,i]}(t,o,0!==a,c,r,i))}(n,t,i,o),i=0,o=0,r=0};return e.nodes.attachNodeListener(t,"focus",c),e.nodes.attachNodeListener(t,"input",l),void e.nodes.attachNodeListener(t,"change",u)}return function(e){if(!Oy(e,"input"))return!1;const t=e.type;return"checkbox"===t||"radio"===t}(t)?(c(n,t.checked),void e.nodes.attachNodeListener(t,"change",(()=>c(n,t.checked)))):void 0}})))}(s,e),function(e,t){const n=Object.assign({captureResourceTimings:!0,capturePageLoadTimings:!0,capturePageRenderTimings:!0,excludedResourceUrls:[]},t);if("PerformanceObserver"in window||(n.captureResourceTimings=!1),!n.captureResourceTimings)return;let s={};function r(t){if(t.duration<0||!cg(t.name)||e.isServiceURL(t.name))return;null!==s&&(s[t.name]=t.startTime+t.duration);let r=!1;n.excludedResourceUrls?.forEach((e=>{t.name.startsWith(e)&&(r=!0)})),r||e.send(Bg(t.startTime+rg(),t.duration,t.responseStart&&t.startTime?t.responseStart-t.startTime:0,t.transferSize>t.encodedBodySize?t.transferSize-t.encodedBodySize:0,t.encodedBodySize||0,t.decodedBodySize||0,t.name,t.initiatorType,t.transferSize,t.responseStatus&&304===t.responseStatus||0===t.transferSize))}const i=new PerformanceObserver((e=>e.getEntries().forEach(r)));let o;e.attachStartCallback((function({sessionID:e}){e!==o&&(performance.getEntriesByType("resource").forEach(r),o=e),i.observe({entryTypes:["resource"]})})),e.attachStopCallback((function(){i.disconnect()}));let a=0,c=0;if(n.capturePageLoadTimings){let t=!1;e.ticker.attach((()=>{if(!t&&(0!==a&&0!==c||performance.getEntriesByType("paint").forEach((e=>{const{name:t,startTime:n}=e;switch(t){case"first-paint":a=n;break;case"first-contentful-paint":c=n}})),performance.timing.loadEventEnd||performance.now()>3e4)){t=!0;const{navigationStart:n,requestStart:s,responseStart:r,responseEnd:i,domContentLoadedEventStart:o,domContentLoadedEventEnd:l,loadEventStart:u,loadEventEnd:d}=performance.timing;e.send(function(e,t,n,s,r,i,o,a,c){return[23,e,t,n,s,r,i,o,a,c]}(s-n||0,r-n||0,i-n||0,o-n||0,l-n||0,u-n||0,d-n||0,a,c))}}),30)}if(n.capturePageRenderTimings){let t=0,n=0,r=0,i=null,o=!1;e.ticker.attach((()=>{if(o)return;const l=performance.now();if(null!==s&&(t=Math.max.apply(null,Object.keys(s).map((e=>s[e]))),l-t>1e3&&(i=function(e){const t=[],n=document.getElementsByTagName("*"),s=/url\(("[^"]*"|'[^']*'|[^)]*)\)/i;for(let r=0;r<n.length;r++){const i=n[r];let o="";if(Oy(i,"img")&&(o=i.currentSrc||i.src),!o){const e=getComputedStyle(i).getPropertyValue("background-image");if(e){const t=s.exec(e);null!==t&&(o=t[1],(o.startsWith('"')||o.startsWith("'"))&&(o=o.substr(1,o.length-2)))}}if(!o)continue;const a="data:image"===o.substr(0,10)?0:e[o];if(void 0===a)continue;const c=i.getBoundingClientRect(),l=Math.max(c.top,0),u=Math.max(c.left,0),d=Math.min(c.bottom,window.innerHeight||document.documentElement&&document.documentElement.clientHeight||0),h=Math.min(c.right,window.innerWidth||document.documentElement&&document.documentElement.clientWidth||0);if(d<=l||h<=u)continue;const p=(d-l)*(h-u);t.push({time:a,area:p})}return t}(s),s=null)),null!==r&&(l-r>50&&(n=l),r=l-n>5e3?null:l),null!==i&&null===r||l>3e4){o=!0,s=null;const l=null===i?0:function(e,t){let n=Math.max(document.documentElement&&document.documentElement.clientWidth||0,window.innerWidth||0)*Math.max(document.documentElement&&document.documentElement.clientHeight||0,window.innerHeight||0)/10,s=n*e;for(let r=0;r<t.length;r++){const{time:i,area:o}=t[r];n+=o,s+=o*(i>e?i:e)}return 0===n?0:s/n}(c||a,i),{domContentLoadedEventEnd:u,navigationStart:d}=performance.timing,h=null===r?Math.max(n,c,u-d||0):0;e.send(function(e,t,n){return[24,e,t,n]}(l,c>t?c:t,h))}}))}}(s,e),function(e){function t(t){const n=e.nodes.getID(t);void 0!==n&&e.send(Cg(n))}let n=!1;e.nodes.attachNodeCallback((s=>{Oy(s,"body")&&(e.nodes.attachNodeListener(s,"focus",(e=>{Ty(e.target)&&(t(e.target),n=!1)})),e.nodes.attachNodeListener(s,"blur",(t=>{null===t.relatedTarget&&(n=!0,setTimeout((()=>{n&&e.send(Cg(-1))}),0))})))})),e.attachStartCallback((()=>{let e=document.activeElement;for(;e&&Oy(e,"iframe")&&e.contentDocument;)e=e.contentDocument.activeElement;e&&e!==e.ownerDocument.body&&t(e)}),!0)}(s),function(e){if(!window.FontFace)return;const t=new Map,n=n=>{class s extends n.FontFace{constructor(...s){if("string"==typeof s[1]){let r="";s[2]&&e.safe((()=>{r=JSON.stringify(s[2])}));const i=[s[0],s[1],r],o=t.get(n.document)||[];o.push(i),t.set(n.document,o);const a=n===window?0:e.nodes.getID(n.document);if(void 0===a)return;e.active()&&e.send(Ig(a,...i))}super(...s)}}n.FontFace=s};e.observer.attachContextCallback(n),n(window),e.nodes.attachNodeCallback(e.safe((n=>{if(!Ry(n))return;const s=t.get(n);if(!s)return;const r=n.defaultView===window?0:e.nodes.getID(n);void 0!==r&&s.forEach((t=>{e.send(Ig(r,...t))}))})))}(s),Nb(s,e.network),function(e){e.attachEventListener(document,"selectionchange",(()=>{const t=document.getSelection();if(null===t||t.isCollapsed)e.send($g(-1,-1,""));else{const n=e.nodes.getID(t.anchorNode),s=e.nodes.getID(t.focusNode),r=t.toString().replace(/\s+/g," ");n&&s&&e.send($g(n,s,r))}}))}(s),window.__OPENREPLAY__=this,e.flags&&e.flags.onFlagsLoad&&this.onFlagsLoad(e.flags.onFlagsLoad);const r=window.open;(e.autoResetOnWindowOpen||e.resetTabOnWindowOpen)&&(s.attachStartCallback((()=>{const t=s.getTabId(),n=s.sessionStorage??window.sessionStorage;window.open=function(...i){return e.autoResetOnWindowOpen&&s.resetNextPageSession(!0),e.resetTabOnWindowOpen&&n.removeItem(e.session_tabid_key||"__openreplay_tabid"),s.resetNextPageSession(!1),n.setItem(e.session_tabid_key||"__openreplay_tabid",t),r.call(window,...i)}})),s.attachStopCallback((()=>{window.open=r})))}isFlagEnabled(e){return this.featureFlags.isFlagEnabled(e)}onFlagsLoad(e){this.app?.featureFlags.onFlagsLoad(e)}clearPersistFlags(){this.app?.featureFlags.clearPersistFlags()}reloadFlags(){return this.app?.featureFlags.reloadFlags()}getFeatureFlag(e){return this.app?.featureFlags.getFeatureFlag(e)}getAllFeatureFlags(){return this.app?.featureFlags.flags}use(e){return e(this.app,this.options)}isActive(){return null!==this.app&&this.app.active()}trackWs(e){if(null!==this.app)return this.app.trackWs(e)}start(e){return this.browserEnvCheck()?null===this.app?Promise.reject("Browser doesn't support required api, or doNotTrack is active."):this.app.start(e):Promise.reject("Trying to start not in browser.")}browserEnvCheck(){return!!eg||(console.error(`OpenReplay: you are trying to start Tracker on a node.js environment. If you want to use OpenReplay with SSR, please, use componentDidMount or useEffect API for placing the \`tracker.start()\` line. Check documentation on ${lg}${Ob}`),!1)}coldStart(e,t){return this.browserEnvCheck()?null===this.app?Promise.reject("Tracker not initialized"):void this.app.coldStart(e,t):Promise.reject("Trying to start not in browser.")}startOfflineRecording(e,t){return this.browserEnvCheck()?null===this.app?Promise.reject("Tracker not initialized"):this.app.offlineRecording(e,t):Promise.reject("Trying to start not in browser.")}uploadOfflineRecording(){if(null!==this.app)return this.app.uploadOfflineRecording()}stop(){if(null!==this.app)return this.app.stop(),this.app.session.getSessionHash()}forceFlushBatch(){null!==this.app&&this.app.forceFlushBatch()}getSessionToken(){return null===this.app?null:this.app.getSessionToken()}getSessionInfo(){return null===this.app?null:this.app.session.getInfo()}getSessionID(){return null===this.app?null:this.app.getSessionID()}getTabId(){return null===this.app?null:this.app.getTabId()}getUxId(){return null===this.app?null:this.app.getUxtId()}sessionID(){return dg("'sessionID' method","'getSessionID' method","/"),this.getSessionID()}getSessionURL(e){if(null!==this.app)return this.app.getSessionURL(e)}setUserID(e){"string"==typeof e&&null!==this.app&&this.app.session.setUserID(e)}userID(e){dg("'userID' method","'setUserID' method","/"),this.setUserID(e)}setUserAnonymousID(e){"string"==typeof e&&null!==this.app&&this.app.send(function(e){return[29,e]}(e))}userAnonymousID(e){dg("'userAnonymousID' method","'setUserAnonymousID' method","/"),this.setUserAnonymousID(e)}setMetadata(e,t){"string"==typeof e&&"string"==typeof t&&null!==this.app&&this.app.session.setMetadata(e,t)}metadata(e,t){dg("'metadata' method","'setMetadata' method","/"),this.setMetadata(e,t)}event(e,t=null,n=!1){if("string"==typeof e&&null!==this.app){if(n)return this.issue(e,t);try{t=JSON.stringify(t)}catch(e){return}this.app.send(function(e,t){return[27,e,t]}(e,t))}}issue(e,t=null){if("string"==typeof e&&null!==this.app){try{t=JSON.stringify(t)}catch(e){return}this.app.send(function(e,t){return[64,e,t]}(e,t))}}}window.NapkinOR={isReady:!1,init:function(){try{let e=window.location.hostname;if(e.includes("local"))return void console.log("Skipping OpenReplay on local environment.",e);this.tracker=new Ab({projectKey:Yf()?"ST6CHB3GxKaUNbCNSHjO":"qEGEoiTtThbyhGAnnMX2",ingestPoint:"https://openreplay.napkin.ai/ingest",capturePerformance:!0,consoleThrottling:500,defaultInputMode:0,obscureTextNumbers:!1,obscureTextEmails:!1,obscureInputEmails:!1,defaultInputMode:0,__DISABLE_SECURE_MODE:!0!==Yf(),network:{captureHeaders:!0,captureContent:!0,capturePayload:!0,sanitizer:e=>{try{e.status<300&&(e.request.body=null,e.response.body=null)}catch(e){console.error("[OpenReplay] Error in network sanitizer: ",e)}return e}}}),this.tracker.start().then((()=>{if(this.isReady=!0,console.log("[OpenReplay] Started",this.tracker.getSessionURL()),window.NapkinSentry){var e=window.NapkinSentry.getClient();e&&(e.setTag("openReplaySessionID",this.tracker.getSessionID()),e.setTag("openReplaySessionToken",this.tracker.getSessionToken()))}})),console.debug("[OpenReplay] Loaded")}catch(e){console.error("[OpenReplay] Error in init: ",e)}},getClient:function(){return this.tracker}},window.NapkinOR.init(),Yf()?window.NapkinSentry.init():console.log("[Sentry] Sentry is not loaded in development mode")})();
//# sourceMappingURL=m.js.map?t=941e00534